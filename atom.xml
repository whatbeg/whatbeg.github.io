<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Whatbeg&#39;s blog</title>
  <subtitle>当你的才华撑不起你的野心时，就应该静下心来好好学习。</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://whatbeg.com/"/>
  <updated>2018-03-01T02:05:35.255Z</updated>
  <id>http://whatbeg.com/</id>
  
  <author>
    <name>whatbeg</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>湖南农村个体经营所面临的形势变迁考（2008-2018）</title>
    <link href="http://whatbeg.com/2018/03/01/countrysideretail.html"/>
    <id>http://whatbeg.com/2018/03/01/countrysideretail.html</id>
    <published>2018-03-01T02:02:29.000Z</published>
    <updated>2018-03-01T02:05:35.255Z</updated>
    
    <content type="html">&lt;p&gt;近十年来（2008-2018）中国经济仍然以较高的速度发展，人均可支配收入稳步提升，带来了消费的提升和消费结构明显的变化，给包括城市和农村在内的个体经营带来了很大的影响。那我们能否对此种变化做一种合理的解释，并能够启发我们对未来农村个体经济形势的合理预测呢？&lt;/p&gt;
&lt;p&gt;本文决定考察农村消费模式和消费结构十年间（2008-2018）的变迁。&lt;/p&gt;
&lt;p&gt;限于笔者的经历，本文以湖南某农村为例，经济体上选取该农村某个体经营户A为例。A商户位于村中心区域，毗邻一所农村中学（初中），2008年该校学生500人左右，2018年该校学生150人左右。该区域有商户3家，卫生院一家，屠宰店一家，修理店一家，以及周边住户数户。村庄无自然资源相关产业，外出务工人员较多。&lt;/p&gt;
&lt;p&gt;我们将要研究的消费大致分为三种，年节消费，日常消费以及特殊日消费。&lt;/p&gt;
&lt;p&gt;年节消费是指春节前后等重要传统节日期间的消费，这期间随着外出务工人员的返乡，农村活动人口增加，拉动消费增长。&lt;/p&gt;
&lt;p&gt;日常消费是指一年中非年节或重要日期的消费，主要消费人群为周边住户，以及学生群体，后续会详细介绍。&lt;/p&gt;
&lt;p&gt;特殊日消费是指重要事件造成的消费，比如因红白喜事或生日等各种宴请之日的消费。&lt;/p&gt;
&lt;h2 id=&quot;年节消费&quot;&gt;&lt;a href=&quot;#年节消费&quot; class=&quot;headerlink&quot; title=&quot;年节消费&quot;&gt;&lt;/a&gt;年节消费&lt;/h2&gt;&lt;p&gt;十年前：&lt;/p&gt;
&lt;p&gt;由于十年前交通不如现在发达，村民乘用车的持有量非常小，交通不便，外出务工人员返乡只能搭乘公共交通，辗转不便，且周边大型超市较少，到村中商户进行年货采购者所占多数。十年前，年货主要销售量由烟花爆竹，糖果炒货，烟酒槟榔，饮料支撑，春节期间主要销售为礼品（烟酒，奶制品等）所支撑。商户在春节前后应接不暇，总体销售量大。&lt;/p&gt;
&lt;p&gt;十年后：&lt;/p&gt;
&lt;p&gt;随着社会经济的飞速发展，农村大型超市个数逐渐增多，且离村不到10公里路程，搭乘公共汽车只需12分钟时间，而且超市的批量低价，且常有的促销活动逐渐抢占了部分农村个体商户的日常食品用品的零售业务；再者，村民乘用车持有量逐渐增加，该村离省城长沙具有70多公里，十年间一条高速开通，将去往省城长沙的时间由3个小时缩短到1个小时左右，大大方便了来回的村民，况且在长沙务工的人员所在多有，往来携带商品也司空见惯，交通的便利带来了对农村消费的冲击。综合以上两点，年节消费中的糖果炒货的消费被挤占殆尽，几近于无。故而如今的年货消费以烟花爆竹，烟酒槟榔以及饮料，礼品为主要成分。原因在于，政府部门由于安全问题频发，山火等频发，逐渐限制烟花爆竹的销售和燃放，实行许可证机制，在城市中只有极少的商户经营此类，在乡村中也需要具有符合一定安全条件的库房者才可经营，且由于烟花爆竹体量大，运输不便，所以城市的烟花爆竹消费对农村影响甚微。由于烟花爆竹在农村人眼中仍为年节必需品，故而烟花爆竹类消费比重逐渐增加到了极高点。未来烟花爆竹类商品的销售可能会被严格限紧，此类消费一经禁止，那么农村商户的年节经营利润下降一大截。其次是烟酒槟榔，这种商品受众固定，且价格不具弹性，即在何处购买都是一个价，故而此类消费收到的影响也极小。其次，饮料为年节餐桌上必不可少的一种消费品，且其重量大，也不便携带，受到的影响也不是很大。春节期间的消费主要为各种礼品所占，销售额的大头又为烟酒所占，这二者价格并不低廉，所以能够支撑一定的消费额。以烟来说，一条软白沙的价格在45左右，一条盒白沙的价格在50左右，一条精白沙的价格在80左右，一条芙蓉王的价格在225左右。以酒来说，一对（两瓶）礼品白酒的价格在40-200元不等。其次的一些主要礼品为礼盒装水果，由于其质量难以保证，重量大不便携带，只被少数消费者青睐，近年来已逐渐淡出该村市场。其次有提装奶制品，营养品等赠送老人小孩的佳品，销售量所在较大。据推测，中高档礼品烟酒的销售可能也受到了城市经济的冲击。&lt;/p&gt;
&lt;p&gt;综上，农村商户年货的销售额的大头已逐渐为烟酒和烟花爆竹所占，在烟花爆竹这一块的利润极不稳定，有被完全清除的风险，农村商户年节的销售可能还会面临紧缩，必须采取一定措施，另辟蹊径，找到其他的稳定盈利点。&lt;/p&gt;
&lt;h2 id=&quot;日常消费&quot;&gt;&lt;a href=&quot;#日常消费&quot; class=&quot;headerlink&quot; title=&quot;日常消费&quot;&gt;&lt;/a&gt;日常消费&lt;/h2&gt;&lt;p&gt;十年前：&lt;/p&gt;
&lt;p&gt;日常消费的消费者主要分为两大块，一是农村常住人口，衣食住行，食和用大量都靠本地商店提供，同样也是由于交通不发达，且农村经济落后，大超市少，竞争少，农村个体商户拥有着良好的盈利空间。二是其他人口，如毗邻中学的学生。十年前，该中学还是如日中天，吸引着来自多个邻村的众多适龄学生人口，该校共有4届学生，包括6年级，初中1,2,3年级，每个年级一般为两个班，每班50-60人左右，大概每届有100多人，全校400-500人。且学校允许通学，即允许离家近的同学不在学校住宿，每周末放两天假。由此，每天的流动学生较多，当时A商户在零售之外开早餐副业，经营米粉，包点和烧烤等业务，吸引学生不计其数，每天早上生意兴隆，且以周五下午和周一早上人尤多，生意尤胜，早餐之外，大量销售食品，文具等南杂百货。&lt;/p&gt;
&lt;p&gt;十年后：&lt;/p&gt;
&lt;p&gt;日常消费逐渐由农村常住人口所主导，且受到了村镇大超市的冲击，生意与十年前相差径庭。&lt;br&gt;一方面，农村常住人口乘用车，摩托车等非常常见，与镇中心的交通时间缩短，与发达邻镇的距离也大大缩短，大型超市林立，超市商品种类众多，不是小型个体户所能比拟，从而严重冲击这农村本地商户的日用品，小食品，百货等的销售。&lt;br&gt;另一方面，为了安全起见，毗邻的中学早已全面实行寄宿制，学生外出活动被严格限制，且学校学生人数大量减少，因为大量家长更愿意把他们的孩子送往县里更优秀的初级中学就读，加之农村适龄学生本来就在减少，于是该校总学生数由十年前的500多人减少到现在的约100-200人（具体数字不详），不甚萧条。这也导致了商品零售业务不断地走下坡路。&lt;/p&gt;
&lt;p&gt;综上，农村商户的日常销售主要受到农村活动人口减少以及大型超市的冲击这两方面的因素，导致境况大大不如以前。农村个体户经营主要走的是熟人经济，消费者主要还是老顾客，很难拓宽客户，这就给农村商户的破局带来了更多的挑战。如果不能找出良好的破局方法，那么最终农村商户的销售将会被挤压到一个下线，维持基本客观的盈利将遥遥无期，最终可能会造成多个商户的退出。&lt;/p&gt;
&lt;h2 id=&quot;特殊日消费&quot;&gt;&lt;a href=&quot;#特殊日消费&quot; class=&quot;headerlink&quot; title=&quot;特殊日消费&quot;&gt;&lt;/a&gt;特殊日消费&lt;/h2&gt;&lt;p&gt;特殊日的消费主要包括红白喜事，宴请，庆典等活动带来的大批量订购，一般价格也会有所优惠，这种形式也决定了订购的商品种类很有限。&lt;/p&gt;
&lt;p&gt;十年间，此种消费模式并未收到多大影响，因其具有非常强的本地性。&lt;/p&gt;
&lt;p&gt;但无论如何，此种消费可遇而不可求，且不可多求，纵使其单次订购量大，也根本无法充当主要的销售量，充其量不过是销售中的调味剂罢了。在农村商户中，零售仍为其主要。&lt;/p&gt;
&lt;h2 id=&quot;总结&quot;&gt;&lt;a href=&quot;#总结&quot; class=&quot;headerlink&quot; title=&quot;总结&quot;&gt;&lt;/a&gt;总结&lt;/h2&gt;&lt;p&gt;所以，笔者大致推测，如今以上三种消费所占农村个体商户的销售额比重大致为：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;年节消费：日常消费：特殊日消费 = 20% : 75% : 5%&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;（笔者臆测，可能失准）&lt;/p&gt;
&lt;p&gt;由此看来，作为农村个体经营户，主要销售额和利润仍然来自于日常的销售，仍然需要将重点着眼于日常销售。可当前农村个体经营户面临的最大的几个挑战在于：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;农村常住人口稀少，顾客客源少&lt;/li&gt;
&lt;li&gt;客户比较固定，较难扩展&lt;/li&gt;
&lt;li&gt;大型零售超市的竞争&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;笔者猜测，如何有效应对这三个挑战，是当前所有中国农村个体商户所面临的重大问题，这关乎生存问题，不可不察，不可不思危，不可不思变。且面临的问题已经到了一个极严重的地步，值得所有农村个体商户做深入的思考，未雨绸缪，否则只能走向关门的境地。&lt;/p&gt;
&lt;p&gt;至于解决之道，本文暂且不表，读者可发挥才智，自谋良策。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;近十年来（2008-2018）中国经济仍然以较高的速度发展，人均可支配收入稳步提升，带来了消费的提升和消费结构明显的变化，给包括城市和农村在内的个体经营带来了很大的影响。那我们能否对此种变化做一种合理的解释，并能够启发我们对未来农村个体经济形势的合理预测呢？&lt;/p&gt;
&lt;p&gt;
    
    </summary>
    
      <category term="随笔 | Essays" scheme="http://whatbeg.com/categories/%E9%9A%8F%E7%AC%94-Essays/"/>
    
    
      <category term="随笔" scheme="http://whatbeg.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
      <category term="人文社科" scheme="http://whatbeg.com/tags/%E4%BA%BA%E6%96%87%E7%A4%BE%E7%A7%91/"/>
    
  </entry>
  
  <entry>
    <title>如何着手你的第一篇paper</title>
    <link href="http://whatbeg.com/2018/02/04/writefirstpaper.html"/>
    <id>http://whatbeg.com/2018/02/04/writefirstpaper.html</id>
    <published>2018-02-04T03:25:11.000Z</published>
    <updated>2018-02-04T03:28:55.246Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;原文： Elena D. Kallestinova 《How to Write Your First Research Paper》 Yale University.&lt;br&gt;原文地址： &lt;a href=&quot;https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3178846/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3178846/&lt;/a&gt;&lt;br&gt;译者： whatbeg, Google translation&lt;br&gt;译文地址： &lt;a href=&quot;http://whatbeg.com&quot;&gt;http://whatbeg.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&quot;摘要&quot;&gt;&lt;a href=&quot;#摘要&quot; class=&quot;headerlink&quot; title=&quot;摘要&quot;&gt;&lt;/a&gt;摘要&lt;/h2&gt;&lt;p&gt;对于许多新手作者来说，撰写科学研究手稿是一个令人生畏的过程。其中一个绊脚石就是流程的开始和第一稿的创建。本文介绍了如何启动写作过程和起草一个研究手稿的每个章节的准则。本文讨论了能够使作者为出版物提交一份结构良好、内容全面的稿件的七条规则。此外，作者列出了成功修订的不同策略。这些策略中的每一个都代表了修订过程中的一个步骤，应该有助于作者提高稿件的质量。这篇论文可以看作是出版的一本简短手册。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;这是深夜。你一年来一直在为你的项目苦苦挣扎。你生成了大量有趣的数据。你的移液管感觉像是你的手的延伸，进行免疫印迹分析已经成为你日常工作的一部分，类似于刷牙。你的同事们认为你已经准备好写一篇论文了，而你的实验室的同事们也会为你的写作进展“缓慢”而挑逗。然而，时光流逝，你不能强迫自己坐下来写作。你有一段时间没有写任何东西（实验报告不算），你觉得你已经失去了耐力。写作过程如何进行？你怎么能把你的写作融入实验的日程呢？你应该从哪一部分开始？一个好的研究报告和一个坏的报告有什么区别？你应该如何修改你的文件？这些和其他许多问题在你的脑海中嗡嗡作响，让你感到压力。结果，你拖延了。在本文中，我将讨论与科学论文写作过程有关的问题。具体而言，我将重点介绍开始撰写科学论文的最佳方法，撰写各部分的提示以及最佳修订策略。&lt;/p&gt;
&lt;h2 id=&quot;在Outlook中安排你的写作时间&quot;&gt;&lt;a href=&quot;#在Outlook中安排你的写作时间&quot; class=&quot;headerlink&quot; title=&quot;在Outlook中安排你的写作时间&quot;&gt;&lt;/a&gt;在Outlook中安排你的写作时间&lt;/h2&gt;&lt;p&gt;无论你是否写了100篇论文，或者你正在努力工作，开始这个过程是最困难的部分，除非你有一个严格的写作时间表。写作很难。这是一个非常困难的过程，集中精力和大脑的工作。正如Hayes的写作研究框架所述：“这是一种需要动机的生成性活动，它是一种需要认知过程和记忆的智力活动”[1]。保罗·西尔维亚（Paul Silvia）在他的“如何写作：生产性学术写作的实用指南”一书中说，对于某些人来说，“保存尸体更容易，而不是写一篇关于它的文章”[2]。就像任何艰苦的工作一样，除非你经常练习，否则你将不会成功。如果你一年没有做过体育锻炼，只有定期锻炼才能让你恢复健康。同样的经常性练习，或者我称之为“写作练习”，都需要成为一个富有成效的作者。在日常工作时间表中选择1到2小时的块，并将其视为不可取消的约会。在确定要写入哪些时间块时，应该选择最适合此类工作的时间。对于很多人来说，早晨更富有成效。一位耶鲁大学研究生从上午8点到上午9点写了一个学期的论文，当时她的实验室是空的。在学期结束的时候，她感到非常惊讶，因为论文的完成完全没有打断他的正常实验时间。另外，一天的第一件事情是做最困难的事情，在一天中的其余时间里都会有成就感。这种积极的情绪渗透到我们的工作和生活中，对我们的整体态度有非常积极的影响。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;规则1：在日历中创建常规时间块作为写作时间，并保留这些日程。&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;从大纲开始&quot;&gt;&lt;a href=&quot;#从大纲开始&quot; class=&quot;headerlink&quot; title=&quot;从大纲开始&quot;&gt;&lt;/a&gt;从大纲开始&lt;/h2&gt;&lt;p&gt;现在你已经预定了时间，你需要决定如何开始写作。 最好的策略是从一个大纲开始。 这不会是你习惯的大纲，每个部分用罗马数字表示，主题句子和支持点并排列出。 这个大纲将类似于你的论文模板。 最初，大纲将为你的论文形成一个结构; 这将有助于产生想法和制定假设。 根据George M. Whitesides的建议，“。。。 从一张空白的纸张开始，以任何顺序写下所有关于论文的重要想法“[3]。 使用表1作为大纲的起点。 包括你的视觉效果（数字，表格，公式，方程和算法），并列出你的发现。 这些将构成你的大纲的第一层，随着你的阐述，这些内容将最终扩展。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xsl28.com1.z0.glb.clouddn.com/writepaper01.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;下一个阶段是添加上下文和结构。 在这里，你将把所有想法分为几个部分：介绍，方法，结果和讨论/结论（表2）。 这一步将有助于增加工作的连贯性并筛选你的想法。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xsl28.com1.z0.glb.clouddn.com/writepaper02.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;现在你已经扩展了你的大纲，你准备好了下一步：与你的同事和导师讨论你的论文的想法。 许多大学都有写作中心，研究生可以安排个别咨询，并接受他们的论文草稿。 在草稿的早期阶段获得反馈可以节省大量时间。 通过思想进行交谈，人们可以将思想概念化并组织起来，而不会浪费时间在不必要的写作上。 大纲是沟通你的想法和交流想法的最有效的方式。 而且，这也是决定你要提交论文的出版物的最佳阶段。 许多人提出了三个选择，并与导师和同事讨论。 如果你的论文被拒绝，列出期刊优先级列表可以帮助你快速重新提交论文。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;规则2：制定详细的大纲，并与导师和同行讨论。&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;继续完善草稿&quot;&gt;&lt;a href=&quot;#继续完善草稿&quot; class=&quot;headerlink&quot; title=&quot;继续完善草稿&quot;&gt;&lt;/a&gt;继续完善草稿&lt;/h2&gt;&lt;p&gt;当你得到足够的反馈意见，并决定你将提交的期刊，真正的写作过程开始。将大纲复制到单独的文件中，并展开每个要点，添加数据并详细说明。当你创建初稿时，不要屈服于编辑的诱惑。不要放慢速度来选择一个更好的词或更好的词组;不要停下来改善你的句子结构。把你的想法写进论文中，稍后修改和编辑。正如保罗·西尔维娅（Paul Silvia）所解释的那样：“在创建文本时进行修改就像在清晨喝不含咖啡因的咖啡：崇高的想法，错误的时间”[2]。&lt;/p&gt;
&lt;p&gt;许多学生抱怨说，他们不是生产性的作家，因为他们经历了作家的阻塞。盯着一个空的屏幕是令人沮丧的，但你的屏幕并不是真的是空的：你有一个你的文章的模板，所有你需要做的是填补空白。事实上，作家的阻塞是一个科学家的逻辑谬误 - 这只是一个拖延的借口。当科学家开始撰写研究论文时，他们已经有了数据文件，实验室记录，材料和实验设计，一些视觉效果和有结果的表格。他们所需要做的就是审视这些作品，并把它们放在一个综合性的论文中。&lt;/p&gt;
&lt;h2 id=&quot;从材料和方法部分开始&quot;&gt;&lt;a href=&quot;#从材料和方法部分开始&quot; class=&quot;headerlink&quot; title=&quot;从材料和方法部分开始&quot;&gt;&lt;/a&gt;从材料和方法部分开始&lt;/h2&gt;&lt;p&gt;如果你仍然难以开始撰写论文，请先写下材料和方法部分。既然你有所有的笔记，那么描述实验设计和程序就不会有问题了。本节中最重要的目标是尽可能明确地提供足够的细节和参考资料。最后，本节的目的是让其他研究人员评估和重复你的工作。所以不要和（1）中的句子作者一样遇到同样的问题：&lt;/p&gt;
&lt;p&gt;&lt;em&gt;1A。细菌通过离心沉淀。&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;1B。为了分离T细胞，收集淋巴结。&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;正如你所看到的，缺少关键的信息：（1a）中离心细菌的速度，时间和温度; （b）中收集淋巴结的来源。如（2a）和（2b）所示，在添加信息时可以改进句子：&lt;/p&gt;
&lt;p&gt;&lt;em&gt;2A。在25℃以3000g离心15分钟沉淀细菌。&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;2B。为了分离T细胞，在用ovabumin免疫后第7天收集来自Balb / c小鼠的纵隔和肠系膜淋巴结。&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;如果你的方法之前已经发表并且是众所周知的，那么你应该只提供参考文献，如（3a）所示。如果你的方法未发布，那么你需要确保提供所有基本的细节，如（3b）所示。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;3A。根据约翰逊[23]，干细胞被分离出来。&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;3B。使用涂布有抗CD34抗体的生物素化碳纳米管分离干细胞。&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;而且，在这一部分，凝聚力和流畅度是至关重要的。如（4）所示，导致流畅性中断的不当行为之一是在同一段落内从被动语态转换为主动语态，反之亦然。这种转换会误导读者。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;4.研究1的行为计算机实验通过使用E-Prime进行编程。通过使用视觉模拟量表（SI方法），患者听到喜欢的音乐和不良音乐，我们对乐趣，情绪和兴奋进行评分。音乐的首选和不受欢迎的地位是沿着愉悦的连续体来实现的[4]。&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;（4）的问题是，读者必须从实验的角度（被动语态）转换到实验者的观点（主动语态）。这个开关引起第一句和第三句中的动作表演者的混淆。为了提高上述段落的连贯性和流畅性，你应该在选择观点上保持一致：第一人称“我们”或被动语态[5]。 （5）中考虑两个修改后的例子。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;5A。我们通过使用E-Prime来编程研究1的基于行为计算机的实验。我们采用视觉模拟评分法（SI方法）对患者的喜悦，情绪和兴奋进行评分，听患者喜欢听音乐和听音乐。我们沿着愉悦的连续性实现了音乐的首选和不重要的地位。&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;5B。研究1的行为计算机实验通过使用E-Prime进行编程。当患者通过使用视觉模拟量表（SI方法）听取喜欢的愉悦音乐和不良音乐时，享受乐趣，情绪和唤醒的评级。音乐的首选和不受欢迎的状态是沿着愉快的连续性进行的。&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;如果你选择实验者的观点，那么你最终可能会重复“我们这样做”的句子。对于很多读者来说，句子全部以“我们”开头的段落也可能听起来有破坏性。所以，如果你选择主动句子，你需要保持“我们”主题的数量最少，并改变句子的开始[6]。&lt;/p&gt;
&lt;p&gt;有趣的是，最近的研究已经报道，材料和方法部分是研究论文中的唯一部分，其中被动语态主要覆盖了主动语态的使用[5,7,8,9]。例如，Martínez在“生物科学”的实验性全文研究文章[1]的100万字的语料库的基础上，显示了方法部分主动语音使用的显着下降[7]。笔者认为，以“我们”为模板的主动语态只是在设计和执行实验工作中，作为一个工具来揭示个人对程序决策的责任。这意味着，虽然研究论文的所有其他部分使用主动语态，但被动语态仍然是材料和方法部分中最主要的部分。&lt;/p&gt;
&lt;p&gt;写作材料和方法部分是一个细致和耗时的任务要求极端的准确性和清晰度。这就是为什么当你完成你的草稿时，你应该尽可能多地从你的同事那里得到反馈。本节众多读者将帮助你找出缺失的环节，提高本节的技术风格。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;规则3：在描述材料和方法时要细致和准确。不要在一个段落内改变观点。&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;撰写结果部分-Results&quot;&gt;&lt;a href=&quot;#撰写结果部分-Results&quot; class=&quot;headerlink&quot; title=&quot;撰写结果部分(Results)&quot;&gt;&lt;/a&gt;撰写结果部分(Results)&lt;/h2&gt;&lt;p&gt;对于许多作者而言，编写“结果”部分比编写“材料和方法”部分更令人生畏。如果人们对你的论文感兴趣，他们对你的结果感兴趣。这就是为什么使用你所有的写作技巧来客观地用有说服力的材料和文本以有序和合乎逻辑的顺序来呈现你的主要发现是至关重要的。&lt;/p&gt;
&lt;p&gt;你的结果应该被组织成不同的部分或者小节，每个部分或者小节里都有实验的目的，你的实验方法，包括文本和视觉材料（表格，图形，原理图，算法和公式）和数据评论的数据。对于大多数期刊，你的数据评论将包括对视觉材料中呈现的数据的有意义的总结，并对最重要的发现进行解释。这个数据表示不应该重复在视觉上的数据，而是突出最重要的一点。在“标准”研究论文的方法中，你的结果部分应该排除数据解释，留给讨论部分。然而，这些解释逐渐隐秘地渗入到研究论文中：“减少数据，归纳数据，突出科学案例都是高度解释的过程。现在应该清楚，我们不让研究报告中的资料自己说话，在总结我们的结果时，我们将其为读者解读“[10]。因此，包括“实验医学杂志”和“临床调查杂志”在内的许多期刊使用联合的结果/讨论部分，其结果紧接着是解释。&lt;/p&gt;
&lt;p&gt;这部分的另一个重要方面是创建一个全面和支持的论点或一个研究得很好的案例。这意味着你应该有选择性地呈现数据，只选择那些你的读者理解你的发现所必需的实验细节。你可能已经进行了20次实验并收集了大量记录，但这并不意味着你应该在论文中提供所有这些记录。你需要将你的结果与你的数据区分开来，并且能够放弃过多的实验细节，这些细节可能会分散读者的注意力并使其混淆。但是，不应该将图片或论点与数据操纵或伪造混淆，这是数据和结果的故意扭曲。如果你的一些发现与你的想法相矛盾，你必须提到这一点，并找出矛盾的合理解释。&lt;/p&gt;
&lt;p&gt;另外，你的文本不应该包含不相关的和外围的信息，包括概述句，如（6）。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;为了展示我们的结果，我们首先介绍实验系统的所有组件，然后描述感染的结果。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;实际上，文字繁冗的句子会让读者隐瞒你的想法。一个常见的词条来源是不必要的增强器。 “清楚”，“基本”，“相当”，“基本上”，“相当”，“相当”，“真正”，“虚拟”等副词强化词不仅增加了句子的冗长度，信誉。 （7）中的常见例子，它们吸引读者的情感，但却降低了客观性：&lt;/p&gt;
&lt;p&gt;&lt;em&gt;7a. Table 3 clearly shows that …&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;7b. It is obvious from figure 4 that …&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;词义的另一个来源是名词化，即来自动词和形容词的名词与弱动词配对，包括“be”，“have”，“do”，“make”，“cause”，“provide”，“get”如“有”。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;8a. We tested the hypothesis that there is a disruption of membrane asymmetry.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;8b. In this paper we provide an argument that stem cells repopulate injured organs.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;在上面的句子中，抽象的名词化“破坏”和“论证”并没有促进句子的清晰度，而是用无用的词汇来混淆词汇，从而分散了词汇的含义。为了改进你的句子，避免不必要的名词化，把被动动词和结构变成主动和直接的句子。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;9a. We tested the hypothesis that the membrane asymmetry is disrupted.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;9b. In this paper we argue that stem cells repopulate injured organs.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;你的结果部分是你的论文的核心，代表你一年或更多的日常研究。因此，通过编写直接，简明和明确的句子，引导读者阅读故事。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;规则4：在描述你的结果时要清楚，简洁，客观。&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;现在是时候编写Introduction了&quot;&gt;&lt;a href=&quot;#现在是时候编写Introduction了&quot; class=&quot;headerlink&quot; title=&quot;现在是时候编写Introduction了&quot;&gt;&lt;/a&gt;现在是时候编写Introduction了&lt;/h2&gt;&lt;p&gt;现在起草研究报告已经完成接近一半了，现在是更新大纲的时候了。 在描述你的方法和结果的同时，你们中许多人偏离原来的大纲，重新集中你的想法。 因此，在继续创建简介之前，请重新阅读“方法和结果”部分，并更改大纲以符合研究重点。 更新后的大纲将帮助你回顾你的论文的总体情况，主题，主要思想和目的，这对于撰写你的介绍非常重要。&lt;br&gt;构建你的介绍的最好方法是遵循表3所示的三步法。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xsl28.com1.z0.glb.clouddn.com/writepaper03.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;大纲中的举措和信息可以帮助你有效地创建Introduction，而不会错过任何步骤。这些行动是交通标志，引导读者通过你的想法的道路。每一招都在你的论文中起着重要的作用，应该深思熟虑。当你建立领土的时候，你把研究放在背景下，突出你研究课题的重要性。通过找到利基，你勾勒出你的研究问题的范围，并进入科学对话。最后一步，“占领利基”，就是你简要介绍研究的地方，突出你的论文的意义。这三个步骤可以让读者评估他们对论文的兴趣，并在论文评审过程中发挥重要作用，从而确定你的论文评论者。&lt;/p&gt;
&lt;p&gt;一些学者作者假定读者“应该按照论文”来找到你的方法和你的发现的答案。因此，许多新手作者不会提出他们的实验方法和主要发现，错误地认为读者将在稍后阅读后续章节时找到必要的信息[5]。然而，这种“悬念”的方式不适合科学写作。为了引起读者的兴趣，科学作者应该直截了当，直截了当地提出结果和方法的信息性的一句话总结。&lt;/p&gt;
&lt;p&gt;另一个问题是作家低估了Introduction的重要性。许多新的研究者错误地认为所有的读者都明白研究问题的重要性，而忽略了这一部分。然而，这个假设是错误的，因为这一部分的目的不是评估一般研究问题的重要性。目标是展示你的研究贡献和你的发现的重要性。因此，在描述本文的益处时，应该明确而清楚地说明。&lt;/p&gt;
&lt;p&gt;Introduction不应该太长。事实上，对于大多数期刊而言，这是一个非常简短的部分，大约有250到600个单词，但是由于它的重要性，它可能是最困难的部分。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;规则5：通过发信号通知所有元素并陈述作品的新颖性，引导读者对其感兴趣。&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;对结果（Results）的讨论-–-Discussion编写&quot;&gt;&lt;a href=&quot;#对结果（Results）的讨论-–-Discussion编写&quot; class=&quot;headerlink&quot; title=&quot;对结果（Results）的讨论 – Discussion编写&quot;&gt;&lt;/a&gt;对结果（Results）的讨论 – Discussion编写&lt;/h2&gt;&lt;p&gt;对于许多科学家来说，撰写讨论部分与撰写论文一样可怕。恐惧的大部分来自该部分的变化。由于每篇论文都有其独特的结果和发现，讨论部分的长度，形状和结构各不相同。但是，写这部分的一些基本原则依然存在。了解这些规则或“动作”可以改变你对本节的态度，并帮助你对结果进行全面的解释。&lt;/p&gt;
&lt;p&gt;讨论部分的目的是把你的研究结果放在研究背景下，“解释研究结果的含义以及为什么它们很重要，不带有傲慢，居高临下或者要人领情”[11]。前两个动作的结构几乎是介绍中的一个反映。在介绍中，你可以从一般到特定以及从背景到你的研究问题进行放大;在“讨论”部分中，你可以将研究发现的摘要缩小到研究上下文中，如表4所示。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xsl28.com1.z0.glb.clouddn.com/writepaper04.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;讨论部分的开头段落是许多作者面临的最大挑战。遵循表1中的步骤，最好的选择是从研究的主要研究结果开始，这些研究结果为你介绍中的研究问题提供了答案。最常见的起始短语是“我们的发现证明。 。 “或”在这项研究中，我们已经证明了这一点。 。 “或”我们的结果表明。 。 “然而，在某些情况下，提醒读者关于研究问题，甚至提供一个简短的背景，然后说出答案会更有意义。在研究者提出一些发现或提出多个研究问题的情况下，这一点很重要。你对研究主要发现的总结应该在你介绍这些发现的重要性之后进行。新手作家最常犯的错误之一就是假定他的发现的重要性。即使你的重要性是明确的，你的读者可能不明显。将研究结果及其重要性摘要与你的研究问题一样重要。&lt;/p&gt;
&lt;p&gt;另一个有用的策略是通过对结果的替代解释进行预测和评论来采取积极主动的行动。解决潜在的疑惑将会使你免于痛苦的关于你对结果的错误解释的评论，并将使你看起来像一个深思熟虑的体贴研究者。而且，对其他解释的评估可能会帮助你为讨论部分的下一步行动创造一个合乎逻辑的步骤：研究背景。&lt;/p&gt;
&lt;p&gt;研究背景移动的目标是展示你的发现如何符合当前研究的总体情况，以及你如何对该主题的现有知识做出贡献。这也是讨论任何差异和意外发现的地方，否则这些发现可能会扭曲你论文的总体情况。此外，通过显示局限性，弱点和假设来概括研究范围是必不可少的，并为你作为科学家的形象增添了谦虚。但是，请确保你不会因为覆盖你的调查结果的问题而结束你的论文。尝试提出可行的解释和解决方案。&lt;/p&gt;
&lt;p&gt;如果你的提交不需要单独的结论部分，那么添加另一段关于“take-home message”是必须的。这应该是一个一般的声明，重申你对这个研究问题的回答，并增加它的科学含义，实际应用或建议。正如在你的论文的所有其他部分，清晰准确的语言和简洁的综合句子是至关重要的。但是，除此之外，你的写作应该传达信心和权威。说明你的语气最简单的方法是使用主动语态和第一人称代词。伴随着清晰和简洁，这些工具是最好的说服你的读者你的观点和你的想法。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;规则6：以简洁而令人信服的语气表达原则，关系和概括。&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;选择最佳的工作修改策略&quot;&gt;&lt;a href=&quot;#选择最佳的工作修改策略&quot; class=&quot;headerlink&quot; title=&quot;选择最佳的工作修改策略&quot;&gt;&lt;/a&gt;选择最佳的工作修改策略&lt;/h2&gt;&lt;p&gt;现在你已经制定了第一稿，你的写作态度应该有所改善。此外，你应该对自己能够在合理的时间内完成项目并提交论文更有信心。你也已经制定了你的写作时间表，并精确地遵循。不要停下来 - 你只是在你的目的地的中点。正如最好的和最宝贵的钻石不过是一个没有吸引力的石头，只有经过培训的专业人士才能认识到，如果你的想法和结果没有被抛光和掠过，你的想法和结果可能会被忽视。尽管你试图以合乎逻辑和全面的方式表达你的想法，但初稿通常是一团糟。使用保罗·西尔维亚（Paul Silvia）的建议：“你的第一份草案应该听起来像是他们被冰岛人以非母语人士的语言急匆匆地翻译过来的。”[2]。你的成功程度将取决于你如何修改和编辑你的论文。&lt;/p&gt;
&lt;p&gt;可以在宏观结构和微观结构水平上进行修改[13]。宏观结构修订包括组织，内容和流程的修订。微观层面包括单词，句子结构，语法，标点符号和拼写。&lt;/p&gt;
&lt;p&gt;处理宏观结构修改的最好方法是通过你论文中的想法概述。在最后一次更新大纲之前，在撰写介绍和讨论之前。现在你已经有了开始和结论，你可以对整张纸进行鸟瞰。大纲将允许你查看你的论文的观点是否连贯，如果你的结果在逻辑上构建，并且讨论与“导论”中的研究问题相关联。你将能够看到任何部分是否缺少某些内容，或者是否需要重新排列信息以表达你的观点。&lt;/p&gt;
&lt;p&gt;下一步是从一开始就修改每个部分。理想情况下，你应该限制自己一次只能在大约五页的小部分上工作[14]。在这些短小的部分之后，你的眼睛会习惯于你的写作，而你发现问题的效率会下降。在阅读内容和组织时，应该控制自己编辑论文结构和语法的要求，只关注你的想法和演示逻辑的流程。经验丰富的研究人员所做的修改往往是新手作者的三倍[15,16]。修改是一个困难但有用的技能，学术作家经过多年的实践获得。&lt;/p&gt;
&lt;p&gt;与宏观结构修正相比，宏观结构修正是一个线性过程，通常通过详细的轮廓和分段来完成，微观结构修正是一个非线性过程。虽然宏观结构修订的目标是分析你的想法和逻辑，微观结构编辑的目标是仔细审视你的想法的形式：段落，句子和文字。你不需要，也不建议按照纸张的顺序执行此类修订。你可以从最后或从不同的部分开始。你甚至可以通过逐句，逐句逐句阅读句子来修改。&lt;/p&gt;
&lt;p&gt;在写作中心咨询过程中经常使用的微观结构修订策略之一是大声朗读论文[17]。你可以大声朗读给自己，录音机，或同事或朋友。在阅读和听取你的论文的时候，你更容易注意到流畅性被打乱的地方，以及由于句子很长，不清楚或者连接错误而导致你跌倒的地方。&lt;/p&gt;
&lt;p&gt;另一个修订策略是学习你的常见错误，并对它们进行有针对性的搜索[13]。所有作家都有一组特定的问题，即他们的写作特质。记住这些问题对学术作家和记住朋友的生日一样重要。创建一个这些特质的列表，并使用你的文字处理器运行这些问题的搜索。如果你的问题是没有总结性单词的指示性代词，那么在你的文本中搜索“this / these / those”，并检查你是否适当地使用了这个单词。如果你使用增强词有问题，则搜索“真正”或“非常”，并从文本中删除它们。可以进行相同的有针对性的搜索以消除冗赘。搜索“有”或“和”可以帮助你避免庞大的句子。&lt;/p&gt;
&lt;p&gt;最后的策略是使用硬拷贝和铅笔。打印字号为14的双倍空间复印件，并分几步重新读取纸张。尝试阅读你的纸张线，其余部分用一张纸覆盖。当你被迫只看到你的一小部分写作，你不太可能分心，更容易发现问题。你最终会发现更多不必要的词语，错误的词组或者不平行的结构。&lt;/p&gt;
&lt;p&gt;在你应用所有这些策略之后，你已经准备好和你的同事分享你的写作了。&lt;/p&gt;
&lt;h2 id=&quot;是时候提交了&quot;&gt;&lt;a href=&quot;#是时候提交了&quot; class=&quot;headerlink&quot; title=&quot;是时候提交了&quot;&gt;&lt;/a&gt;是时候提交了&lt;/h2&gt;&lt;p&gt;这是深夜。 你仍然在你的实验室完成修订并准备好提交论文。 你感到高兴 - 你终于完成了一年的工作。 你明天将提交论文，不管结果如何，你都知道你可以做到。 如果一本杂志没有接收你的论文，你会利用反馈，并再次提交。 你总会把它出版，这是最重要的成就。&lt;/p&gt;
&lt;p&gt;更重要的是，你有你预定的写作时间，你将保留你将来的出版物，阅读和记笔记，写作补助金和审查文件。 这次你不会失去耐力，你会成为一个有生产力的科学家。 但现在，让我们庆祝这篇文章的结尾。&lt;/p&gt;
&lt;h2 id=&quot;References&quot;&gt;&lt;a href=&quot;#References&quot; class=&quot;headerlink&quot; title=&quot;References&quot;&gt;&lt;/a&gt;References&lt;/h2&gt;&lt;p&gt;Hayes JR. In: The Science of Writing: Theories, Methods, Individual Differences, and Applications. Levy CM, Ransdell SE, editors. Mahwah, NJ: Lawrence Erlbaum; 1996. A new framework for understanding cognition and affect in writing; pp. 1–28.&lt;br&gt;Silvia PJ. How to Write a Lot. Washington, DC: American Psychological Association; 2007.&lt;br&gt;Whitesides GM. Whitesides’ Group: Writing a Paper. Adv Mater. 2004;16(15):1375–1377.&lt;br&gt;Soto D, Funes MJ, Guzmán-García A, Warbrick T, Rotshtein T, Humphreys GW. Pleasant music overcomes the loss of awareness in patients with visual neglect. Proc Natl Acad Sci USA. 2009;106(14):6011–6016. [PMC free article] [PubMed]&lt;br&gt;Hofmann AH. Scientific Writing and Communication. Papers, Proposals, and Presentations. New York: Oxford University Press; 2010.&lt;br&gt;Zeiger M. Essentials of Writing Biomedical Research Papers. 2nd edition. San Francisco, CA: McGraw-Hill Companies, Inc.; 2000.&lt;br&gt;Martínez I. Native and non-native writers’ use of first person pronouns in the different sections of biology research articles in English. Journal of Second Language Writing. 2005;14(3):174–190.&lt;br&gt;Rodman L. The Active Voice In Scientific Articles: Frequency And Discourse Functions. Journal Of Technical Writing And Communication. 1994;24(3):309–331.&lt;br&gt;Tarone LE, Dwyer S, Gillette S, Icke V. On the use of the passive in two astrophysics journal papers with extensions to other languages and other fields. English for Specific Purposes. 1998;17:113–132.&lt;br&gt;Penrose AM, Katz SB. Writing in the sciences: Exploring conventions of scientific discourse. New York: St. Martin’s Press; 1998.&lt;br&gt;Swales JM, Feak CB. Academic Writing for Graduate Students. 2nd edition. Ann Arbor: University of Michigan Press; 2004.&lt;br&gt;Hess DR. How to Write an Effective Discussion. Respiratory Care. 2004;29(10):1238–1241. [PubMed]&lt;br&gt;Belcher WL. Writing Your Journal Article in 12 Weeks: a guide to academic publishing success. Thousand Oaks, CA: SAGE Publications; 2009.&lt;br&gt;Single PB. Demystifying Dissertation Writing: A Streamlined Process of Choice of Topic to Final Text. Virginia: Stylus Publishing LLC; 2010.&lt;br&gt;Faigley L, Witte SP. Analyzing revision. Composition and Communication. 1981;32:400–414.&lt;br&gt;Flower LS, Hayes JR, Carey L, Schriver KS, Stratman J. Detection, diagnosis, and the strategies of revision. College Composition and Communication. 1986;37(1):16–55.&lt;br&gt;Young BR. In: A Tutor’s Guide: Helping Writers One to One. Rafoth B, editor. Portsmouth, NH: Boynton/Cook Publishers; 2005. Can You Proofread This? pp. 140–158.&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;原文： Elena D. Kallestinova 《How to Write Your First Research Paper》 Yale University.&lt;br&gt;原文地址： &lt;a href=&quot;https://www.ncbi.nlm.n
    
    </summary>
    
      <category term="译文 | Translation" scheme="http://whatbeg.com/categories/%E8%AF%91%E6%96%87-Translation/"/>
    
    
      <category term="译文" scheme="http://whatbeg.com/tags/%E8%AF%91%E6%96%87/"/>
    
      <category term="论文阅读" scheme="http://whatbeg.com/tags/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/"/>
    
  </entry>
  
  <entry>
    <title>用Jupyter Notebook编写、运行集群程序</title>
    <link href="http://whatbeg.com/2018/01/02/jupyternotebook.html"/>
    <id>http://whatbeg.com/2018/01/02/jupyternotebook.html</id>
    <published>2018-01-02T14:21:49.000Z</published>
    <updated>2018-01-02T14:36:49.602Z</updated>
    
    <content type="html">&lt;p&gt;本文简要描述一下用jupyter notebook编写程序，然后在集群上运行的过程。这样我们无须每次将程序传到集群上去运行，而可以通过notebook实现即时运行。&lt;/p&gt;
&lt;p&gt;一般使用Jupyter Notebook时，需要用到辅助软件Apache toree。&lt;/p&gt;
&lt;p&gt;1.在集群上安装&lt;code&gt;jupyter&lt;/code&gt;，&lt;code&gt;Apache toree&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;2.用&lt;code&gt;putty&lt;/code&gt;或者&lt;code&gt;MobaXterm&lt;/code&gt;开启SSH tunnel到集群Gateway(跳板机)&lt;br&gt;&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;valinor&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;Dynamic&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;ForwardPort&lt;/span&gt;&lt;span class=&quot;selector-pseudo&quot;&gt;:12345&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;SSH&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;Server&lt;/span&gt;: &lt;span class=&quot;selector-attr&quot;&gt;[user@跳板机IP]&lt;/span&gt;&lt;span class=&quot;selector-pseudo&quot;&gt;:22&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;gondolin&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;Dynamic&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;ForwardPort&lt;/span&gt;&lt;span class=&quot;selector-pseudo&quot;&gt;:23456&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;SSH&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;Server&lt;/span&gt;: &lt;span class=&quot;selector-attr&quot;&gt;[user@跳板机IP]&lt;/span&gt;&lt;span class=&quot;selector-pseudo&quot;&gt;:22&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;3.脚本&lt;/p&gt;
&lt;p&gt;编写脚本&lt;code&gt;start.app.toree.sh&lt;/code&gt;并运行：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#setup paths&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;source&lt;/span&gt; /etc/profile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; SPARK_HOME=/opt/work/spark-2.1.0-bin-hadoop2.7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; SPARK_MASTER=&lt;span class=&quot;string&quot;&gt;&quot;spark://172.168.0.21:7077&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; PYSPARK_DRIVER_PYTHON_OPTS=&lt;span class=&quot;string&quot;&gt;&quot;notebook --notebook-dir=/home/huqiu/notebooks --ip=* --port=12345 --no-browser --NotebookApp.token=&#39;&#39; --allow-root&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; JAR=&lt;span class=&quot;variable&quot;&gt;$&amp;#123;APP_HOME&amp;#125;&lt;/span&gt;/dist/lib/app-&lt;span class=&quot;variable&quot;&gt;$&amp;#123;APP_VERSION&amp;#125;&lt;/span&gt;-jar-with-dependencies.jar&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; PY_ZIP=&lt;span class=&quot;variable&quot;&gt;$&amp;#123;APP_HOME&amp;#125;&lt;/span&gt;/dist/lib/app-&lt;span class=&quot;variable&quot;&gt;$&amp;#123;APP_VERSION&amp;#125;&lt;/span&gt;-python-api.zip&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; CONF=&lt;span class=&quot;variable&quot;&gt;$&amp;#123;APP_HOME&amp;#125;&lt;/span&gt;/dist/conf/xxx.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; NOTEBOOK_DIR=&lt;span class=&quot;string&quot;&gt;&quot;./notebooks&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; PORT=12345&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; SPARK_OPTS=&lt;span class=&quot;string&quot;&gt;&quot;--master local[12] --driver-memory 4g --properties-file &lt;span class=&quot;variable&quot;&gt;$&amp;#123;CONF&amp;#125;&lt;/span&gt; --jars &lt;span class=&quot;variable&quot;&gt;$&amp;#123;JAR&amp;#125;&lt;/span&gt; --conf spark.driver.extraClassPath=&lt;span class=&quot;variable&quot;&gt;$&amp;#123;JAR&amp;#125;&lt;/span&gt; --conf spark.executor.extraClassPath=&lt;span class=&quot;variable&quot;&gt;$JAR&lt;/span&gt;&amp;#125; --driver-java-options=&#39;-Dhttp.proxyHost=xxx.com -Dhttp.proxyPort=913 -Dhttps.proxyHost=xxx.com -Dhttps.proxyPort=913 -Djava.awt.headless=true&#39;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$SPARK_HOME&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$SPARK_OPTS&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; PYTHONPATH=&lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$&amp;#123;SPARK_HOME&amp;#125;&lt;/span&gt;/python:&lt;span class=&quot;variable&quot;&gt;$&amp;#123;SPARK_HOME&amp;#125;&lt;/span&gt;/python/lib/py4j-0.10.4-src.zip:&lt;span class=&quot;variable&quot;&gt;$&amp;#123;PY_ZIP&amp;#125;&lt;/span&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$PYTHONPATH&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;jupyter toree install --interpreters=Scala,PySpark --spark_home=&lt;span class=&quot;variable&quot;&gt;$&amp;#123;SPARK_HOME&amp;#125;&lt;/span&gt; --spark_opts=&lt;span class=&quot;string&quot;&gt;&#39;$&amp;#123;SPARK_OPTS&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;jupyter notebook --notebook-dir=&lt;span class=&quot;variable&quot;&gt;$&amp;#123;NOTEBOOK_DIR&amp;#125;&lt;/span&gt; --ip=* --port=&lt;span class=&quot;variable&quot;&gt;$&amp;#123;PORT&amp;#125;&lt;/span&gt; --no-browser --NotebookApp.token=&lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt; --allow-root&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;4.打开浏览器&lt;code&gt;http://集群具体机器IP:PORT&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;5.编写notebook，运行即可&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;本文简要描述一下用jupyter notebook编写程序，然后在集群上运行的过程。这样我们无须每次将程序传到集群上去运行，而可以通过notebook实现即时运行。&lt;/p&gt;
&lt;p&gt;一般使用Jupyter Notebook时，需要用到辅助软件Apache toree。&lt;/p&gt;
    
    </summary>
    
      <category term="大数据系统与技术 | Big Data" scheme="http://whatbeg.com/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%B3%BB%E7%BB%9F%E4%B8%8E%E6%8A%80%E6%9C%AF-Big-Data/"/>
    
    
      <category term="Spark" scheme="http://whatbeg.com/tags/Spark/"/>
    
      <category term="大数据" scheme="http://whatbeg.com/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
  </entry>
  
  <entry>
    <title>2017这一年</title>
    <link href="http://whatbeg.com/2018/01/01/annualsummary2017.html"/>
    <id>http://whatbeg.com/2018/01/01/annualsummary2017.html</id>
    <published>2018-01-01T06:36:05.000Z</published>
    <updated>2018-02-04T03:29:40.183Z</updated>
    
    <content type="html">&lt;h2 id=&quot;引子&quot;&gt;&lt;a href=&quot;#引子&quot; class=&quot;headerlink&quot; title=&quot;引子&quot;&gt;&lt;/a&gt;引子&lt;/h2&gt;&lt;p&gt;又到了年关，该写点什么了。&lt;/p&gt;
&lt;p&gt;说快也快，2017眨个眼的工夫就过去了，写了好几年总结，今年却有点不知怎么下笔，随意写点好了。&lt;/p&gt;
&lt;p&gt;去年的年终总结题目是&lt;a href=&quot;http://whatbeg.com/2016/12/31/annualsummary2016.html&quot;&gt;《那不平凡的2016》&lt;/a&gt;，今年似乎只需改一个字，叫《那平凡的2017》。&lt;/p&gt;
&lt;p&gt;工作学习生活逐渐安定了下来，上半年还需上课，下半年课都没有了，整天也就是宿舍-实验室-食堂三点一线，不过，且行且珍惜吧，毕竟这样多的自主时间当真是不多了。既然平凡，那就享受平凡吧。&lt;/p&gt;
&lt;h2 id=&quot;关于学习&quot;&gt;&lt;a href=&quot;#关于学习&quot; class=&quot;headerlink&quot; title=&quot;关于学习&quot;&gt;&lt;/a&gt;关于学习&lt;/h2&gt;&lt;p&gt;今年的学习（工作）分为几大块，一是与师兄合作的论文，而是暑期短暂的实习，三是自己的科研。&lt;/p&gt;
&lt;p&gt;今年3月开始跟着师兄参与一个组内与公司的合作研究，在BigDL平台上做一些深度学习优化方面的工作。&lt;/p&gt;
&lt;p&gt;7月份，刚刚学期结束，最后一门考试完，大师兄说整理一篇论文吧，说投个A试试，OK嘛，写了一个月论文，包括补实验，赶在31号提交了，当时心里也知道没戏，想着算了，就当练手吧。果然在11月底收到reject。评审确实给出了一些中肯的意见。不管怎样，吸取经验，下次应该可以做得更好罢。&lt;/p&gt;
&lt;p&gt;说到写论文，推荐一个语法检查器，一个叫Grammarly的Chrome插件，可以帮你避免很多的语法错误，简直是神器:D&lt;/p&gt;
&lt;p&gt;第二个，暑期的时候，利用假期去上海某友司做了一段时间，团队的人还是挺牛的，人也都很好，学到了许多新的东西，认识了许多新朋友，还是挺开心的。&lt;/p&gt;
&lt;p&gt;第三个就是自己的科研了，下学期晚回来了10多天到学校，开始的比较晚，中间在正式调研阶段，到10月中旬，博士师兄给到一个课题，说可以做一下，然后到现在大概两个多月了，其中有一些辛酸，有一些失败，也有一些豁然开朗的瞬间，总之，科研这条路，谁走谁清楚。&lt;/p&gt;
&lt;p&gt;不过深刻的感觉是，研究生阶段与本科生阶段有着很大的不同，本科生着重于学习基础知识，着重在于输入，磨练基本功，而研究生着重在于自己对知识的运用，探索，融会贯通，同时对一个问题有着深入地理解，并作出自己的贡献。所以说，成绩这个事情，很容易让成绩好的人觉得自己科研也好，但其实并不是，如果一个学习者不能顺利地将心态，状态转变为输出者，创造者的心态，那么仍然很难做出很棒的工作。&lt;/p&gt;
&lt;h2 id=&quot;关于读书&quot;&gt;&lt;a href=&quot;#关于读书&quot; class=&quot;headerlink&quot; title=&quot;关于读书&quot;&gt;&lt;/a&gt;关于读书&lt;/h2&gt;&lt;p&gt;读书的话，见&lt;a href=&quot;https://github.com/whatbeg/ReadingList&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;2017 Reading List&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;今年看的书比较少，读完的不到10本，还有许多技术书籍，没有涉及到的部分就没再看了。&lt;/p&gt;
&lt;p&gt;哲学方面，《道德经》看了一遍，但是没留下什么影响，老子的思想没能够打动我，可能是我level还不够？或者心态不同罢，这个以后再看试试。&lt;/p&gt;
&lt;p&gt;科学方面，《科学研究的艺术》，《暗时间》都是两本比较好的书，两者我都写了读书笔记：&lt;a href=&quot;http://whatbeg.com/2017/06/07/artofresearch.html&quot;&gt;读《科学研究的艺术》&lt;/a&gt;，&lt;a href=&quot;http://whatbeg.com/2017/02/20/darktime.html&quot;&gt;《暗时间》读书笔记&lt;/a&gt;，有兴趣可以看看。反正我又看了两遍，感觉常看常新。&lt;/p&gt;
&lt;p&gt;技术方面，下半年看得比较多，因为需要用Scala和Spark，所以系统地学习了下Scala，以及Java。&lt;/p&gt;
&lt;p&gt;看了下《Head First Java》，比较通俗易懂，还记得当年本科刚学Java时嫌她比C++麻烦太多，一直不待见她，现在重新看来，Java中富含的思想也很丰富，而且觉得这门语言根本没有C++麻烦，反而有些习惯了想Java，Scala这样的JVM语言，虽然他们的一切皆对象思想以及并不多么高效的垃圾回收确实让我对她们在大规模数据处理上面的信心不足。&lt;/p&gt;
&lt;p&gt;不过纵观编程语言来看，Java和C++这几年都没有什么太大的变化，都是在之前的基础上小修小改，可能也到一个瓶颈期了，用户群趋于固定。现在火热的都是跟着人工智能(AI)火起来的Python，数据分析语言R，以及Google大力主推的Go语言，以及移动开发新锐Kotlin等语言（没错，我不是PHP程序员:D）。&lt;/p&gt;
&lt;p&gt;所以说，其实每种编程语言都有自己的一些独特的特点，没有适合所有场景的编程语言，所以这会使得，语言随着其适合的问题的趋势而波动，试看当年火爆的Objective-C现在境况就知道现实是多么残酷…&lt;/p&gt;
&lt;p&gt;文学方面，看了《围城》和《王小波文集》，由于去年听了苗怀明老师的红楼梦课，买了《红楼梦》来读，这次读到了第十九回，然后就因为没时间搁置了，其实以前也有看过，不过总是在数回之后就做罢，这次已经是创新高了。王小波文集中包含了以前没看过的许多文章，读来依旧是那么的过瘾。&lt;/p&gt;
&lt;p&gt;今年历史读的是业余书籍中偏多的了，蒋廷黻先生的《中国近代史》很脍炙人口，以前那点近代史知识大部分是从中学历史书上得来的，而中学历史书大家都知道，学过以后只记得几几年签了哪个什么条约，条约细则是什么，赔了多少万两白银，被割占了哪哪哪，虽然这些也很重要，但是去死记硬背这些东西并不会带来什么进益。我觉得学历史最是不能死记硬背，历史的花样太多了，是背不完的，更重要的是要吸取历史中的教训，参悟历史中的规律，形成一种唯物史观。你背的条约细则今天还能记得多少呢？相比具体的细则，这些条约细则背后有着什么样一些考虑才更值得探讨。这是我今年读历史书籍得到的最大的一个收获。&lt;/p&gt;
&lt;p&gt;除了《中国近代史》，《全球通史》也读了一些，虽然上册还没看完（囧）。发现其实世界历史上也有很多有意思的事情，丝毫不逊于中国二十四朝的历史，以后可以再看看。&lt;/p&gt;
&lt;p&gt;读书方面大概就这么多。明年的读书计划的话，希望有时间的时候把新买的那些小说看看，比如《万历十五年》，《巨人的陨落》，《禅与摩托车维修技术》，《西游记》等等。由于要找工作，技术书自然也不能少。尽力而为吧。&lt;/p&gt;
&lt;h2 id=&quot;关于处事&quot;&gt;&lt;a href=&quot;#关于处事&quot; class=&quot;headerlink&quot; title=&quot;关于处事&quot;&gt;&lt;/a&gt;关于处事&lt;/h2&gt;&lt;p&gt;处事方面，最大的一个感触就是，我们真的“长大”了，角色在变，思维也在变，行为也需要做出改变，责任慢慢在变重，毕竟，最后一批90后也将迎来他们的18岁，我们“老”了，把青春年华交给00后，10后，逐渐要接过80后，70后的担子。我们这一代的年轻人，并不比80后要好过，以致最近流行一些丧系流行语，比如“佛系”，“油腻”等等，但是历史总是惊人的相似，多数时代的年轻人都没那么过，但是境况也没有想得那么坏，关键还是在自己有没有破局的能力和一些运气。&lt;/p&gt;
&lt;p&gt;可有时候，自己还是会遵循多年的行为习惯，习惯于接受给予，习惯于索取，可能为了维持这些给予，在生活中又会不自觉的注意维护自己的形象，建立自己的高地，这样做的过程中可能会伤害到他人。&lt;/p&gt;
&lt;p&gt;讲的比较抽象，总的来说就是，我们不再能够一直做接受给予的小孩子了，我们羽翼渐丰，我们需要更多的往外输出我们的贡献，我们的关怀，我们的话语等等。这是我们的独立带来的副产品。&lt;/p&gt;
&lt;h2 id=&quot;关于2017的计划&quot;&gt;&lt;a href=&quot;#关于2017的计划&quot; class=&quot;headerlink&quot; title=&quot;关于2017的计划&quot;&gt;&lt;/a&gt;关于2017的计划&lt;/h2&gt;&lt;p&gt;去年的总结里，列了这样一些计划&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;把论文发掉&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;好吧，这个没有做到&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;定期运动，注意健康饮食&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;注意了运动，但是并不定期，每周会抽出时间跑跑步打打羽毛球。饮食上的一个巨大变化就是开始注重蔬菜水果的摄入了，饮食上整体都清淡了许多，当然很大程度上要归功于cycy小姐，带我吃各种水果，现在每顿饭不打个蔬菜都觉得有点不得劲，饮食不像以前，自己想吃什么就吃什么，最终导致什么口味重吃什么，幸好改正还来得及。这些生活习惯改变后，最大的得益就是痘少了，有这个都够了:D…&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;简约生活&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;尽量做了，但是有些事情还是不好判断是否符合简约的标准。总之，以后，买东西前问自己三问：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;是否喜欢？&lt;/li&gt;
&lt;li&gt;是否需要？&lt;/li&gt;
&lt;li&gt;是否合适？&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Continue Feeling, Thinking, Reading and Writing&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;continue…&lt;/p&gt;
&lt;h2 id=&quot;关于未来&quot;&gt;&lt;a href=&quot;#关于未来&quot; class=&quot;headerlink&quot; title=&quot;关于未来&quot;&gt;&lt;/a&gt;关于未来&lt;/h2&gt;&lt;p&gt;即将到来的2018年，又将是一个巨大变化发生的一年，未来的事情注意波谲云诡，但又有一定规律可寻，着重讲一点对未来IT界的看法吧。&lt;/p&gt;
&lt;p&gt;2016年深度学习呈现爆发增长，2017年这个词稍微冷了一点，AI这个词热起来了，明年不知道哪个词又会热起来。但是AI技术应该会进一步的进入人们的生活，智慧城市，无人驾驶，人工智能像互联网那样可以“+”很多东西，强化学习应该会更加火热，量子计算也让人拭目以待，有一些人的工作确实将会被取代。&lt;/p&gt;
&lt;p&gt;在大数据分析上，众所周知，当年大数据的火热在于数据体量(Volume)的巨大增长，而如今大数据已是很多公司的默认配置了，大数据分析在如今又呈现了一些微妙的变化，比如，数据来源(Variety)，复杂性(Complexity)的增长，由于数据采集的广泛应用，我们拥有各类数据类型和来源，而这些异源数据的协同处理是一个难题，时间上，视频数据的处理时间和普通数据库数据的处理时间是不一样的，再一个就是，处理各种数据的模型也不一样，这些体现了我们数据的“广度”在增加，可能以后“广度学习”这个词也会火起来。&lt;/p&gt;
&lt;p&gt;再一个就是AI技术往移动端做的趋势也会增加，毕竟，真正做到移动端才能使AI技术产生更加深远，广泛的影响，才能从身边影响我们的生活。当然这也对算力和模型的简化度有一些要求。在2018年，我们的各种设备将逐渐继承AI技术。&lt;/p&gt;
&lt;p&gt;从自己来看，被大师兄的一番安利，未来决定往偏系统的方向走了，主要精力会放在分布式机器学习这块了。希望能在这方面做出一些成绩，至于以后工作找在哪方面那又是后话。&lt;/p&gt;
&lt;h2 id=&quot;关于其它&quot;&gt;&lt;a href=&quot;#关于其它&quot; class=&quot;headerlink&quot; title=&quot;关于其它&quot;&gt;&lt;/a&gt;关于其它&lt;/h2&gt;&lt;p&gt;今年写了20多篇文章，产量有所下降，且有很多是一些零碎的错误处理，实践经验等等，主要原因自然是时间不够，其次是觉得不是什么都值得写了，得对读者负责任，所以会更加审慎。并且很多东西是技能型的，比较零散，不好整理成文。&lt;/p&gt;
&lt;p&gt;今年3月开的一个坑：&lt;a href=&quot;http://whatbeg.com/2017/02/27/deeplearning0.html&quot;&gt;Deep Learning读书笔记系列写作计划&lt;/a&gt;，当初计划1年写完，2018年三月写完，看来也是无法做到了，有一些准备出的文章，要点写在了本子上，也没有时间或者记性去把它总结成文，评论区说要跳票了，看来确实是。当初立一年的时限，也是为了给自己充足的时间，但是没有料到，后面的工作重心会有所转移，导致停顿了Deep Learning book的阅读。&lt;/p&gt;
&lt;h2 id=&quot;关于2018的计划&quot;&gt;&lt;a href=&quot;#关于2018的计划&quot; class=&quot;headerlink&quot; title=&quot;关于2018的计划&quot;&gt;&lt;/a&gt;关于2018的计划&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;阅读20本书&lt;br&gt;做出两篇论文&lt;br&gt;拿到心仪offer&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;2018年，还是继续深耕，积累吧，在这个过程中，有好的，新的感悟也会及时跟大家分享。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;引子&quot;&gt;&lt;a href=&quot;#引子&quot; class=&quot;headerlink&quot; title=&quot;引子&quot;&gt;&lt;/a&gt;引子&lt;/h2&gt;&lt;p&gt;又到了年关，该写点什么了。&lt;/p&gt;
&lt;p&gt;说快也快，2017眨个眼的工夫就过去了，写了好几年总结，今年却有点不知怎么下笔，随意写点好了。&lt;/
    
    </summary>
    
      <category term="成长之路 | Biography" scheme="http://whatbeg.com/categories/%E6%88%90%E9%95%BF%E4%B9%8B%E8%B7%AF-Biography/"/>
    
    
      <category term="Summary" scheme="http://whatbeg.com/tags/Summary/"/>
    
  </entry>
  
  <entry>
    <title>一次MAVEN事故</title>
    <link href="http://whatbeg.com/2017/12/24/mavenaccident.html"/>
    <id>http://whatbeg.com/2017/12/24/mavenaccident.html</id>
    <published>2017-12-24T07:49:59.000Z</published>
    <updated>2017-12-24T07:52:46.239Z</updated>
    
    <content type="html">&lt;p&gt;改动mllib中的&lt;code&gt;org.apache.spark.ml.tree.impl.DTStatsAggregator&lt;/code&gt;源码，加了一个原来没有的&lt;code&gt;allStats(): Array[Double] = ..&lt;/code&gt;的方法，然后打成MLlib包，替换maven库中的mllib包。&lt;/p&gt;
&lt;p&gt;报&lt;code&gt;IllegalAccessError&lt;/code&gt;：&lt;br&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Caused by: java&lt;span class=&quot;selector-class&quot;&gt;.lang&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.IllegalAccessError&lt;/span&gt;: tried to access method org&lt;span class=&quot;selector-class&quot;&gt;.apache&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.spark&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.ml&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.tree&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.impl&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.DTStatsAggregator&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.allStats&lt;/span&gt;()[D from class org&lt;span class=&quot;selector-class&quot;&gt;.apache&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.spark&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.ml&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.tree&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.impl&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.RandomForestImpl&lt;/span&gt;$&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight markdown&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private[ml] val allStatSize&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;val allStats = new Array[&lt;span class=&quot;string&quot;&gt;Double&lt;/span&gt;](&lt;span class=&quot;link&quot;&gt;allStatSize&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;应该要能访问到&lt;/p&gt;
&lt;p&gt;是不是用的不是我的jar，或者用的不是我的jar中的class？&lt;/p&gt;
&lt;p&gt;运行jar包时设置&lt;br&gt;&lt;figure class=&quot;highlight vim&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;--&lt;span class=&quot;keyword&quot;&gt;conf&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;&quot;spark.driver.extraJavaOptions=-XX:+TraceClassLoading -XX:+TraceClassUnloading&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;监测类的加载情况，果然发现有一条&lt;br&gt;&lt;figure class=&quot;highlight gradle&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[Loaded xxx &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;file&lt;/span&gt;:&lt;span class=&quot;regexp&quot;&gt;/home/&lt;/span&gt;huqiu&lt;span class=&quot;regexp&quot;&gt;/programs/&lt;/span&gt;spark&lt;span class=&quot;regexp&quot;&gt;/jars/&lt;/span&gt;spark-mllib_2.&lt;span class=&quot;number&quot;&gt;11&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;2.1&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;.jar&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这说明程序不从我打好的jar包中加载class，而从spark安装目录中的jars目录中读取了。&lt;/p&gt;
&lt;p&gt;为什么从spark本地读而不从打好的jar包中读？&lt;/p&gt;
&lt;p&gt;为了先解决问题，我把mllib包复制到SPARK_HOME的jars目录中，这下总能读到我的jar了吧。&lt;/p&gt;
&lt;p&gt;但是又出现一个问题：&lt;br&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;java&lt;span class=&quot;selector-class&quot;&gt;.lang&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.NoClassDefFoundError&lt;/span&gt;: Could not initialize class org&lt;span class=&quot;selector-class&quot;&gt;.apache&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.spark&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.ml&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.core&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.JNAScala&lt;/span&gt;$&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Caused by: java&lt;span class=&quot;selector-class&quot;&gt;.lang&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.ClassNotFoundException&lt;/span&gt;: com&lt;span class=&quot;selector-class&quot;&gt;.sun&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.jna&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.Native&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;原来是没找到jna的Native class，一看，确实没有打入mllib包中，那是什么原因呢？难道是谁把它exclude掉了？&lt;br&gt;重新编译一下，发现这么一条：&lt;br&gt;&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-attr&quot;&gt;[INFO]&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;Excluding&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;net&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.java&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.dev&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.jna&lt;/span&gt;&lt;span class=&quot;selector-pseudo&quot;&gt;:jna&lt;/span&gt;&lt;span class=&quot;selector-pseudo&quot;&gt;:jar&lt;/span&gt;&lt;span class=&quot;selector-pseudo&quot;&gt;:4.2.2&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;shared&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;jar&lt;/span&gt;.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;说白了就是排除了net.java.dev.jna:jna:jar，所以写的代码中用到Native的都会找不到类。&lt;br&gt;后来发现是spark-parent排除的，且删掉spark-parent的exclude的语句也没用，根本原因在于mllib的打包方式不会把其依赖打入mllib的jar包中。&lt;/p&gt;
&lt;p&gt;解决的方法就是将此依赖打入mllib中，但是这样就会变成mllib-jar-with-dependencies，肯定不是我们想要的结果。&lt;/p&gt;
&lt;p&gt;这就涉及到了代码设计的层面了，一般情况下，不建议直接修改Mllib源码，更不要说在Mllib源码中还加入外部包了，这样太紧耦合了，比较建议的方法是自己建立一个project，建立于spark mllib同样的包路径即可，然后修改需要修改的文件，但缺点是改动文件需要改名字，不然系统会读取底层Mllib的同名文件而不会读取你项目中的。但是这样确是松耦合的。&lt;br&gt;目前还没有找到好的方法，最小程度上改动代码，增加或删除一些东西。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;改动mllib中的&lt;code&gt;org.apache.spark.ml.tree.impl.DTStatsAggregator&lt;/code&gt;源码，加了一个原来没有的&lt;code&gt;allStats(): Array[Double] = ..&lt;/code&gt;的方法，然后打成MLlib
    
    </summary>
    
      <category term="错误解决与优化 | Err_n_Opt" scheme="http://whatbeg.com/categories/%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3%E4%B8%8E%E4%BC%98%E5%8C%96-Err-n-Opt/"/>
    
    
      <category term="Spark" scheme="http://whatbeg.com/tags/Spark/"/>
    
      <category term="错误解决" scheme="http://whatbeg.com/tags/%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3/"/>
    
  </entry>
  
  <entry>
    <title>IDE各种操作和玩法备忘</title>
    <link href="http://whatbeg.com/2017/12/24/ideplay.html"/>
    <id>http://whatbeg.com/2017/12/24/ideplay.html</id>
    <published>2017-12-24T07:39:59.000Z</published>
    <updated>2017-12-24T07:43:55.091Z</updated>
    
    <content type="html">&lt;h5 id=&quot;Codeblocks-批量注释&quot;&gt;&lt;a href=&quot;#Codeblocks-批量注释&quot; class=&quot;headerlink&quot; title=&quot;Codeblocks 批量注释&quot;&gt;&lt;/a&gt;Codeblocks 批量注释&lt;/h5&gt;&lt;figure class=&quot;highlight mipsasm&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Ctl + &lt;span class=&quot;keyword&quot;&gt;Shift &lt;/span&gt;+ C  &lt;span class=&quot;comment&quot;&gt;# 批量注释&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctl + &lt;span class=&quot;keyword&quot;&gt;Shift &lt;/span&gt;+ X  &lt;span class=&quot;comment&quot;&gt;# 批量取消&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;IDEA-Intellij-快捷键&quot;&gt;&lt;a href=&quot;#IDEA-Intellij-快捷键&quot; class=&quot;headerlink&quot; title=&quot;IDEA Intellij 快捷键&quot;&gt;&lt;/a&gt;IDEA Intellij 快捷键&lt;/h5&gt;&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/bluestorm/archive/2013/05/20/3087889.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;IDEA快捷键&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h5 id=&quot;Codeblocks-批量注释&quot;&gt;&lt;a href=&quot;#Codeblocks-批量注释&quot; class=&quot;headerlink&quot; title=&quot;Codeblocks 批量注释&quot;&gt;&lt;/a&gt;Codeblocks 批量注释&lt;/h5&gt;&lt;figure class=&quot;highli
    
    </summary>
    
      <category term="计算机相关 | CS.Related" scheme="http://whatbeg.com/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9B%B8%E5%85%B3-CS-Related/"/>
    
    
      <category term="CS" scheme="http://whatbeg.com/tags/CS/"/>
    
  </entry>
  
  <entry>
    <title>Revisiting Java</title>
    <link href="http://whatbeg.com/2017/10/23/revisitingjava.html"/>
    <id>http://whatbeg.com/2017/10/23/revisitingjava.html</id>
    <published>2017-10-23T15:33:48.000Z</published>
    <updated>2017-10-23T15:38:18.567Z</updated>
    
    <content type="html">&lt;p&gt;最近在看一些工程代码，于是看了看设计模式，看设计模式之前发现Java是先修知识，又重新补了一遍Java，温故知新，获得一些新的体会。&lt;br&gt;本文不打算作为“Java知识点详细梳理”，“10分钟学会Java”之类的文章，仅作为博主自己的一个回顾，涉及的内容也无定法。&lt;/p&gt;
&lt;p&gt;Java应该是目前用的最多的编程语言，以前觉得Java老要点点点（调用方法），变量名也很长，C++/Python很少代码写完的东西Java可能要写很多行……&lt;br&gt;觉得挺麻烦的，不过Java风靡自有其风靡的理由，在面向对象语言中她是一个标杆，虽然繁琐，但比较清晰，比较简单。&lt;/p&gt;
&lt;p&gt;拿变量类型来说，Java只有两种变量类型，primitive主数据类型和引用数据类型。&lt;/p&gt;
&lt;p&gt;Java中最关键的概念是面向对象，面向对象最关键的东西就是类和对象，所有的Java程序都定义在类中，你不能像python那样，打开.py文件就开始写东西，就可以执行了，也不像C++，定义一个main函数即可运行。在Java中即使main函数也要包括在类中。&lt;/p&gt;
&lt;p&gt;为什么面向对象是核心内容？它的好处在哪呢？可以说，OO(面向对象)无处不在，OO使得我们很方便的扩展功能，而不需要重复写很多代码！另外，OO的设计思想其实是抽象思维的一种体现，它改变了我们设计程序的方式，我们不再是根据程序需要什么功能就开始从头到尾实现什么功能，我们更多考虑的是类和对象，程序包含几种类型的实体？有什么共同点？可以进行怎样的抽象？用继承还是接口？……&lt;/p&gt;
&lt;p&gt;说说类和对象，类是对象的模板，类定义好“像我这样的人应该有什么状态，特征，能够做到那些事”，而对象具体化了类，真正获得了具体的状态，具体的特征，以及做某些事的方法。&lt;/p&gt;
&lt;p&gt;我们说到，Java只有两种变量，primitive主数据类型和引用数据类型。主数据类型包括我们所指的int,double,float等等，这些不是对象。而引用变量是一个到对象的引用，相当于一个遥控器，指向堆上的某个对象，通过此引用可以获得对象，重新赋值此引用并不改变对象，只是引用指到了另一个对象上而已。没有对象变量，只有指向对象的引用变量。&lt;br&gt;==:  比较primitive主数据类型是否相同，或两个引用是否指向同一对象&lt;/p&gt;
&lt;p&gt;话题回到面向对象，提到面向对象，不得不提其三大特性，这也是面试中经常会问到的，即封装，继承和多态。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;封装(encapsulation)，即隐藏对象的属性和实现细节，仅对外公开接口，控制在程序中属性的读和修改的访问级别；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;多态(polymorphism)，一句话，“接口的多种不同的实现方式即为多态”，但是这个不太好理解，甚至我觉得它不够准确，因为光说接口是不是有点不够？换一种说法，多态即允许将子类对象的引用赋值给父类对象的引用，赋值之后，父对象就可以根据当前赋值给它的子对象的特性以不同的方式运作。因为：编译器根据引用类型来判断可以调用哪些方法，而不是根据确实的类型。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;继承(inheritance) 是指一个对象直接使用另一对象的属性和方法，很简单，父类是球，子类是足球，那么足球可以直接使用“滚动”这个方法，如果需要特殊的“滚”，那子类自己实现就好了。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;之所以继承放在最后讲，是因为我们关于继承有更多要说的。&lt;/p&gt;
&lt;p&gt;【继承方法调用时的最近原则】调用对象引用的方法时，会调用到与该对象类型最接近的方法，就是说如果子类实现了某继承的方法，那就调用子类的，如果没有实现，那就往上找最近的实现的类的方法。&lt;/p&gt;
&lt;p&gt;继承的IS-A测试，即“足球”IS-A“球”，总得满足这样的关系才好说继承，就像你不太好意思继承隔壁王叔叔财产。&lt;/p&gt;
&lt;p&gt;继承的意义何在？这是显然的，首先避免了大量重复的程序代码，其次可以定义出一组共同的协议，所有继承者都需要满足这个协议，你知道，在很多时候大家遵守一些共同的规则是很重要的。&lt;/p&gt;
&lt;p&gt;继承的一些使用建议：&lt;br&gt;1） 当某个类会比其父类更具有特定意义时使用继承&lt;br&gt;2）行为程序需要被多个相同基本类型的类共享时，考虑使用继承&lt;br&gt;3）集成并不一定是达成重用行为程序的最佳方式，具体可参见设计模式&lt;br&gt;4）继承结构并不匹配两者的关系，不要用继承&lt;br&gt;5）不能通过IS-A测试一定不要用继承&lt;/p&gt;
&lt;p&gt;如果最高的父类不能抽象出一些对所有族类都使用的方法，或者不太好初始化，比如你不好新建一个“球”对象，它是啥球呢？地球还是足球？这样一些情况我们可以定义抽象类，它不能被初始化，只能被继承。。抽象类中可以定义抽象方法，抽象方法只存在于抽象类中，一个类只要有一个抽象方法，那他必是抽象类。&lt;/p&gt;
&lt;p&gt;有时候，你会想要继承多个父类，以便使用更多的已有代码，但是不幸的是Java并不支持多重继承，要多重继承请关闭本文，搜索”C++”关键词谢谢。&lt;/p&gt;
&lt;p&gt;为啥不支持多重继承呢？因为存在多重继承（继承多个类）的“致命方块”问题，即如果两个父类继承自同一个祖父类，都实现了某个方法，那么子类（如果没有实现该方法）该调用那个版本？&lt;/p&gt;
&lt;p&gt;解决“致命方块”问题？接口！&lt;/p&gt;
&lt;p&gt;接口是100%纯抽象类，每个方法都是抽象的，必须被实现。&lt;/p&gt;
&lt;p&gt;如果想要定义出类可以扮演的角色，使用接口。&lt;/p&gt;
&lt;p&gt;接下来从生物学的角度谈谈对象？什么是生物学角度？？即生老病死~&lt;/p&gt;
&lt;p&gt;对象生存在堆上（可以理解为垃圾堆，随时可能有人来回收…），引用变量或局部变量生存在栈上。&lt;/p&gt;
&lt;p&gt;一旦一个对象，它的引用没有了或者离弃了它，那么他就可以等待被回收了。Java有一套垃圾回收机制(GC)保证对象的回收来腾出堆空间，有时候，GC又常常被人诟病，在大数据应用中常常面临这大量的shuffle，大量的对象，有时候需要花费大量的时间来做GC，体验不佳。&lt;/p&gt;
&lt;p&gt;总的来说，对象的出生靠调用构造函数，生存在堆上，一旦没了引用，就向生命的终点走去，直到GC（黑白无常）带走了它。。&lt;/p&gt;
&lt;p&gt;新建对象时，父类的构造函数先于子类被调用，以此类推，Object的构造函数先被执行，然后往下推，直到目标对象类型&lt;br&gt;（先有父母才有你）&lt;br&gt;只有当完全没写构造函数时，Java才会自动帮你写一个无参构造函数。&lt;br&gt;super()调用父类的构造函数，this是对对象本身的引用&lt;/p&gt;
&lt;p&gt;谈谈实例变量，实例变量即对象的成员变量。&lt;/p&gt;
&lt;p&gt;JAVA的实例变量具有如下特点：&lt;br&gt;1）实例变量声明在一个类中，但在方法、构造方法和语句块之外；&lt;br&gt;2）当一个对象被实例化之后，每个实例变量的值就跟着确定；&lt;br&gt;3）实例变量在对象创建的时候创建，在对象被销毁的时候销毁；&lt;br&gt;4）实例变量的值应该至少被一个方法、构造方法或者语句块引用，使得外部能够通过这些方式获取实例变量信息；&lt;br&gt;5）实例变量可以声明在使用前或者使用后；&lt;br&gt;6）访问修饰符可以修饰实例变量；&lt;br&gt;7）实例变量对于类中的方法、构造方法或者语句块是可见的。一般情况下应该把实例变量设为私有。通过使用访问修饰符可以使实例变量对子类可见；&lt;br&gt;8）实例变量具有默认值。数值型变量的默认值是0，布尔型变量的默认值是false，引用类型变量的默认值是null。变量的值可以在声明时指定，也可以在构造方法中指定；实例变量可以直接通过变量名访问。但在静态方法以及其他类中，就应该使用完全限定名：ObejectReference.VariableName。&lt;/p&gt;
&lt;p&gt;你可能想问，如果Java中只有对象和primitive主数据类型，那么我想定义全局变量或者常量怎么办？比如PI=3.141592653589..(后面忘了)&lt;br&gt;这时候，静态变量可以帮你。静态变量定义在类中，它属于类，不属于任何对象，但对象可以获得它。&lt;br&gt;类的静态变量由（该类的）所有对象所共享。&lt;br&gt;静态方法通过类名调用，静态变量通过类名存取 。&lt;br&gt;如果类只有静态方法，则可以将构造函数标记为private的，以免被初始化&lt;/p&gt;
&lt;p&gt;Java常量 = final static 的变量&lt;br&gt;final意味着不能被改变，static意味着是静态变量。&lt;/p&gt;
&lt;p&gt;插一句字符串的格式化：&lt;br&gt;String.format(格式化说明)&lt;br&gt;格式化说明包括5部分，%和type是必要的&lt;br&gt;%[argument number] [flags] [width] [.precision] type&lt;br&gt;如： %,6.1f 为6位逗号分隔，1位小数的浮点数&lt;/p&gt;
&lt;p&gt;谈谈异常吧，谁能保证自己的程序不出问题呢？与其系统运行的时候报一大堆乱七八糟的错误trace，早早地预见并处理一下，以自己的方式处理或者打印它，总要漂亮些吧？甚至可以在抓到异常后，给出“没关系，一个小错误，已经报告给开发者~”这样温和的语句，是不是显得b格很高？……&lt;br&gt;异常中要注意的点有：&lt;br&gt;可能会抛出异常的方法必须声明成throws Exception&lt;br&gt;catch捕获多个异常时，要从小排到大，因为大异常后面的小异常根本没有被catch的机会&lt;br&gt;在方法后加上throws xxException，没有try/catch块，表示可能会抛出异常，自己并不处理，需要调用方自己处理异常&lt;br&gt;所以&amp;gt;&amp;gt;&amp;gt;要么处理，要么声明（异常）&lt;/p&gt;
&lt;p&gt;序列化对象：有时候需要保存一下对象，以便于恢复，被调用，而不用重新生成，因为生成过程可能很麻烦。&lt;br&gt;要序列化的话，对象必须可序列化，且对象中实例变量所引用的对象甚至对象引用的对象…都必须可以序列化，简而言之，整个对象版图都必须可以序列化&lt;br&gt;如果某实例变量不需要或者不能被序列化，那可以把它标记为transient（瞬时）的。&lt;br&gt;解序列化时，transient变量会恢复成null对象引用或者0,false等primitive默认值&lt;br&gt;静态变量不会被序列化，对象被还原时，静态变量会维持类中原本的样子。因为所有对象共用一份静态变量。&lt;br&gt;读取对象的顺序必须与写入的顺序相同&lt;/p&gt;
&lt;p&gt;序列化对象：&lt;br&gt;&lt;figure class=&quot;highlight cos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;FileOutputStream fileStream = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; FileOutputStream(&lt;span class=&quot;string&quot;&gt;&quot;MySer.ser&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ObjectOutputStream os = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; ObjectOutputStream(fileStream)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;os.writeObject(obj)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;os.&lt;span class=&quot;keyword&quot;&gt;close&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;或者不序列化，而是将信息写入文本文件：&lt;br&gt;&lt;figure class=&quot;highlight gauss&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;BufferedWriter &lt;span class=&quot;built_in&quot;&gt;writer&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; BufferedWriter(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; FileWriter(file))  &lt;span class=&quot;comment&quot;&gt;// file is a File object&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;writer&lt;/span&gt;.write(...)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;可以把File想象成文件的路径，代表磁盘上的某个文件，但并不是文件内容&lt;br&gt;&lt;figure class=&quot;highlight vhdl&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;BufferedWriter writer = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; BufferedWriter(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; FileWriter(&lt;span class=&quot;keyword&quot;&gt;file&lt;/span&gt;))  // &lt;span class=&quot;keyword&quot;&gt;file&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; a &lt;span class=&quot;keyword&quot;&gt;File&lt;/span&gt; object&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这句代码形成如下链接：&lt;br&gt;&lt;figure class=&quot;highlight xl&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;字符串 --&amp;gt; B&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;ufferedWriter&lt;/span&gt; --&amp;gt;&lt;/span&gt; F&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;ileWriter&lt;/span&gt; --&amp;gt;&lt;/span&gt; File&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;对象序列化以后，类继续演进，这时会出现无法还原的情况。通过将serialVersionUID放在class中，让类在演化过程中维持同样的ID，可以保证还原的时候能够识别，从而正确还原出对象。但要注意有些修改会损害解序列化。&lt;/p&gt;
&lt;p&gt;好吧，先说到这，其实还有一些内容，网络，集合与泛型，以及许多高级特性，反射，虚拟机的深入理解等等，后面再说吧。&lt;/p&gt;
&lt;p&gt;Reference&lt;br&gt;*《Head First Java》&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;最近在看一些工程代码，于是看了看设计模式，看设计模式之前发现Java是先修知识，又重新补了一遍Java，温故知新，获得一些新的体会。&lt;br&gt;本文不打算作为“Java知识点详细梳理”，“10分钟学会Java”之类的文章，仅作为博主自己的一个回顾，涉及的内容也无定法。&lt;/p&gt;

    
    </summary>
    
      <category term="编程语言 | Program Lang." scheme="http://whatbeg.com/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80-Program-Lang/"/>
    
    
      <category term="Java" scheme="http://whatbeg.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop一些问题集锦【持续更新】</title>
    <link href="http://whatbeg.com/2017/10/23/hadooperror.html"/>
    <id>http://whatbeg.com/2017/10/23/hadooperror.html</id>
    <published>2017-10-23T02:47:34.000Z</published>
    <updated>2018-02-09T13:56:37.379Z</updated>
    
    <content type="html">&lt;p&gt;本文记录Hadoop，HDFS，YARN，HBase，Hive等Hadoop社区的系统使用中的一些问题及解决方案，&lt;br&gt;包括Hadoop集群构建及使用中的一些问题以及解决方案，&lt;br&gt;包括各种莫名其妙的安装问题，&lt;br&gt;配置问题，&lt;br&gt;运行问题，&lt;br&gt;运行中问题，&lt;br&gt;等等等等，&lt;br&gt;积累以备后查，&lt;br&gt;也方便后来者参考之。&lt;br&gt;如对大家有所帮助，&lt;br&gt;对笔者也是一份欣慰。&lt;/p&gt;
&lt;h2 id=&quot;错误集锦&quot;&gt;&lt;a href=&quot;#错误集锦&quot; class=&quot;headerlink&quot; title=&quot;错误集锦&quot;&gt;&lt;/a&gt;错误集锦&lt;/h2&gt;&lt;h3 id=&quot;HDFS：DataNode不在线，使得出现Namenode-in-safe-mode错误&quot;&gt;&lt;a href=&quot;#HDFS：DataNode不在线，使得出现Namenode-in-safe-mode错误&quot; class=&quot;headerlink&quot; title=&quot;HDFS：DataNode不在线，使得出现Namenode in safe mode错误&quot;&gt;&lt;/a&gt;HDFS：DataNode不在线，使得出现Namenode in safe mode错误&lt;/h3&gt;&lt;p&gt;打开Hadoop webUI可以看到类似情况：&lt;br&gt;&lt;figure class=&quot;highlight vbnet&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Security &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;off&lt;/span&gt;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Safe mode &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;ON&lt;/span&gt;. The reported blocks &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; needs additional &lt;span class=&quot;number&quot;&gt;178895&lt;/span&gt; blocks &lt;span class=&quot;keyword&quot;&gt;to&lt;/span&gt; reach the threshold &lt;span class=&quot;number&quot;&gt;0.9990&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;of&lt;/span&gt; total blocks &lt;span class=&quot;number&quot;&gt;179074.&lt;/span&gt; The number &lt;span class=&quot;keyword&quot;&gt;of&lt;/span&gt; live datanodes &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; has reached the minimum number &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt; Safe mode will be turned &lt;span class=&quot;keyword&quot;&gt;off&lt;/span&gt; automatically once the thresholds have been reached.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;184051&lt;/span&gt; files &lt;span class=&quot;keyword&quot;&gt;and&lt;/span&gt; directories, &lt;span class=&quot;number&quot;&gt;179074&lt;/span&gt; blocks = &lt;span class=&quot;number&quot;&gt;363125&lt;/span&gt; total filesystem &lt;span class=&quot;built_in&quot;&gt;object&lt;/span&gt;(s).&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Heap Memory used &lt;span class=&quot;number&quot;&gt;297.78&lt;/span&gt; MB &lt;span class=&quot;keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1.28&lt;/span&gt; GB Heap Memory. Max Heap Memory &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1.78&lt;/span&gt; GB.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Non Heap Memory used &lt;span class=&quot;number&quot;&gt;31.27&lt;/span&gt; MB &lt;span class=&quot;keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;31.81&lt;/span&gt; MB Commited Non Heap Memory. Max Non Heap Memory &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;130&lt;/span&gt; MB.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;【原因分析】&lt;br&gt;查看datanode日志出现:&lt;br&gt;&lt;figure class=&quot;highlight dns&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017-10-23&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;09&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;15:33,336&lt;/span&gt; INFO org.apache.hadoop.ipc.Client: Retrying connect to server: master&lt;span class=&quot;number&quot;&gt;01/115.212.0&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;91&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;9000&lt;/span&gt;. Already tried &lt;span class=&quot;number&quot;&gt;9&lt;/span&gt; time(s)&lt;span class=&quot;comment&quot;&gt;; retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017-10-23&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;09&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;15:33,337&lt;/span&gt; WARN org.apache.hadoop.hdfs.server.datanode.DataNode: Problem connecting to server: master&lt;span class=&quot;number&quot;&gt;01/115.212.0&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;91&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;9000&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;类似错误&lt;/p&gt;
&lt;p&gt;于是使用：&lt;code&gt;netstat -an | grep 9000&lt;/code&gt;查看端口&lt;/p&gt;
&lt;figure class=&quot;highlight accesslog&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;[root@master01 etc]&lt;/span&gt;# netstat -an | grep &lt;span class=&quot;number&quot;&gt;9000&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp        &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;      &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;127.0.0.1:9000&lt;/span&gt;              &lt;span class=&quot;number&quot;&gt;0.0.0.0&lt;/span&gt;:*                   LISTEN&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp        &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;      &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;127.0.0.1:55294&lt;/span&gt;             &lt;span class=&quot;number&quot;&gt;127.0.0.1:9000&lt;/span&gt;              TIME_WAIT&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这表明，只有&lt;code&gt;127.0.0.1&lt;/code&gt;上的&lt;code&gt;9000&lt;/code&gt;端口启动了，故只有本机才能访问&lt;code&gt;127.0.0.1:9000&lt;/code&gt;了，故datanode无法联通namenode。&lt;/p&gt;
&lt;p&gt;查看&lt;code&gt;/etc/hosts&lt;/code&gt;文件，如下：&lt;br&gt;&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;127&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;   &lt;span class=&quot;selector-tag&quot;&gt;master01&lt;/span&gt;      &lt;span class=&quot;selector-tag&quot;&gt;localhost&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.localdomain&lt;/span&gt;   &lt;span class=&quot;selector-tag&quot;&gt;localhost&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-pseudo&quot;&gt;::1&lt;/span&gt;         &lt;span class=&quot;selector-tag&quot;&gt;master01&lt;/span&gt;      &lt;span class=&quot;selector-tag&quot;&gt;localhost6&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.localdomain6&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;localhost6&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;span class=&quot;selector-class&quot;&gt;.212&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.91&lt;/span&gt;  &lt;span class=&quot;selector-tag&quot;&gt;master01&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;由hosts文件可以看到，&lt;code&gt;master01&lt;/code&gt;在赋值为&lt;code&gt;114.212.190.91&lt;/code&gt;之前被赋值到了&lt;code&gt;127.0.0.1&lt;/code&gt;，以及IPv6的&lt;code&gt;::1&lt;/code&gt;上。&lt;/p&gt;
&lt;p&gt;【解决方案】把前两行的master01删去，得到：&lt;br&gt;&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;127&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;        &lt;span class=&quot;selector-tag&quot;&gt;localhost&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.localdomain&lt;/span&gt;   &lt;span class=&quot;selector-tag&quot;&gt;localhost&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-pseudo&quot;&gt;::1&lt;/span&gt;              &lt;span class=&quot;selector-tag&quot;&gt;localhost6&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.localdomain6&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;localhost6&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;span class=&quot;selector-class&quot;&gt;.212&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.91&lt;/span&gt;  &lt;span class=&quot;selector-tag&quot;&gt;master01&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这样启动的就会是&lt;code&gt;115.212.0.91:9000&lt;/code&gt;，datanode也可以连到namenode了。&lt;/p&gt;
&lt;p&gt;最后查看端口监听情况：&lt;br&gt;&lt;figure class=&quot;highlight accesslog&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;[hadoop@master01 sbin]&lt;/span&gt;$ netstat -an | grep &lt;span class=&quot;number&quot;&gt;9000&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp        &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;      &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;115.212.0.91:9000&lt;/span&gt;         &lt;span class=&quot;number&quot;&gt;0.0.0.0&lt;/span&gt;:*                   LISTEN&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp        &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;      &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;115.212.0.91:9000&lt;/span&gt;         &lt;span class=&quot;number&quot;&gt;115.212.0.91:56574&lt;/span&gt;        ESTABLISHED&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp        &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;      &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;115.212.0.91:9000&lt;/span&gt;         &lt;span class=&quot;number&quot;&gt;192.168.1.18:35381&lt;/span&gt;          ESTABLISHED&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp        &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;      &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;115.212.0.91:9000&lt;/span&gt;         &lt;span class=&quot;number&quot;&gt;192.168.1.15:60196&lt;/span&gt;          ESTABLISHED&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp        &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;      &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;115.212.0.91:56573&lt;/span&gt;        &lt;span class=&quot;number&quot;&gt;115.212.0.91:9000&lt;/span&gt;         TIME_WAIT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp        &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;      &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;115.212.0.91:9000&lt;/span&gt;         &lt;span class=&quot;number&quot;&gt;192.168.1.6:42243&lt;/span&gt;           ESTABLISHED&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;........&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;成功。&lt;/p&gt;
&lt;h3 id=&quot;集群时间不同步问题&quot;&gt;&lt;a href=&quot;#集群时间不同步问题&quot; class=&quot;headerlink&quot; title=&quot;集群时间不同步问题&quot;&gt;&lt;/a&gt;集群时间不同步问题&lt;/h3&gt;&lt;p&gt;集群运行example程序出现时间不一致的问题。&lt;br&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;17/10/23 10:50:24 INFO mapreduce.Job: Task Id : attempt_1508726229114_0001_m_000000_1, Status                  : FAILED&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Container launch failed for container_1508726229114_0001_01_000007 : org.apache.hadoop.yarn.ex                 ceptions.YarnException: Unauthorized request to &lt;span class=&quot;keyword&quot;&gt;start&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;container&lt;/span&gt;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;This token &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; expired. &lt;span class=&quot;keyword&quot;&gt;current&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;time&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1508729210138&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;found&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1508728023578&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Note: &lt;span class=&quot;keyword&quot;&gt;System&lt;/span&gt; times &lt;span class=&quot;keyword&quot;&gt;on&lt;/span&gt; machines may be &lt;span class=&quot;keyword&quot;&gt;out&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;sync&lt;/span&gt;. &lt;span class=&quot;keyword&quot;&gt;Check&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;system&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;time&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;time&lt;/span&gt; zones.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;【解决方案1】手动同步时间，在每台机器上&lt;code&gt;date -s ...&lt;/code&gt;设置同样的时间&lt;/p&gt;
&lt;p&gt;【解决方案2】使用NTP时间服务器来同步时间（也需要所有机器上运行一次，但是后面可以一直按时同步）&lt;/p&gt;
&lt;p&gt;默认master和slaves都安装好了ntpd服务(centOS好像默认有)，可以通过如下命令查看：&lt;br&gt;&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-attr&quot;&gt;[root@node1 ~]&lt;/span&gt;# &lt;span class=&quot;selector-tag&quot;&gt;rpm&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;-q&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;ntp&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;ntp-4&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.4p8-2&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.el6&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.x86_64&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;每个节点都需要配置NTP服务为自启动&lt;br&gt;&lt;figure class=&quot;highlight coffeescript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[root@master ~]&lt;span class=&quot;comment&quot;&gt;# chkconfig ntpd on&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master ~]&lt;span class=&quot;comment&quot;&gt;# chkconfig --list ntpd&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ntpd           &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;:&lt;span class=&quot;literal&quot;&gt;off&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;literal&quot;&gt;off&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;:&lt;span class=&quot;literal&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;:&lt;span class=&quot;literal&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;:&lt;span class=&quot;literal&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;:&lt;span class=&quot;literal&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;:&lt;span class=&quot;literal&quot;&gt;off&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后在master上修改配置文件：&lt;br&gt;&lt;figure class=&quot;highlight crmsh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[root@&lt;span class=&quot;keyword&quot;&gt;master&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;~]# vim&lt;/span&gt; /etc/ntp.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;如下编辑，（如下是conf文件部分信息）&lt;br&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;restrict 127.0.0.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;restrict -6 ::1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Hosts on local network are less restricted.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &lt;span class=&quot;keyword&quot;&gt;Use&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; servers &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; the pool.ntp.org &lt;span class=&quot;keyword&quot;&gt;project&lt;/span&gt;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Please &lt;span class=&quot;keyword&quot;&gt;consider&lt;/span&gt; joining the pool (&lt;span class=&quot;keyword&quot;&gt;http&lt;/span&gt;://www.pool.ntp.org/&lt;span class=&quot;keyword&quot;&gt;join&lt;/span&gt;.html).&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &lt;span class=&quot;keyword&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;114.212&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.190&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.91&lt;/span&gt; prefer&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &lt;span class=&quot;keyword&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;rhel.pool.ntp.org&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &lt;span class=&quot;keyword&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;rhel.pool.ntp.org&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &lt;span class=&quot;keyword&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2.&lt;/span&gt;rhel.pool.ntp.org&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;210.72&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.145&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.44&lt;/span&gt; perfer&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;202.112&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.10&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.36&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;59.124&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.196&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.83&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;192.168&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.1&lt;/span&gt;   # 局域网NTP服务器的IP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#broadcast &lt;span class=&quot;number&quot;&gt;192.168&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.255&lt;/span&gt; autokey        # broadcast &lt;span class=&quot;keyword&quot;&gt;server&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#broadcastclient                        # broadcast &lt;span class=&quot;keyword&quot;&gt;client&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#broadcast &lt;span class=&quot;number&quot;&gt;224.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.1&lt;/span&gt; autokey            # multicast &lt;span class=&quot;keyword&quot;&gt;server&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#multicastclient &lt;span class=&quot;number&quot;&gt;224.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.1&lt;/span&gt;              # multicast &lt;span class=&quot;keyword&quot;&gt;client&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#manycastserver &lt;span class=&quot;number&quot;&gt;239.255&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.254&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.254&lt;/span&gt;         # manycast &lt;span class=&quot;keyword&quot;&gt;server&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#manycastclient &lt;span class=&quot;number&quot;&gt;239.255&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.254&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.254&lt;/span&gt; autokey # manycast &lt;span class=&quot;keyword&quot;&gt;client&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Undisciplined &lt;span class=&quot;keyword&quot;&gt;Local&lt;/span&gt; Clock. This &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; a fake driver intended &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;backup&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &lt;span class=&quot;keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;when&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;no&lt;/span&gt; outside &lt;span class=&quot;keyword&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;of&lt;/span&gt; synchronized &lt;span class=&quot;keyword&quot;&gt;time&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; available.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;server&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;127.127&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;     # &lt;span class=&quot;keyword&quot;&gt;local&lt;/span&gt; clock&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fudge   &lt;span class=&quot;number&quot;&gt;127.127&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt; stratum &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;主要的修改有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;添加了&lt;code&gt;restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap&lt;/code&gt;表示192.168.1.1-192.168.1.255的IP地址都可以访问本NTP服务器。&lt;/li&gt;
&lt;li&gt;添加了&lt;code&gt;server 210.72.145.44 perfer&lt;/code&gt;开始的4行，尤其最后一个局域网NTP服务器的IP很重要，后面从节点的时间都要与此IP（master）来同步，相当于一个权威时间服务器。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;遇到的一些问题：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;slave上运行&lt;code&gt;ntpdate &amp;lt;masterIP&amp;gt;&lt;/code&gt;出现&lt;code&gt;bind() fails: Permission denied&lt;/code&gt;【解决方案】没有权限，用root做&lt;/li&gt;
&lt;li&gt;slave上运行&lt;code&gt;ntpdate &amp;lt;masterIP&amp;gt;&lt;/code&gt;出现&lt;code&gt;23 Oct 13:11:05 ntpdate[1454]: the NTP socket is in use, exiting&lt;/code&gt; 【解决方案】&lt;code&gt;lsof -i:123&lt;/code&gt; 然后 &lt;code&gt;kill -9 pid&lt;/code&gt; 再重新尝试即可&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;crontab自动同步，crontab是自动运行的服务，可以让机器自动按一定周期进行时间同步。&lt;br&gt;【方法】在每台机器上&lt;br&gt;&lt;figure class=&quot;highlight gherkin&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;crontab -u root -e   &lt;span class=&quot;comment&quot;&gt;# 新建root的crontab文件并编辑，写入如下语句&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;*&lt;/span&gt;/24 &lt;span class=&quot;keyword&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;*&lt;/span&gt; /usr/sbin/ntpdate 192.168.1.1  &lt;span class=&quot;comment&quot;&gt;# 24小时同步一次&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这样每24小时，所有的worker都会自动与时间服务器192.168.1.1上的时间同步一次，应该不会再出现时间不同步的问题了，除非机器重启可能会早造成设置改变等，还没有遇到，等遇到了再写。&lt;/p&gt;
&lt;h3 id=&quot;Hadoop-YARN-报-Unhealthy-Nodes&quot;&gt;&lt;a href=&quot;#Hadoop-YARN-报-Unhealthy-Nodes&quot; class=&quot;headerlink&quot; title=&quot;Hadoop YARN 报 Unhealthy Nodes&quot;&gt;&lt;/a&gt;Hadoop YARN 报 Unhealthy Nodes&lt;/h3&gt;&lt;p&gt;Healthy报告如下：&lt;br&gt;&lt;figure class=&quot;highlight armasm&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;/&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; local-dirs are &lt;span class=&quot;keyword&quot;&gt;bad: &lt;/span&gt;/&lt;span class=&quot;meta&quot;&gt;data&lt;/span&gt;/hadoop_tmp/nm-local-dir&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;/&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; log-dirs are &lt;span class=&quot;keyword&quot;&gt;bad: &lt;/span&gt;/&lt;span class=&quot;meta&quot;&gt;data&lt;/span&gt;/hadoop_logs/userlogs&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;【原因分析】网上说最常见原因是由于节点上的磁盘使用率超出了&lt;code&gt;max-disk-utilization-per-disk-percentage&lt;/code&gt;（默认为90.0%）。&lt;br&gt;确实是这个原因，但是这个可能只是表面原因。可以通过增加磁盘利用率阈值来缓解问题：&lt;br&gt;在&lt;code&gt;yarn-site.xml&lt;/code&gt;中填写：&lt;br&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.nodemanager.disk-health-checker.max-disk-utilization-per-disk-percentage&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;98.5&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;但是增加阈值的方法治标不治本，迟早有一天会超过你设置的98.5%。&lt;br&gt;所以最好是清理磁盘空间。&lt;br&gt;清理磁盘空间发现&lt;code&gt;/data&lt;/code&gt;目录用量极大，说明HDFS很满，用如下命令查看HDFS各目录大小：&lt;br&gt;&lt;figure class=&quot;highlight crmsh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[hadoop@machine ~]$ hadoop fs -du -h /&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;12.1&lt;/span&gt; G  /data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;1.6&lt;/span&gt; T   /tmp&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2.8&lt;/span&gt; T   /&lt;span class=&quot;keyword&quot;&gt;user&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title&quot;&gt;0&lt;/span&gt;       /user41&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;发现&lt;code&gt;/tmp&lt;/code&gt;目录页用量巨大，再细看：&lt;br&gt;&lt;figure class=&quot;highlight dts&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[hadoop@machine ~]$ hadoop fs -du -h /tmp&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;55.2&lt;/span&gt; M   &lt;span class=&quot;meta-keyword&quot;&gt;/tmp/&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;st08&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;321.7&lt;/span&gt; M  &lt;span class=&quot;meta-keyword&quot;&gt;/tmp/&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;st22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;9.2&lt;/span&gt; K    &lt;span class=&quot;meta-keyword&quot;&gt;/tmp/&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;st26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;53.6&lt;/span&gt; M   &lt;span class=&quot;meta-keyword&quot;&gt;/tmp/&lt;/span&gt;MF1733016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;        &lt;span class=&quot;meta-keyword&quot;&gt;/tmp/&lt;/span&gt;b.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;36&lt;/span&gt;       &lt;span class=&quot;meta-keyword&quot;&gt;/tmp/&lt;/span&gt;files&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;17.7&lt;/span&gt; G   &lt;span class=&quot;meta-keyword&quot;&gt;/tmp/&lt;/span&gt;hadoop-yarn&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;255.9&lt;/span&gt; M  &lt;span class=&quot;meta-keyword&quot;&gt;/tmp/&lt;/span&gt;input&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;1.6&lt;/span&gt; T    &lt;span class=&quot;meta-keyword&quot;&gt;/tmp/&lt;/span&gt;logs          &lt;span class=&quot;meta&quot;&gt;# logs极大&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;        &lt;span class=&quot;meta-keyword&quot;&gt;/tmp/&lt;/span&gt;out&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;1.5&lt;/span&gt; M    &lt;span class=&quot;meta-keyword&quot;&gt;/tmp/&lt;/span&gt;out2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;1.5&lt;/span&gt; M    &lt;span class=&quot;meta-keyword&quot;&gt;/tmp/&lt;/span&gt;out3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;108.0&lt;/span&gt; M  &lt;span class=&quot;meta-keyword&quot;&gt;/tmp/&lt;/span&gt;output&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;36&lt;/span&gt;       &lt;span class=&quot;meta-keyword&quot;&gt;/tmp/&lt;/span&gt;test-in&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2.1&lt;/span&gt; M    &lt;span class=&quot;meta-keyword&quot;&gt;/tmp/&lt;/span&gt;test.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;31.0&lt;/span&gt; M   &lt;span class=&quot;meta-keyword&quot;&gt;/tmp/&lt;/span&gt;twitter_graph_v2.txt&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;由上可以发现，日志文件居然占据1.6T的空间，不可容许。&lt;br&gt;查看&lt;code&gt;yarn-site.xml&lt;/code&gt;，发现有两点：&lt;br&gt;1) 开启了log-aggregation:&lt;br&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.log-aggregation-enable&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;source&lt;/span&gt;&amp;gt;&lt;/span&gt;java.io.BufferedInputStream@1bf57bb&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;source&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;开启了日志聚合服务之后，用户程序运行生成的日志会自动传到HDFS的&lt;code&gt;/tmp&lt;/code&gt;目录下，如果不设置自动清空时间的话，日志将一直累积。&lt;br&gt;2）没有设置retain-seconds，即保存时间&lt;br&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.log-aggregation.retain-seconds&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;-1&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;source&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn-default.xml&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;source&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;默认永久保存。&lt;/p&gt;
&lt;p&gt;但是其实发现集群并没有开启history-server服务，所以这些日志都白记录了。&lt;/p&gt;
&lt;p&gt;【解决方案】所以要么关闭log-aggregation，要么设置一定的保持时间，超过保持时间自动清除。&lt;br&gt;【总结】我们看到，有时其实表面原因下，隐藏着更深刻的问题，找到最关键的地方，治其本才是最一劳永逸的。&lt;/p&gt;
&lt;h3 id=&quot;Hadoop-YARN-执行Task时报-Connection-Refused&quot;&gt;&lt;a href=&quot;#Hadoop-YARN-执行Task时报-Connection-Refused&quot; class=&quot;headerlink&quot; title=&quot;Hadoop YARN 执行Task时报 Connection Refused.&quot;&gt;&lt;/a&gt;Hadoop YARN 执行Task时报 Connection Refused.&lt;/h3&gt;&lt;p&gt;遇到FAILED问题&lt;br&gt;&lt;img src=&quot;http://7xsl28.com1.z0.glb.clouddn.com/yarn-connection-refused.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在&lt;code&gt;master01:19888/jobhistory/...&lt;/code&gt;查看map task的log信息：&lt;br&gt;&lt;figure class=&quot;highlight oxygene&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2018&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;02&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;21&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;18&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;26&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;815&lt;/span&gt; WARN [main] org.apache.hadoop.mapred.YarnChild: Exception running child : java.net.ConnectException: Call &lt;span class=&quot;keyword&quot;&gt;From&lt;/span&gt; slave015/&lt;span class=&quot;number&quot;&gt;127.0&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;0.1&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;to&lt;/span&gt; slave015:&lt;span class=&quot;number&quot;&gt;38953&lt;/span&gt; failed &lt;span class=&quot;keyword&quot;&gt;on&lt;/span&gt; connection exception: java.net.ConnectException: Connection refused; &lt;span class=&quot;keyword&quot;&gt;For&lt;/span&gt; more details see:  http:&lt;span class=&quot;comment&quot;&gt;//wiki.apache.org/hadoop/ConnectionRefused&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Method&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;title&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;sun&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;reflect&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;NativeConstructorAccessorImpl&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;newInstance&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(NativeConstructorAccessorImpl.java:57)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;title&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;sun&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;reflect&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;DelegatingConstructorAccessorImpl&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;newInstance&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(DelegatingConstructorAccessorImpl.java:45)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;title&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;java&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;lang&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;reflect&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;Constructor&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;newInstance&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;Constructor&lt;/span&gt;.java:526)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;title&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;org&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;apache&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;hadoop&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;net&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;NetUtils&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;wrapWithMessage&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(NetUtils.java:792)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;title&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;org&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;apache&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;hadoop&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;net&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;NetUtils&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;wrapException&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(NetUtils.java:732)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;title&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;org&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;apache&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;hadoop&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;ipc&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;Client&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Client.java:1480)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;title&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;org&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;apache&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;hadoop&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;ipc&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;Client&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Client.java:1407)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;title&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;org&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;apache&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;hadoop&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;ipc&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;WritableRpcEngine&lt;/span&gt;$&lt;span class=&quot;title&quot;&gt;Invoker&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;invoke&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(WritableRpcEngine.java:242)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;title&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;com&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;sun&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;proxy&lt;/span&gt;.$&lt;span class=&quot;title&quot;&gt;Proxy7&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;getTask&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Unknown Source)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;title&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;org&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;apache&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;hadoop&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;mapred&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;YarnChild&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(YarnChild.java:132)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title&quot;&gt;Caused&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;by&lt;/span&gt;:&lt;/span&gt; java.net.ConnectException: Connection refused&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	at sun.nio.ch.SocketChannelImpl.checkConnect(Native &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Method&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;title&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;sun&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;nio&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;ch&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;SocketChannelImpl&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;finishConnect&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(SocketChannelImpl.java:739)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;title&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;org&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;apache&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;hadoop&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;net&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;SocketIOWithTimeout&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(SocketIOWithTimeout.java:206)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;title&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;org&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;apache&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;hadoop&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;net&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;NetUtils&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(NetUtils.java:531)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;title&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;org&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;apache&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;hadoop&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;net&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;NetUtils&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(NetUtils.java:495)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;title&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;org&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;apache&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;hadoop&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;ipc&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;Client&lt;/span&gt;$&lt;span class=&quot;title&quot;&gt;Connection&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;setupConnection&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Client.java:609)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;title&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;org&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;apache&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;hadoop&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;ipc&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;Client&lt;/span&gt;$&lt;span class=&quot;title&quot;&gt;Connection&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;setupIOstreams&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Client.java:707)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;title&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;org&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;apache&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;hadoop&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;ipc&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;Client&lt;/span&gt;$&lt;span class=&quot;title&quot;&gt;Connection&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;access&lt;/span&gt;$2800&lt;span class=&quot;params&quot;&gt;(Client.java:370)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;title&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;org&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;apache&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;hadoop&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;ipc&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;Client&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;getConnection&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Client.java:1529)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;title&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;org&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;apache&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;hadoop&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;ipc&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;Client&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Client.java:1446)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	... 4 &lt;span class=&quot;title&quot;&gt;more&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;【问题分析】&lt;br&gt;发现这么一条：&lt;br&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Call&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;From&lt;/span&gt; slave015/&lt;span class=&quot;number&quot;&gt;127.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.1&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;to&lt;/span&gt; localhost.localdomain:&lt;span class=&quot;number&quot;&gt;38953&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;failed&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;connection&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;exception&lt;/span&gt;.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在分布式集群中，一般遇到Connection refused问题，大概率是hosts解析有问题。&lt;/p&gt;
&lt;p&gt;查看&lt;code&gt;/etc/hosts&lt;/code&gt;文件如下：&lt;br&gt;&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;127&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;       &lt;span class=&quot;selector-tag&quot;&gt;slave015&lt;/span&gt;        &lt;span class=&quot;selector-tag&quot;&gt;localhost&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.localdomain&lt;/span&gt;   &lt;span class=&quot;selector-tag&quot;&gt;localhost&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;span class=&quot;selector-pseudo&quot;&gt;::1&lt;/span&gt;    &lt;span class=&quot;selector-tag&quot;&gt;localhost6&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.localdomain6&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;localhost6&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;span class=&quot;selector-pseudo&quot;&gt;::1&lt;/span&gt;    &lt;span class=&quot;selector-tag&quot;&gt;master01&lt;/span&gt;        &lt;span class=&quot;selector-tag&quot;&gt;localhost6&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.localdomain6&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;localhost6&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;span class=&quot;selector-pseudo&quot;&gt;::1&lt;/span&gt;    &lt;span class=&quot;selector-tag&quot;&gt;master01&lt;/span&gt;        &lt;span class=&quot;selector-tag&quot;&gt;localhost6&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.localdomain6&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;localhost6&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;span class=&quot;selector-class&quot;&gt;.212&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.190&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.91&lt;/span&gt;  &lt;span class=&quot;selector-tag&quot;&gt;master01&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;span class=&quot;selector-class&quot;&gt;.168&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;     &lt;span class=&quot;selector-tag&quot;&gt;slave002&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;span class=&quot;selector-class&quot;&gt;.168&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.3&lt;/span&gt;     &lt;span class=&quot;selector-tag&quot;&gt;slave003&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;span class=&quot;selector-class&quot;&gt;.168&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.4&lt;/span&gt;     &lt;span class=&quot;selector-tag&quot;&gt;slave004&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;span class=&quot;selector-class&quot;&gt;.168&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.5&lt;/span&gt;     &lt;span class=&quot;selector-tag&quot;&gt;slave005&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;span class=&quot;selector-class&quot;&gt;.168&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.6&lt;/span&gt;     &lt;span class=&quot;selector-tag&quot;&gt;slave006&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;span class=&quot;selector-class&quot;&gt;.168&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.7&lt;/span&gt;     &lt;span class=&quot;selector-tag&quot;&gt;slave007&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;span class=&quot;selector-class&quot;&gt;.168&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.8&lt;/span&gt;     &lt;span class=&quot;selector-tag&quot;&gt;slave008&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;span class=&quot;selector-class&quot;&gt;.168&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.9&lt;/span&gt;     &lt;span class=&quot;selector-tag&quot;&gt;slave009&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;span class=&quot;selector-class&quot;&gt;.168&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.10&lt;/span&gt;    &lt;span class=&quot;selector-tag&quot;&gt;slave010&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;span class=&quot;selector-class&quot;&gt;.168&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.11&lt;/span&gt;    &lt;span class=&quot;selector-tag&quot;&gt;slave011&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;span class=&quot;selector-class&quot;&gt;.168&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.12&lt;/span&gt;    &lt;span class=&quot;selector-tag&quot;&gt;slave012&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;span class=&quot;selector-class&quot;&gt;.168&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.13&lt;/span&gt;    &lt;span class=&quot;selector-tag&quot;&gt;slave013&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;span class=&quot;selector-class&quot;&gt;.168&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.14&lt;/span&gt;    &lt;span class=&quot;selector-tag&quot;&gt;slave014&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;span class=&quot;selector-class&quot;&gt;.168&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.15&lt;/span&gt;    &lt;span class=&quot;selector-tag&quot;&gt;slave015&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;span class=&quot;selector-class&quot;&gt;.168&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.16&lt;/span&gt;    &lt;span class=&quot;selector-tag&quot;&gt;slave016&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;注意第一行的，前三项依次代表内网IP，主机名，主机别名。&lt;br&gt;也就是说，主机是slave015把自己解析成127.0.0.1，同样地，别的机器也部分出现了这种情况，所以大概的一个错误原因分析如下：&lt;br&gt;在yarn集群中，一些主机会在一个临时端口(假如如上是38953)启动job tracker，然后任意主机的task tracker向此job tracker拉取任务时，job tracker会把自己的地址和端口发送给需求的task tracker，然后task tracker自己去此端口拉取任务。&lt;br&gt;如果job tracker的hosts设置错误，假如如上解析为本机地址，那么job tracker会将&lt;code&gt;127.0.0.1&lt;/code&gt;，即别名为&lt;code&gt;localhost.localdomain&lt;/code&gt;的地址发给task tracker(在本例为slave015)，所以slave015开始向&lt;code&gt;localhost.localdomain:38953&lt;/code&gt;去拉取任务或者信息，但是对于slave015而言，&lt;code&gt;localhost.localdomain&lt;/code&gt;是本机地址，而本机地址没有38953端口！所以会造成Connection refused。&lt;br&gt;当然可能造成这个的原因不止这一个，也可能不是这一个，我们可以在master:8088/cluster中查看log来判断解决。如果无法跳转到&lt;code&gt;master01:19888/jobhistory&lt;/code&gt;，那么需要在本机（webUI端）设置一条hosts规则：&lt;br&gt;&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;115&lt;span class=&quot;selector-class&quot;&gt;.212&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.190&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.91&lt;/span&gt;  &lt;span class=&quot;selector-tag&quot;&gt;master01&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;【解决方案】&lt;br&gt;把所有设置错误的节点修正过来。删掉第二个条目(如slave015)。&lt;br&gt;&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;127&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;        &lt;span class=&quot;selector-tag&quot;&gt;localhost&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.localdomain&lt;/span&gt;   &lt;span class=&quot;selector-tag&quot;&gt;localhost&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;其实之前的hosts设置是OK的，只不过机器硬件重启之后，hosts设置又还原了。在分布式集群中就是这样，很难保证机器全部非常健康的运转。&lt;/p&gt;
&lt;h2 id=&quot;References&quot;&gt;&lt;a href=&quot;#References&quot; class=&quot;headerlink&quot; title=&quot;References&quot;&gt;&lt;/a&gt;References&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.cnblogs.com/zjp719325616/p/6530705.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;hadoop集群时间同步&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;本文记录Hadoop，HDFS，YARN，HBase，Hive等Hadoop社区的系统使用中的一些问题及解决方案，&lt;br&gt;包括Hadoop集群构建及使用中的一些问题以及解决方案，&lt;br&gt;包括各种莫名其妙的安装问题，&lt;br&gt;配置问题，&lt;br&gt;运行问题，&lt;br&gt;运行中问题，&lt;b
    
    </summary>
    
      <category term="错误解决与优化 | Err_n_Opt" scheme="http://whatbeg.com/categories/%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3%E4%B8%8E%E4%BC%98%E5%8C%96-Err-n-Opt/"/>
    
    
      <category term="大数据" scheme="http://whatbeg.com/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="Hadoop" scheme="http://whatbeg.com/tags/Hadoop/"/>
    
      <category term="错误解决" scheme="http://whatbeg.com/tags/%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3/"/>
    
  </entry>
  
  <entry>
    <title>利用Pytorch进行CNN详细剖析</title>
    <link href="http://whatbeg.com/2017/08/14/mnistCNN.html"/>
    <id>http://whatbeg.com/2017/08/14/mnistCNN.html</id>
    <published>2017-08-14T14:11:01.000Z</published>
    <updated>2017-08-14T14:43:43.870Z</updated>
    
    <content type="html">&lt;p&gt;本文缘起于一次CNN作业中的一道题，这道题涉及到了基本的CNN网络搭建，在MNIST数据集上的分类结果，Batch Normalization的影响，Dropout的影响，卷积核大小的影响，数据集大小的影响，不同部分数据集的影响，随机数种子的影响，以及不同激活单元的影响等，能够让人比较全面地对CNN有一个了解，所以想做一下，于是有了本文。&lt;/p&gt;
&lt;h2 id=&quot;工具&quot;&gt;&lt;a href=&quot;#工具&quot; class=&quot;headerlink&quot; title=&quot;工具&quot;&gt;&lt;/a&gt;工具&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;开源深度学习库： &lt;a href=&quot;http://pytorch.org&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PyTorch&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;数据集：&lt;a href=&quot;http://yann.lecun.com/exdb/mnist/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MNIST&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;实现&quot;&gt;&lt;a href=&quot;#实现&quot; class=&quot;headerlink&quot; title=&quot;实现&quot;&gt;&lt;/a&gt;实现&lt;/h2&gt;&lt;h3 id=&quot;初始要求&quot;&gt;&lt;a href=&quot;#初始要求&quot; class=&quot;headerlink&quot; title=&quot;初始要求&quot;&gt;&lt;/a&gt;初始要求&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;http://image-whatbegblog.oss-cn-shanghai.aliyuncs.com/images/PRCNN0.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;首先建立基本的BASE网络，在Pytorch中有如下code：&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Net&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(nn.Module)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        super(Net, self).__init__()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.conv1 = nn.Conv2d(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;, kernel_size=(&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;), stride=(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;), padding=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.conv2 = nn.Conv2d(&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;, kernel_size=(&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;), stride=(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;), padding=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.fc1 = nn.Linear(&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;*&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;*&lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;500&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.fc2 = nn.Linear(&lt;span class=&quot;number&quot;&gt;500&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;forward&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self, x)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x = F.max_pool2d(self.conv1(x), &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x = F.max_pool2d(self.conv2(x), &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x = x.view(&lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;*&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;*&lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x = F.relu(self.fc1(x))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x = self.fc2(x)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; F.log_softmax(x)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这部分代码见&lt;code&gt;base.py&lt;/code&gt;。&lt;/p&gt;
&lt;h3 id=&quot;问题A：预处理&quot;&gt;&lt;a href=&quot;#问题A：预处理&quot; class=&quot;headerlink&quot; title=&quot;问题A：预处理&quot;&gt;&lt;/a&gt;问题A：预处理&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;http://image-whatbegblog.oss-cn-shanghai.aliyuncs.com/images/PRCNN1.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;即要求将MNIST数据集按照规则读取并且tranform到适合处理的格式。这里读取的代码沿用了BigDL Python Support的读取方式，无需细说，根据MNIST主页上的数据格式可以很快读出，关键block有读取32位比特的函数：&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;_read32&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(bytestream)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    dt = numpy.dtype(numpy.uint32).newbyteorder(&lt;span class=&quot;string&quot;&gt;&#39;&amp;gt;&#39;&lt;/span&gt;)    &lt;span class=&quot;comment&quot;&gt;# 大端模式读取，最高字节在前(MSB first)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; numpy.frombuffer(bytestream.read(&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;), dtype=dt)[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;读出后是(N, 1, 28, 28)的tensor，每个像素是0-255的值，首先做一下归一化，将所有值除以255，得到一个0-1的值，然后再Normalize，训练集和测试集的均值方差都已知，直接做即可。由于训练集和测试集的均值方差都是针对归一化后的数据来说的，所以刚开始没做归一化，所以forward输出和grad很离谱，后来才发现是这里出了问题。&lt;/p&gt;
&lt;p&gt;这部分代码见&lt;code&gt;preprocessing.py&lt;/code&gt;。&lt;/p&gt;
&lt;h3 id=&quot;问题B：BASE模型&quot;&gt;&lt;a href=&quot;#问题B：BASE模型&quot; class=&quot;headerlink&quot; title=&quot;问题B：BASE模型&quot;&gt;&lt;/a&gt;问题B：BASE模型&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;http://image-whatbegblog.oss-cn-shanghai.aliyuncs.com/images/PRCNN2.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;将random seed设置为0，在前10000个训练样本上学习参数，最后看20个epochs之后的测试集错误率。最后结果为：&lt;/p&gt;
&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Test &lt;span class=&quot;string&quot;&gt;set:&lt;/span&gt; Average &lt;span class=&quot;string&quot;&gt;loss:&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0014&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;Accuracy:&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;9732&lt;/span&gt;/&lt;span class=&quot;number&quot;&gt;10000&lt;/span&gt; (&lt;span class=&quot;number&quot;&gt;97.3&lt;/span&gt;%)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;可以看到，BASE模型准确率并不是那么的高。&lt;/p&gt;
&lt;h3 id=&quot;问题C：Batch-Normalization-v-s-BASE&quot;&gt;&lt;a href=&quot;#问题C：Batch-Normalization-v-s-BASE&quot; class=&quot;headerlink&quot; title=&quot;问题C：Batch Normalization v.s BASE&quot;&gt;&lt;/a&gt;问题C：Batch Normalization v.s BASE&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;http://image-whatbegblog.oss-cn-shanghai.aliyuncs.com/images/PRCNN3.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在前三个block的卷积层之后加上Batch Normalization层，简单修改网络结构如下即可：&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Net&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(nn.Module)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        super(Net, self).__init__()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.conv1 = nn.Conv2d(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;, kernel_size=(&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;), stride=(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;), padding=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.conv2 = nn.Conv2d(&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;, kernel_size=(&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;), stride=(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;), padding=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.fc1 = nn.Linear(&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;*&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;*&lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;500&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.fc2 = nn.Linear(&lt;span class=&quot;number&quot;&gt;500&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.bn1 = nn.BatchNorm2d(&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.bn2 = nn.BatchNorm2d(&lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        self.bn3 = nn.BatchNorm1d(&lt;span class=&quot;number&quot;&gt;500&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;forward&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self, x)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x = self.conv1(x)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x = F.max_pool2d(self.bn1(x), &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x = self.conv2(x)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x = F.max_pool2d(self.bn2(x), &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x = x.view(&lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;*&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;*&lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x = self.fc1(x)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x = F.relu(self.bn3(x))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x = self.fc2(x)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; F.log_softmax(x)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;同样的参数run一下，得出加了BN的结果为：&lt;br&gt;&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Test &lt;span class=&quot;string&quot;&gt;set:&lt;/span&gt; Average &lt;span class=&quot;string&quot;&gt;loss:&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0009&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;Accuracy:&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;9817&lt;/span&gt;/&lt;span class=&quot;number&quot;&gt;10000&lt;/span&gt; (&lt;span class=&quot;number&quot;&gt;98.2&lt;/span&gt;%)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;由此可见，有明显的效果提升。&lt;br&gt;关于Batch Normalization的更多资料参见[2],[5]。&lt;/p&gt;
&lt;h3 id=&quot;问题D：-Dropout-Layer&quot;&gt;&lt;a href=&quot;#问题D：-Dropout-Layer&quot; class=&quot;headerlink&quot; title=&quot;问题D： Dropout Layer&quot;&gt;&lt;/a&gt;问题D： Dropout Layer&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;http://image-whatbegblog.oss-cn-shanghai.aliyuncs.com/images/PRCNN4.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在最后一层即&lt;code&gt;fc2&lt;/code&gt;层后加一个&lt;code&gt;Dropout(p=0.5)&lt;/code&gt;后，在BASE和BN上的结果分别为：&lt;/p&gt;
&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;BASE：Test &lt;span class=&quot;string&quot;&gt;set:&lt;/span&gt; Average &lt;span class=&quot;string&quot;&gt;loss:&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0011&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;Accuracy:&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;9769&lt;/span&gt;/&lt;span class=&quot;number&quot;&gt;10000&lt;/span&gt; (&lt;span class=&quot;number&quot;&gt;97.7&lt;/span&gt;%)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BN：  Test &lt;span class=&quot;string&quot;&gt;set:&lt;/span&gt; Average &lt;span class=&quot;string&quot;&gt;loss:&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0014&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;Accuracy:&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;9789&lt;/span&gt;/&lt;span class=&quot;number&quot;&gt;10000&lt;/span&gt; (&lt;span class=&quot;number&quot;&gt;97.9&lt;/span&gt;%)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;观察得知，dropout能够对BASE模型起到一定提升作用，但是对BN模型却效果不明显反而降低了。&lt;br&gt;原因可能在于，BN模型中本身即包含了正则化的效果，再加一层Dropout显得没有必要反而可能影响结果。&lt;/p&gt;
&lt;h3 id=&quot;问题E：SK-model&quot;&gt;&lt;a href=&quot;#问题E：SK-model&quot; class=&quot;headerlink&quot; title=&quot;问题E：SK model&quot;&gt;&lt;/a&gt;问题E：SK model&lt;/h3&gt;&lt;p&gt;SK model: Stacking two 3x3 conv. layers to replace 5x5 conv. layer&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://image-whatbegblog.oss-cn-shanghai.aliyuncs.com/images/PRCNN5-1.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://image-whatbegblog.oss-cn-shanghai.aliyuncs.com/images/PRCNN5-2.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;如此一番改动后，搭建的SK模型如下：&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Net&lt;/span&gt;(&lt;span class=&quot;title&quot;&gt;nn&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;Module&lt;/span&gt;):&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;symbol&quot;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;(Net, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;).__init_&lt;span class=&quot;number&quot;&gt;_&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.conv1_1 = nn.Conv2d(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;, kernel_size=(&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;), stride=(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;), padding=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.conv1_2 = nn.Conv2d(&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;, kernel_size=(&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;), stride=(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;), padding=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.conv2 = nn.Conv2d(&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;, kernel_size=(&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;), stride=(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;), padding=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.fc1 = nn.Linear(&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;*&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;*&lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;500&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.fc2 = nn.Linear(&lt;span class=&quot;number&quot;&gt;500&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bn1_1 = nn.BatchNorm2d(&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bn1_2 = nn.BatchNorm2d(&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bn2 = nn.BatchNorm2d(&lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bn3 = nn.BatchNorm1d(&lt;span class=&quot;number&quot;&gt;500&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.drop = nn.Dropout(p=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;forward&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, x)&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;symbol&quot;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x = F.relu(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bn1_1(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.conv1_1(x)))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x = F.relu(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bn1_2(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.conv1_2(x)))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x = F.max_pool2d(x, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.conv2(x)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x = F.max_pool2d(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bn2(x), &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x = x.view(-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;*&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;*&lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.fc1(x)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x = F.relu(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bn3(x))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.fc2(x)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; F.log_softmax(x)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在20个epoch后，结果如下，&lt;br&gt;&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SK： Test &lt;span class=&quot;string&quot;&gt;set:&lt;/span&gt; Average &lt;span class=&quot;string&quot;&gt;loss:&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0008&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;Accuracy:&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;9848&lt;/span&gt;/&lt;span class=&quot;number&quot;&gt;10000&lt;/span&gt; (&lt;span class=&quot;number&quot;&gt;98.5&lt;/span&gt;%)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;测试集准确率得到了少许的提高。&lt;br&gt;这里利用2个3x3的卷积核来代替大的5x5卷积核，参数个数由5x5=25变为了2x3x3=18。实践表明，这样使得计算更快了，并且小的卷积层之间的ReLU也很有帮助。&lt;br&gt;VGG中就使用了这种方法。&lt;/p&gt;
&lt;h3 id=&quot;问题F：Change-Number-of-channels&quot;&gt;&lt;a href=&quot;#问题F：Change-Number-of-channels&quot; class=&quot;headerlink&quot; title=&quot;问题F：Change Number of channels&quot;&gt;&lt;/a&gt;问题F：Change Number of channels&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;http://image-whatbegblog.oss-cn-shanghai.aliyuncs.com/images/PRCNN6.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;通过将特征图大小乘上一个倍数，再通过shell程序执行，得到如下结果：&lt;br&gt;&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;SK0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;：  97&lt;span class=&quot;selector-class&quot;&gt;.7&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;SK0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.5&lt;/span&gt;：  98&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;SK1&lt;/span&gt;：    98&lt;span class=&quot;selector-class&quot;&gt;.5&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;SK1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.5&lt;/span&gt;：  98&lt;span class=&quot;selector-class&quot;&gt;.6&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;SK2&lt;/span&gt;：    98&lt;span class=&quot;selector-class&quot;&gt;.5&lt;/span&gt;%  (&lt;span class=&quot;selector-tag&quot;&gt;max&lt;/span&gt; 98&lt;span class=&quot;selector-class&quot;&gt;.7&lt;/span&gt;%)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在特征图分别为4，10, 30, 40时，最终的准确度基本是往上提升的。这在一定程度上说明，在没有达到过拟合前，增大特征图的个数，即相当于提取了更多的特征，提取特征数的增加有助于精度的提高。&lt;br&gt;这部分代码见&lt;code&gt;SK_s.py&lt;/code&gt;和&lt;code&gt;runSK.sh&lt;/code&gt;。&lt;/p&gt;
&lt;h3 id=&quot;问题G：Use-different-training-set-sizes&quot;&gt;&lt;a href=&quot;#问题G：Use-different-training-set-sizes&quot; class=&quot;headerlink&quot; title=&quot;问题G：Use different training set sizes&quot;&gt;&lt;/a&gt;问题G：Use different training set sizes&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;http://image-whatbegblog.oss-cn-shanghai.aliyuncs.com/images/PRCNN7.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;同样通过脚本运行，增加参数&lt;br&gt;&lt;figure class=&quot;highlight go&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;parser.add_argument(&lt;span class=&quot;string&quot;&gt;&#39;--usedatasize&#39;&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;=&lt;span class=&quot;number&quot;&gt;60000&lt;/span&gt;, metavar=&lt;span class=&quot;string&quot;&gt;&#39;SZ&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    help=&lt;span class=&quot;string&quot;&gt;&#39;use how many training data to train network&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;表示使用的数据大小，从前往后取&lt;code&gt;usebatchsize&lt;/code&gt;个数据。&lt;br&gt;这部分程序见&lt;code&gt;SK_s.py&lt;/code&gt;和&lt;code&gt;runTrainingSize.sh&lt;/code&gt;。&lt;br&gt;运行的结果如下：&lt;br&gt;&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;500：   84&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1000：  92&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2000：  94&lt;span class=&quot;selector-class&quot;&gt;.3&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5000：  95&lt;span class=&quot;selector-class&quot;&gt;.5&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10000： 96&lt;span class=&quot;selector-class&quot;&gt;.6&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20000： 98&lt;span class=&quot;selector-class&quot;&gt;.4&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60000： 99&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;由此可以明显地看出，数据越多，结果的精度越大。&lt;br&gt;太少的数据无法准确反映数据的整体分布情况，而且容易过拟合，数据多到一定程度效果也会不明显，不过，大多数时候我们总还是嫌数据太少，而且更多的数据获取起来也有一定难度。&lt;/p&gt;
&lt;h3 id=&quot;问题H：Use-different-training-sets&quot;&gt;&lt;a href=&quot;#问题H：Use-different-training-sets&quot; class=&quot;headerlink&quot; title=&quot;问题H：Use different training sets&quot;&gt;&lt;/a&gt;问题H：Use different training sets&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;http://image-whatbegblog.oss-cn-shanghai.aliyuncs.com/images/PRCNN8.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;采用脚本完成，这部分程序见&lt;code&gt;SK_0.2.py&lt;/code&gt;和&lt;code&gt;diffTrainingSets.sh&lt;/code&gt;。&lt;br&gt;运行结果如下：&lt;br&gt;&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;    0&lt;span class=&quot;selector-tag&quot;&gt;-10000&lt;/span&gt;： 98&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10000&lt;span class=&quot;selector-tag&quot;&gt;-20000&lt;/span&gt;： 97&lt;span class=&quot;selector-class&quot;&gt;.8&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20000&lt;span class=&quot;selector-tag&quot;&gt;-30000&lt;/span&gt;： 97&lt;span class=&quot;selector-class&quot;&gt;.8&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30000&lt;span class=&quot;selector-tag&quot;&gt;-40000&lt;/span&gt;： 97&lt;span class=&quot;selector-class&quot;&gt;.4&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40000&lt;span class=&quot;selector-tag&quot;&gt;-50000&lt;/span&gt;： 97&lt;span class=&quot;selector-class&quot;&gt;.5&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50000&lt;span class=&quot;selector-tag&quot;&gt;-60000&lt;/span&gt;： 97&lt;span class=&quot;selector-class&quot;&gt;.7&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;由此可见，采用不同的训练样本集合训练出来的网络有一定的差异，虽不是很大，但是毕竟显示出了不稳定的结果。&lt;/p&gt;
&lt;h3 id=&quot;问题I：Random-Seed’s-effects&quot;&gt;&lt;a href=&quot;#问题I：Random-Seed’s-effects&quot; class=&quot;headerlink&quot; title=&quot;问题I：Random Seed’s effects&quot;&gt;&lt;/a&gt;问题I：Random Seed’s effects&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;http://image-whatbegblog.oss-cn-shanghai.aliyuncs.com/images/PRCNN9.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;采用&lt;code&gt;runSeed.sh&lt;/code&gt;脚本完成，用到了全部60000个训练集。&lt;br&gt;运行的结果如下：&lt;br&gt;&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;Seed&lt;/span&gt;      0：  98&lt;span class=&quot;selector-class&quot;&gt;.9&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;Seed&lt;/span&gt;      1：  99&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;Seed&lt;/span&gt;     12：  99&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;Seed&lt;/span&gt;    123：  99&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;Seed&lt;/span&gt;   1234：  99&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;Seed&lt;/span&gt;  12345：  99&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;Seed&lt;/span&gt; 123456：  98&lt;span class=&quot;selector-class&quot;&gt;.9&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;事实上在用上整个训练集的时候，随机数生成器的种子设置对于最后结果的影响不大。&lt;/p&gt;
&lt;h3 id=&quot;问题J：ReLU-or-Sigmoid&quot;&gt;&lt;a href=&quot;#问题J：ReLU-or-Sigmoid&quot; class=&quot;headerlink&quot; title=&quot;问题J：ReLU or Sigmoid?&quot;&gt;&lt;/a&gt;问题J：ReLU or Sigmoid?&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;http://image-whatbegblog.oss-cn-shanghai.aliyuncs.com/images/PRCNN10.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;将ReLU全部换成Sigmoid后，用全部60000个训练集训练，有对比结果如下：&lt;br&gt;&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;selector-tag&quot;&gt;ReLU&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;SK_0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;:  99&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;Sigmoid&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;SK_0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;:  98&lt;span class=&quot;selector-class&quot;&gt;.6&lt;/span&gt;%&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;由此可以看出，在训练CNN时，使用ReLU激活单元比Sigmoid激活单元要更好一些。原因可能在于二者机制的差别，sigmoid在神经元输入值较大或者较小时，输出值会近乎0或者1，这使得许多地方的梯度几乎为0，权重几乎得不到更新。而ReLU虽然增加了计算的负担，但是它能够显著加速收敛过程，并且也不会有梯度饱和问题。&lt;/p&gt;
&lt;h2 id=&quot;总结&quot;&gt;&lt;a href=&quot;#总结&quot; class=&quot;headerlink&quot; title=&quot;总结&quot;&gt;&lt;/a&gt;总结&lt;/h2&gt;&lt;p&gt;本文利用PyTorch对几个CNN模型在MNIST数据集上的比较，以及一些参数的设置对模型效果的影响，从而对CNN的许多方面进行了一些详细的评估。&lt;br&gt;用过这么一次觉得PyTorch还是挺好用的，比较简单，其他模型不知道，反正卷积神经网络模型是如此。&lt;br&gt;项目具体代码见[7]。&lt;br&gt;由于笔者对CNN（卷积神经网络）研究不太深入，所以每个结果后的解释或有失偏颇，读者批判阅读即可。&lt;/p&gt;
&lt;h2 id=&quot;References&quot;&gt;&lt;a href=&quot;#References&quot; class=&quot;headerlink&quot; title=&quot;References&quot;&gt;&lt;/a&gt;References&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;[1] &lt;a href=&quot;https://cs.nju.edu.cn/wujx/paper/CNN.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Introduction to Convolutional Neural Networks&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;[2] &lt;a href=&quot;http://proceedings.mlr.press/v37/ioffe15.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Batch Normalization&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;[3] &lt;a href=&quot;http://pytorch.org/docs/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PyTorch Doc&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;[4] &lt;a href=&quot;http://www.vlfeat.org/matconvnet/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MatConvNet&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;[5] &lt;a href=&quot;https://www.zhihu.com/question/38102762&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;知乎-深度学习中 Batch Normalization为什么效果好？&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;[6] &lt;a href=&quot;http://jmlr.org/papers/volume15/srivastava14a/srivastava14a.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Dropout&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;[7] &lt;a href=&quot;https://github.com/whatbeg/Data-Analysis-and-Mining/tree/master/CNN_for_Mnist&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Github上的代码&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;本文缘起于一次CNN作业中的一道题，这道题涉及到了基本的CNN网络搭建，在MNIST数据集上的分类结果，Batch Normalization的影响，Dropout的影响，卷积核大小的影响，数据集大小的影响，不同部分数据集的影响，随机数种子的影响，以及不同激活单元的影响等，
    
    </summary>
    
      <category term="深度学习 | Deep Learning" scheme="http://whatbeg.com/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Deep-Learning/"/>
    
    
      <category term="Deep Learning" scheme="http://whatbeg.com/tags/Deep-Learning/"/>
    
  </entry>
  
  <entry>
    <title>Deep Learning读书笔记（2）【深度学习的数学基础摘要】</title>
    <link href="http://whatbeg.com/2017/08/13/deeplearningbook-02.html"/>
    <id>http://whatbeg.com/2017/08/13/deeplearningbook-02.html</id>
    <published>2017-08-13T02:49:46.000Z</published>
    <updated>2017-08-14T13:22:02.752Z</updated>
    
    <content type="html">&lt;p&gt;深度学习需要的数学基础同机器学习所需的数学基础类似，包括三大块：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;线性代数&lt;/li&gt;
&lt;li&gt;概率论与数理统计&lt;/li&gt;
&lt;li&gt;信息论基础&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;分三部分摘要如下，&lt;/p&gt;
&lt;h2 id=&quot;线性代数&quot;&gt;&lt;a href=&quot;#线性代数&quot; class=&quot;headerlink&quot; title=&quot;线性代数&quot;&gt;&lt;/a&gt;线性代数&lt;/h2&gt;&lt;h3 id=&quot;Scalar-Vectors-Matrices-Tensors的概念&quot;&gt;&lt;a href=&quot;#Scalar-Vectors-Matrices-Tensors的概念&quot; class=&quot;headerlink&quot; title=&quot;Scalar, Vectors, Matrices, Tensors的概念&quot;&gt;&lt;/a&gt;Scalar, Vectors, Matrices, Tensors的概念&lt;/h3&gt;&lt;p&gt;Scalar: 标量，可以看成一个数&lt;br&gt;Vector: 向量，可以看成一个一维数组&lt;br&gt;Matrix: 矩阵，可以看成二维数组&lt;br&gt;Tensor: 张量，三维或三维以上的数组的统称，维度不定&lt;/p&gt;
&lt;p&gt;很多时候我们处理的都是超过2维的数组，这时候叫矩阵(Matrix)又不太合适，因为一般提到矩阵都会想到二维的矩阵，所以采用Tensor来统一表示不定维的数组。这也是几乎所有深度学习框架的基本数据结构。”Tensorflow”名字中就包含了”Tensor”，于是向量可以称为1-D Tensor，一维张量，矩阵可以称为二维张量。&lt;/p&gt;
&lt;p&gt;这样，深度学习中包括数据，梯度，权重等等都可以用某维度的Tensor来表示了，底层数据结构的统一为上层编程带来了极大的方便。&lt;/p&gt;
&lt;h3 id=&quot;矩阵的基本操作&quot;&gt;&lt;a href=&quot;#矩阵的基本操作&quot; class=&quot;headerlink&quot; title=&quot;矩阵的基本操作&quot;&gt;&lt;/a&gt;矩阵的基本操作&lt;/h3&gt;&lt;p&gt;矩阵转置，相乘，矩阵与向量相乘&lt;br&gt;单位矩阵与逆矩阵&lt;br&gt;线性相关性&lt;br&gt;展开(Span)，一个向量集的展开定义为向量集中通过向量的线性组合能够得到的点&lt;/p&gt;
&lt;h3 id=&quot;奇异-Singular-矩阵和非奇异矩阵&quot;&gt;&lt;a href=&quot;#奇异-Singular-矩阵和非奇异矩阵&quot; class=&quot;headerlink&quot; title=&quot;奇异(Singular)矩阵和非奇异矩阵&quot;&gt;&lt;/a&gt;奇异(Singular)矩阵和非奇异矩阵&lt;/h3&gt;&lt;p&gt;奇异矩阵：存在线性相关的列的方阵或者行列式为0的方阵称为奇异矩阵&lt;br&gt;奇异矩阵不可逆&lt;br&gt;若n阶方阵A的行列式不为零，即$|A|≠0$，则称A为非奇异矩阵或满秩矩阵，存在逆矩阵&lt;/p&gt;
&lt;p&gt;要注意的是，即使A不是方阵或者A是方阵但是奇异，也是有可能解方程$Ax=b$的，只是不能通过求逆矩阵$A^{-1}$从而$x=A^{-1}b$来解而已。&lt;br&gt;线性方程组$Ax=b$有解的充分必要条件是: 增广矩阵的秩等于系数矩阵的秩，即$r(A,b) = r(A)$&lt;/p&gt;
&lt;h3 id=&quot;范数-Norm&quot;&gt;&lt;a href=&quot;#范数-Norm&quot; class=&quot;headerlink&quot; title=&quot;范数(Norm)&quot;&gt;&lt;/a&gt;范数(Norm)&lt;/h3&gt;&lt;p&gt;范数的作用是度量向量的大小，将向量映射为非负实数&lt;br&gt;$L^p$范数定义为：&lt;br&gt;$$||x||_p=(\Sigma_i {|x_i|^p})^{\frac 1 p}$$&lt;/p&gt;
&lt;p&gt;在正则化中常常用到范数，主要用到1-范数和2-范数。&lt;/p&gt;
&lt;p&gt;$x^{\top}x=||x||_2^2$&lt;/p&gt;
&lt;p&gt;Frobenius Norms:  $||A||_{F}=\sqrt{\Sigma_{i,j}A_{i,j}^2}$&lt;/p&gt;
&lt;p&gt;向量点积： $x^{\top}y=||x||_2||y||_2cos\theta$&lt;/p&gt;
&lt;h3 id=&quot;特殊矩阵&quot;&gt;&lt;a href=&quot;#特殊矩阵&quot; class=&quot;headerlink&quot; title=&quot;特殊矩阵&quot;&gt;&lt;/a&gt;特殊矩阵&lt;/h3&gt;&lt;p&gt;对角矩阵&lt;br&gt;实对称矩阵及其性质：&lt;br&gt;（1）A的特征值为实数，且其特征向量为实向量&lt;br&gt;（2）A的不同特征值对应的特征向量必定正交&lt;br&gt;（3）A一定有n个线性无关的特征向量，从而A相似于对角矩阵&lt;br&gt;正交矩阵的性质： $A^{-1}=A^{\top}$&lt;/p&gt;
&lt;h3 id=&quot;特征值分解&quot;&gt;&lt;a href=&quot;#特征值分解&quot; class=&quot;headerlink&quot; title=&quot;特征值分解&quot;&gt;&lt;/a&gt;特征值分解&lt;/h3&gt;&lt;p&gt;特征值分解的思想类似于因式分解的思想，对于一个数，我们想要分析它的性质，可能直接看看不出什么来，但是可以把它因式分解一下，再来分析。比如180，$180 = 2 \times 2 \times 3 \times 3 \times 5=2^2 \times 3^2 \times 5^1$，这样我们可以知道，180是2,3,5的倍数，也是6的倍数，15的倍数，等等，进而分析其它性质。&lt;br&gt;矩阵分解也是如此，面对一个复杂的矩阵，我们可能毫无头绪，但是将其分解为两个或者多个矩阵的乘积，我们可能就能收获很多的性质。&lt;br&gt;特征值分解 $A=Q \Lambda Q^{\top}$，将矩阵分解为特征值和特征向量，Q是由A的特征向量组成的正交矩阵，而$\Lambda$则为特征值组成的对角矩阵，$\Lambda_{i,i}$ 对应着 $Q_{:,i}$。&lt;/p&gt;
&lt;h3 id=&quot;奇异值分解-Singular-Value-Decomposition&quot;&gt;&lt;a href=&quot;#奇异值分解-Singular-Value-Decomposition&quot; class=&quot;headerlink&quot; title=&quot;奇异值分解(Singular Value Decomposition)&quot;&gt;&lt;/a&gt;奇异值分解(Singular Value Decomposition)&lt;/h3&gt;&lt;p&gt;$A=UDV^{-1}$，U称为左奇异向量，为$AA^{\top}$的特征向量，V称为右奇异向量，为$A^{\top}A$的特征向量。&lt;br&gt;非0奇异值是$A^{\top}A$的特征值的开根号&lt;/p&gt;
&lt;h3 id=&quot;Moore-Penrose-Pseudoinverse&quot;&gt;&lt;a href=&quot;#Moore-Penrose-Pseudoinverse&quot; class=&quot;headerlink&quot; title=&quot;Moore-Penrose Pseudoinverse&quot;&gt;&lt;/a&gt;Moore-Penrose Pseudoinverse&lt;/h3&gt;&lt;p&gt;通常意义上的逆矩阵只有在当A为n阶方阵，并且行列式不为0时才存在，但是有时候这个条件显得太苛刻了，于是人们将条件做一些放松，使得能够推广到不可逆的矩阵或者长方的矩阵上，Penrose给出了四个矩阵方程，即放松后的条件，满足所有或者部分这些条件的逆矩阵称之为广义逆矩阵。满足所有者四个条件的称之为Moore-Penrose伪逆。&lt;br&gt;四个方程分别为：&lt;br&gt;(1) $AXA = A$&lt;br&gt;(2) $XAX = X$&lt;br&gt;(3) $(AH)^H = AX$&lt;br&gt;(4) $(XA)^H = XA$&lt;br&gt;（$A^H$为共轭转置，即$\bar{A} ^ T$）&lt;br&gt;对于$A \in C^{m \times n}$，如果有$X \in C^{n \times m}$满足这四个方程的某几个或者全部，那么X就称为A的广义逆。&lt;br&gt;满足这四个方程则称为M-P伪逆。&lt;/p&gt;
&lt;h3 id=&quot;迹运算符-Trace&quot;&gt;&lt;a href=&quot;#迹运算符-Trace&quot; class=&quot;headerlink&quot; title=&quot;迹运算符(Trace)&quot;&gt;&lt;/a&gt;迹运算符(Trace)&lt;/h3&gt;&lt;p&gt;$ Tr(A) = {\Sigma}_i A_{i,i} $&lt;br&gt;迹运算符有许多性质，比如循环不变性等等&lt;/p&gt;
&lt;h3 id=&quot;行列式&quot;&gt;&lt;a href=&quot;#行列式&quot; class=&quot;headerlink&quot; title=&quot;行列式&quot;&gt;&lt;/a&gt;行列式&lt;/h3&gt;&lt;p&gt;行列式的绝对值度量了矩阵扩展或者空间收缩所包含的操作多少的度量。&lt;/p&gt;
&lt;h2 id=&quot;概率论&quot;&gt;&lt;a href=&quot;#概率论&quot; class=&quot;headerlink&quot; title=&quot;概率论&quot;&gt;&lt;/a&gt;概率论&lt;/h2&gt;&lt;p&gt;概率论也是很多领域包括计算机科学尤其是机器学习这块的基础学科。一般的计算机程序或者问题的求解是没有随机性的，按照一个确定的算法来即可。但是在机器学习中，经常会遇到不确定的量，比如说数据的采集，可能是随机采集的，或者说数据中包含随机噪声等等，而概率论则是量化各种不确定性的手段。&lt;br&gt;可以说，几乎所有的活动都要求参与者具有分析不确定性的出现的一些能力。&lt;br&gt;不确定性有三种可能的来源：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;系统固有的随机性&lt;br&gt;比如说打牌的游戏，我们都会假设洗牌确实是能够将牌的顺序变的随机。&lt;/li&gt;
&lt;li&gt;不完备的观察&lt;br&gt;即使是一个确定的系统，当我们不能够观察到系统中所有驱动系统行为的变量时，也是会呈现出随机性的。&lt;/li&gt;
&lt;li&gt;不完备的建模&lt;br&gt;我们有时候建模时无法完美地使用所有信息，从而必须丢弃一些观察到的信息，丢弃的信息就会造成模型预测的不确定性。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在概率论领域，有两种学派，一种是频率学派，一种是贝叶斯学派。关于这两个学派的观点，可以参看&lt;a href=&quot;https://www.zhihu.com/question/20587681&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;贝叶斯学派与频率学派有何不同？&lt;/a&gt;等。&lt;/p&gt;
&lt;h3 id=&quot;随机变量&quot;&gt;&lt;a href=&quot;#随机变量&quot; class=&quot;headerlink&quot; title=&quot;随机变量&quot;&gt;&lt;/a&gt;随机变量&lt;/h3&gt;&lt;p&gt;简单来说，随机变量就是&lt;strong&gt;能够随机的取不同值的变量&lt;/strong&gt;，又分为连续随机变量和离散随机变量，离散随机变量包含有限个或者可数无穷个状态，状态不必是整数。而连续随机变量则与一个实值相关联。&lt;/p&gt;
&lt;h3 id=&quot;概率分布&quot;&gt;&lt;a href=&quot;#概率分布&quot; class=&quot;headerlink&quot; title=&quot;概率分布&quot;&gt;&lt;/a&gt;概率分布&lt;/h3&gt;&lt;p&gt;一个或一组随机变量取到每个可能状态的可能性的描述即为概率分布。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;离散随机变量的概率分布称为概率质量函数(PMF, Probablity Mass Function)&lt;/li&gt;
&lt;li&gt;连续随机变量的概率分布称为概率密度函数(PDF, Probablity Density Function)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;边缘概率&quot;&gt;&lt;a href=&quot;#边缘概率&quot; class=&quot;headerlink&quot; title=&quot;边缘概率&quot;&gt;&lt;/a&gt;边缘概率&lt;/h3&gt;&lt;p&gt;原来变量集合的一个子集上的概率分布。&lt;br&gt;假设有离散型随机变量X,Y，在知道P(X,Y)的情况下，计算边缘分布如下：&lt;br&gt;$$&lt;br&gt;\forall x \in X, P(X=x) = \sum_y {P(X=x, Y=y)}&lt;br&gt;$$&lt;br&gt;连续的话就是求积分的方式：&lt;br&gt;$$&lt;br&gt;p(x)=\int p(x,y)dy&lt;br&gt;$$&lt;/p&gt;
&lt;h3 id=&quot;条件概率及其链式法则&quot;&gt;&lt;a href=&quot;#条件概率及其链式法则&quot; class=&quot;headerlink&quot; title=&quot;条件概率及其链式法则&quot;&gt;&lt;/a&gt;条件概率及其链式法则&lt;/h3&gt;&lt;p&gt;条件概率：&lt;br&gt;给定某个事件发生时，事件A发生的概率称为条件概率。&lt;br&gt;$$&lt;br&gt;P(Y=y | X=x) = \frac {P(Y=y,X=x)} {P(X=x)}  \ \ \ \ \ \ \ \ \ \ (P(X=x) &amp;gt; 0)&lt;br&gt;$$&lt;/p&gt;
&lt;p&gt;条件概率的链式法则：&lt;br&gt;多维随机变量联合概率分布分解成单变量条件概率相乘：&lt;br&gt;$$&lt;br&gt;P(x^{(1)}, x^{(2)}, …, x^{(n)}) = P(x^{(1)})\prod_{i=2}^n P(x^{(i)} | x^{(1)}, x^{(2)}, …, x^{(i-1)})&lt;br&gt;$$&lt;br&gt;这个式子比较重要，典型的应用出现在NLP中句子的n-gram模型。&lt;/p&gt;
&lt;h3 id=&quot;独立和条件独立&quot;&gt;&lt;a href=&quot;#独立和条件独立&quot; class=&quot;headerlink&quot; title=&quot;独立和条件独立&quot;&gt;&lt;/a&gt;独立和条件独立&lt;/h3&gt;&lt;p&gt;独立意味着联合概率等于各个变量的边缘概率的乘积。&lt;br&gt;$$&lt;br&gt;\forall x \in X, y \in Y, p(X=x, Y=y)=P(X=x)P(Y=y)&lt;br&gt;$$&lt;br&gt;两个随机变量在给定随机变量z是&lt;strong&gt;条件独立&lt;/strong&gt;的，是指&lt;br&gt;$$&lt;br&gt;\forall x \in X, y \in Y, z \in Z, p(X=x, Y=y | Z=z)=P(X=x | Z=z)P(Y=y | Z=z)&lt;br&gt;$$&lt;/p&gt;
&lt;h3 id=&quot;期望，方差与协方差&quot;&gt;&lt;a href=&quot;#期望，方差与协方差&quot; class=&quot;headerlink&quot; title=&quot;期望，方差与协方差&quot;&gt;&lt;/a&gt;期望，方差与协方差&lt;/h3&gt;&lt;p&gt;这几个概念是深度学习乃至机器学习中非常常用的概念，需要重点掌握。&lt;/p&gt;
&lt;p&gt;随机变量X的期望值，直觉的来说，是指&lt;code&gt;X的可能值与其概率值之积的累加和&lt;/code&gt;。&lt;br&gt;数学上来说，函数f(x)关于某分布P(x)的期望，指的是x由分布P产生时，f(x)的平均值。&lt;br&gt;对于离散型随机变量，&lt;br&gt;$$&lt;br&gt;\mathbb{E}[f(x)] = \sum_x P(x)f(x)&lt;br&gt;$$&lt;/p&gt;
&lt;p&gt;对于连续性随机变量则求积分得到：&lt;br&gt;$$&lt;br&gt;\mathbb{E}[f(x)] = \int p(x)f(x)dx&lt;br&gt;$$&lt;br&gt;当然这里有一个前提，就是当随机变量X取无穷个值的时候，离散型变量的期望满足&lt;br&gt;$$E(X)=\sum_{x}|f(x)|P(x) &amp;lt; \infty$$&lt;br&gt;积分也是类似。&lt;br&gt;只有满足这个条件，即级数收敛的条件，我们才说此随机变量的期望E存在。&lt;/p&gt;
&lt;p&gt;一般来说，数学期望其实是由随机变量的分布决定的，所以我们一般可以说某某分布的期望。&lt;/p&gt;
&lt;p&gt;期望E满足几个性质：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;若干个随机变量的期望之和等于各变量的期望之和&lt;br&gt;若干个独立随机变量之积的期望等于各变量的期望之积&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;方差衡量随机变量偏离均值的程度，即随机变量函数值呈现的差异大小。&lt;br&gt;$$&lt;br&gt;Var(X) = \mathbb{E}[(X-\mathbb{E}[X])^2]&lt;br&gt;$$&lt;br&gt;当方差很小时，X的值形成的簇比较接近他们的期望值。&lt;/p&gt;
&lt;p&gt;协方差给出的是两个变量线性相关性的一个度量。&lt;br&gt;$$&lt;br&gt;Cov(X,Y) = \mathbb{E}[(X-EX)(Y-EY)]&lt;br&gt;$$&lt;/p&gt;
&lt;p&gt;协方差的绝对值 $|Cov(X,Y)|$ 如果很大，说明变量值变化很大，并且他们同时距离各自的均值很远。&lt;br&gt;如果协方差是正的，那么两个变量都倾向于同时取得较大的值。&lt;br&gt;如果协方差是负的，那么两个变量倾向于在某一个取大值的时候，另一个取小值。&lt;/p&gt;
&lt;p&gt;随机向量${\bf{x}} \in \mathbb{R}^n$的协方差矩阵是一个$\mathbb{R}^{n \times n}$，并且满足&lt;br&gt;$$&lt;br&gt;Cov({\bf{x}})_{i,j} = Cov(x_i, x_j)&lt;br&gt;$$&lt;br&gt;协方差矩阵对角元是方差$Var(x_i)=Cov(x_i,x_i)$&lt;/p&gt;
&lt;h3 id=&quot;常用概率分布&quot;&gt;&lt;a href=&quot;#常用概率分布&quot; class=&quot;headerlink&quot; title=&quot;常用概率分布&quot;&gt;&lt;/a&gt;常用概率分布&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;贝努利分布&lt;/li&gt;
&lt;li&gt;多贝努利分布/多类分布&lt;/li&gt;
&lt;li&gt;高斯分布&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;高斯分布&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://image-whatbegblog.oss-cn-shanghai.aliyuncs.com/images/dlbook_02_gauss.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;多元高斯分布&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://image-whatbegblog.oss-cn-shanghai.aliyuncs.com/images/dlbook_02_multi_gauss.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;指数分布&lt;/li&gt;
&lt;li&gt;拉普拉斯分布&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;http://image-whatbegblog.oss-cn-shanghai.aliyuncs.com/images/dlbook_02_laplace.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;狄拉克分布(Dirac)与经验分布&lt;/li&gt;
&lt;li&gt;混合分布&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;一些有用的性质和通用函数&quot;&gt;&lt;a href=&quot;#一些有用的性质和通用函数&quot; class=&quot;headerlink&quot; title=&quot;一些有用的性质和通用函数&quot;&gt;&lt;/a&gt;一些有用的性质和通用函数&lt;/h3&gt;&lt;p&gt;深度模型常用两个函数：&lt;/p&gt;
&lt;p&gt;Sigmoid函数：&lt;br&gt;&lt;img src=&quot;http://image-whatbegblog.oss-cn-shanghai.aliyuncs.com/images/dlbook_02_sigmoid.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;图像如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://image-whatbegblog.oss-cn-shanghai.aliyuncs.com/images/dlbook_02_sigmoid_graph.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;Softplus函数：&lt;br&gt;&lt;img src=&quot;http://image-whatbegblog.oss-cn-shanghai.aliyuncs.com/images/dlbook_02_softplus.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;图像如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://image-whatbegblog.oss-cn-shanghai.aliyuncs.com/images/dlbook_02_softplus_graph.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;关于这两个函数需要记住的一些性质：&lt;/p&gt;
&lt;center&gt; &lt;img src=&quot;http://image-whatbegblog.oss-cn-shanghai.aliyuncs.com/images/dlbook_02_remember01.png&quot; alt=&quot;&quot;&gt; &lt;/center&gt;

&lt;center&gt; &lt;img src=&quot;http://image-whatbegblog.oss-cn-shanghai.aliyuncs.com/images/dlbook_02_remember02.png&quot; alt=&quot;&quot;&gt; &lt;/center&gt;

&lt;h3 id=&quot;贝叶斯规则&quot;&gt;&lt;a href=&quot;#贝叶斯规则&quot; class=&quot;headerlink&quot; title=&quot;贝叶斯规则&quot;&gt;&lt;/a&gt;贝叶斯规则&lt;/h3&gt;&lt;p&gt;贝叶斯规则&lt;br&gt;也称为贝叶斯后验概率。&lt;br&gt;当我们知道$P(x)$和$P(y | x)$的信息的时候，我们如何知道$P(x | y)$呢？&lt;br&gt;比如说，我们知道糖尿病人发病率$P(x)$和糖尿病人以前喜欢吃甜食的概率$P(y|x)$，那么如何估算喜欢吃甜食的人将来患糖尿病的概率呢？&lt;br&gt;Reverend Thomas Bayes发明了贝叶斯公式，现在一般写成：&lt;br&gt;$$&lt;br&gt;P(x | y) = \frac {P(x)P(y | x)} {P(y)}&lt;br&gt;$$&lt;br&gt;$P(y)$如果不知道的话，可以以$P(y)=\sum_x P(y|x)P(x)$计算。&lt;/p&gt;
&lt;h2 id=&quot;信息论&quot;&gt;&lt;a href=&quot;#信息论&quot; class=&quot;headerlink&quot; title=&quot;信息论&quot;&gt;&lt;/a&gt;信息论&lt;/h2&gt;&lt;p&gt;信息论是应用数学的一个分支，主要研究对一个信号能够提供信息的多少。&lt;/p&gt;
&lt;p&gt;信息论的基本思想是，一个不太可能的事件发生比非常可能的事件发生，能提供更多的信息。&lt;/p&gt;
&lt;p&gt;量化信息的三个性质：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;非常可能的事件信息量比较少，更不可能发生的事件具有更高的信息量&lt;/li&gt;
&lt;li&gt;独立事件应具有增量的信息。比如投两次硬币正面向上的信息，应该是投掷一次正面朝上的信息量的2倍。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;香农熵用来对整个概率分布中的不确定性总量进行量化。&lt;br&gt;$$&lt;br&gt;H(x) = \mathbb{E}_{x - P}[I(x)] = -\mathbb{E}_{x - P}[\log P(x)]&lt;br&gt;$$&lt;/p&gt;
&lt;p&gt;KL散度&lt;/p&gt;
&lt;p&gt;如果我们对于同一随机变量$\mathbb{x}$有两个单独的概率分布$P(x)$和$Q(x)$，我们使用KL散度(Kullback-Leibler divergence)来衡量分布的差异。&lt;br&gt;$$&lt;br&gt;D_{KL}(P||Q) = \mathbb{E}_{x - P}[\log {\frac {P(x)} {Q(x)}}] = \mathbb{E}_{x - P}[\log P(x) - \log Q(x)]&lt;br&gt;$$&lt;/p&gt;
&lt;p&gt;KL散度非负。在离散型变量情况下，KL散度为0当且仅当P,Q为相同分布。在连续型变量情况下，KL散度为0当且仅当P,Q“几乎处处相同”。&lt;br&gt;但KL散度不是真的距离因为它不是对称的，对于某两个分布P,Q，$D_{KL}(P||Q) \neq D_{KL}(Q||P)$。&lt;/p&gt;
&lt;p&gt;交叉熵$H(P,Q) = H(P) + D_{KL}(P||Q)$，也可以描述两个分布的差异。&lt;br&gt;$$&lt;br&gt;H(P,Q) = -\mathbb{E}_{x - P} {\log Q(x)}&lt;br&gt;$$&lt;/p&gt;
&lt;h2 id=&quot;Summary&quot;&gt;&lt;a href=&quot;#Summary&quot; class=&quot;headerlink&quot; title=&quot;Summary&quot;&gt;&lt;/a&gt;Summary&lt;/h2&gt;&lt;p&gt;深度学习需要掌握的数学基础主要包括线性代数，概率论，其他的包括微积分也是必不可少的，信息论则是计算机科学的基础之一。&lt;/p&gt;
&lt;h2 id=&quot;References&quot;&gt;&lt;a href=&quot;#References&quot; class=&quot;headerlink&quot; title=&quot;References&quot;&gt;&lt;/a&gt;References&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://ogbh7uglm.bkt.clouddn.com/MatrixCookBook.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Matrix Cook Book&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://ogbh7uglm.bkt.clouddn.com/DeepLearningBook.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Deep Learning book&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;深度学习需要的数学基础同机器学习所需的数学基础类似，包括三大块：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;线性代数&lt;/li&gt;
&lt;li&gt;概率论与数理统计&lt;/li&gt;
&lt;li&gt;信息论基础&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;分三部分摘要如下，&lt;/p&gt;
&lt;h2 id=&quot;线性代数&quot;&gt;&lt;a href=&quot;#线
    
    </summary>
    
      <category term="深度学习 | Deep Learning" scheme="http://whatbeg.com/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Deep-Learning/"/>
    
    
      <category term="Deep Learning" scheme="http://whatbeg.com/tags/Deep-Learning/"/>
    
      <category term="深度学习" scheme="http://whatbeg.com/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>三国大事年表</title>
    <link href="http://whatbeg.com/2017/08/01/threekingdomlist.html"/>
    <id>http://whatbeg.com/2017/08/01/threekingdomlist.html</id>
    <published>2017-08-01T07:03:57.000Z</published>
    <updated>2017-08-01T07:20:55.724Z</updated>
    
    <content type="html">&lt;style&gt;
table th:first-of-type {
    width: 100px;
}
&lt;/style&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;公元年份&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;朝代年号&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;大事记&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;184&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;中平元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;2月  黄巾起义。玄德年二十八岁，刘关张桃园三结义。10月，张角病死。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;185&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;中平二年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;186&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;中平三年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;187&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;中平四年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;曹操任东郡太守。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;188&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;中平五年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;189&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;中平六年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;9月　董卓废少帝刘辩为弘农王，立九岁的陈留王刘协为帝，是为献帝。 　12月　曹操号召各镇诸侯共起讨伐董卓。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;190&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;初平元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;1月　各路诸侯起兵反董卓。董卓令李儒毒死弘农王(少帝) 卒年15岁。 2月　董卓焚洛阳，迁都长安，洛阳古都残破。公孙度自立为辽东侯。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;191&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;初平二年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;孙坚破董卓，斩华雄。袁绍夺州牧韩馥的冀州，自领州牧。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;192&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;初平三年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;4月　王允设连环计，吕布杀死董卓。6月　李傕、郭汜围长安，杀王允，败吕布。曹操击败青州黄巾军，收编为“青州兵”，实力得以壮大。孙坚攻击刘表，战死。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;193&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;初平四年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;曹操东征徐州，大败陶谦。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;194&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;兴平元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;吕布攻击曹操。陶谦病亡，刘备领徐州牧。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;195&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;兴平二年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;10月 曹操领兖州牧。孙策攻打江东大败刘繇。李傕、郭汜争夺献帝。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;196&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;7月　献帝在杨奉等人护送下，回长安。吕布占徐州，刘备投曹操。曹操始兴屯田，将献帝劫持到许。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;197&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安二年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;袁术在寿春称帝。曹操讨伐张绣，失败。袁绍占领冀、幽、青、并四州。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;198&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安三年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;9月　吕布攻打刘备，破小沛。12月　曹操擒杀吕布。周瑜同小乔成亲。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;199&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安四年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;11月 张绣投降曹操。董承与王子服等密谋除曹操。孙策袭取庐江，败刘勋。刘备讨伐袁术，袁术病死。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;200&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安五年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;曹操诛杀董承一伙。孙策遇刺身亡，孙权继位。陈琳撰写讨曹檄文，官渡之战开始。10月 曹操偷袭乌巢。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;201&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安六年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;曹操败袁绍于仓亭。刘备投奔刘表。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;202&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安七年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;5月　袁绍病死。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;203&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安八年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;孙权讨伐黄祖。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;204&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安九年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;曹操平定冀州。辽东公孙度死，子公孙康继位。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;205&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安十年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;曹操平定青州。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;206&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安十一年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;曹操平定并州。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;207&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安十二年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;8月　曹操大破乌桓，消灭袁氏残余势力，统一了北方。刘备三顾茅庐请出诸葛亮。曹操从南匈奴赎回蔡文姬。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;208&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安十三年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;6月　曹操封为汉丞相。7月　曹操南征刘表。8月　刘表病死。曹操杀孔融。9月　刘琮投降曹操。11月　赤壁之战，曹操被孙刘联军打败。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;209&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安十四年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;10月 刘备与孙权之妹成亲。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;210&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安十五年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;曹操建成铜雀台。周瑜亡。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;211&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安十六年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;曹操攻破马超。刘备入川。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;212&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安十七年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;10月 曹操南下进攻濡须口。刘备驻扎霞萌关。孙权移治秣陵，改名建业。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;213&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安十八年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;5月　汉献帝封曹操为魏公，加九锡。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;214&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安十九年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;5月　孙权攻破宛城。7月　孙权进攻合肥，被张辽击败。10月　献帝、伏后与国丈伏完密谋除曹操，事泄，曹操诛杀众人。刘璋投降刘备，刘备自领益州牧。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;215&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安二十年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;7月　曹操征张鲁。11月　张鲁降曹操。逍遙津之战。曹操在濡须打败孙权&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;216&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安二十一年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;曹操称魏王。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;217&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安二十二年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;2月　曹操进攻濡须口，孙权败。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;218&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安二十三年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;曹彰大破乌桓军，鲜卑部落投降，北方平定。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;219&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安二十四年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;7月　刘备进位汉中王。关羽水淹七军。 10月　关羽失荆州，被孙权杀害。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;220&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;建安二十五年 （魏黄初元年）&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;1月　曹操病亡。10月　&lt;strong&gt;曹丕称帝&lt;/strong&gt;，建魏国，改黄初元年。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;221&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏黄初二年，蜀章武元年，&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;4月　&lt;strong&gt;刘备称帝&lt;/strong&gt;。刘备伐吴。张飞遇害。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;222&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏黄初三年，吴黄武元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;孙权称吴王。彝陵之战，陆逊火烧连营，大败刘备。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;223&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏黄初四年，蜀建兴元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;4月　刘备死于白帝城，刘禅继帝位。8月　曹丕五路伐蜀。蜀吴重修和好。雍闿叛乱。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;224&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏黄初五年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;225&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏黄初六年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;诸葛亮南征。诸葛亮七擒七纵孟获，平定蜀国南方。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;226&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏黄初七年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;曹丕病亡，曹睿继位。12月　曹睿封司马懿为骠骑大将军。孙权围攻江夏，兵败。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;227&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏太和元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;诸葛亮上书北伐。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;228&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏太和二年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;诸葛亮第一次北伐。姜维降蜀。马谡失街亭。周鲂诈降诱曹魏攻吴，陆逊大败曹休。诸葛亮第二次北伐。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;229&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏太和三年，吴黄龙元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;strong&gt;孙权称帝&lt;/strong&gt;。诸葛亮第三次北伐。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;230&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏太和四年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;吴派卫温、诸葛直航海到夷洲。诸葛亮第四次北伐。曹真病亡。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;231&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏太和五年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;诸葛亮第五次北伐。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;232&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏太和六年，吴嘉禾元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;233&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏太和七年 （魏青龙元年）&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;234&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏青龙二年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;诸葛亮六出祁山。8月　诸葛亮病逝于五丈原。吴大举攻魏合肥。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;235&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏青龙三年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;1月　曹睿封司马懿为太傅。马钧制造司南车和水转百戏。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;236&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏青龙四年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;237&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏青龙五年 （魏景初元年）&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;辽东公孙渊自立为燕王。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;238&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏景初二年，蜀延熙元年，吴赤乌元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;司马懿平辽东，杀公孙渊。日本邪马台女王卑弥呼派使者到魏，魏封卑弥呼为“亲魏倭王”。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;239&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏景初三年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;1月　曹睿亡，曹芳继位。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;240&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏正始元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;蜀将张嶷平定蛮族之乱。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;241&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏正始二年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏国在淮河兴修水利。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;242&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏正始三年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;孙权派军攻打海南岛。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;243&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏正始四年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;244&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏正始五年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;曹爽派兵攻打蜀汉不利，伤亡惨重。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;245&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏正始六年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;吴太子孙和与鲁王孙霸争权，陆逊因受牵连，忧愤而死。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;246&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏正始七年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;毌丘俭两度攻破高句丽。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;247&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏正始八年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;蜀姜维出陇右攻魏，接应附蜀的羌、胡部落。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;248&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏正始九年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;司马懿封为丞相。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;249&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏正始十年 （魏嘉平元年）&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;1月　司马懿杀曹爽一伙。夏侯霸降蜀。姜维伐魏。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;250&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏嘉平二年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;孙权废太子孙和为庶人，赐鲁王孙霸死，立孙亮为太子。姜维攻魏西平失败。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;251&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏嘉平三年，吴太元元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏国太尉王凌阴谋叛变，被司马懿平定。7月　司马懿亡。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;252&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏嘉平四年，吴神凤元年（吴建兴元年）&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;司马懿长子司马师为大将军。孙权亡，孙亮继位。司马昭攻吴，失败。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;253&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏嘉平五年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;诸葛恪进攻魏国，无功而返。姜维攻魏狄道失败。吴孙峻诛杀诸葛恪。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;254&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏嘉平六年 （魏正元元年），吴五凤元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;9月　司马师废曹芳。10月　曹髦继位。吴孙英谋杀孙峻未果。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;255&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏正元二年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;镇东将军毌丘俭与扬州刺史文钦讨伐司马师。司马师亡。司马昭为大将军。姜维攻魏狄道，先胜后败。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;256&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏正元三年 （魏甘露元年），吴太平元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;4月　司马昭讨伐诸葛诞。姜维伐魏被邓艾击败。吴孙峻死，弟孙琳专吴政。孙綝杀死滕胤等人。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;257&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏甘露二年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏诸葛诞与孙吴联合起兵反魏。姜维出骆谷攻魏失败。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;258&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏甘露三年，蜀景耀元年，吴永安元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏军攻破寿春，斩诸葛诞。孙綝废吴帝孙亮为会稽王，立琅琊王孙休为帝。孙休与丁奉设计杀死孙綝。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;259&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏甘露四年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;260&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏甘露五年 （魏景元元年）&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;5月　贾充、成济杀死曹髦。6月　曹奂继位。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;261&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏景元二年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;262&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏景元三年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;10月 姜维攻魏，被邓艾击败，退屯沓中。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;263&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏景元四年，蜀炎兴元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;司马昭三路伐蜀，&lt;strong&gt;蜀亡&lt;/strong&gt;。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;264&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏景元五年 （咸熙元年），吴元兴元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;钟会和姜维密谋失败被杀。司马昭称晋王。孙休亡，孙皓继位。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;265&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;魏咸熙二年 （晋泰始元年），吴甘露元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;司马昭亡，其子司马炎继任晋王。12月 司马炎废曹奂为陈留王，自称晋武帝，建立西晋，&lt;strong&gt;魏亡&lt;/strong&gt;。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;266&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;晋泰始二年，吴宝鼎元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;267&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;晋泰始三年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;268&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;晋泰始四年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;269&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;晋泰始五年，吴建衡元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;270&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;晋泰始六年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;271&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;晋泰始七年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;吴孙皓出兵攻晋，因士兵怨恨而止。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;272&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;晋泰始八年，吴凤凰元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;司马炎派杨肇、羊祜等率军支持战略要地西陵。陆抗大败杨肇，杀步阐。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;273&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;晋泰始九年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;274&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;晋泰始十年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;275&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;晋咸宁元年，吴天册元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;276&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;晋咸宁二年，吴天玺元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;277&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;晋咸宁三年，吴天纪元年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;晋文鸯击破鲜卑族。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;278&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;晋咸宁四年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;羊祜死、杜预驻扎襄阳。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;279&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;晋咸宁五年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;西晋出动六路兵马攻打吴国。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;280&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;晋咸宁六年&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;西晋消灭吴国，吴帝孙皓投降，&lt;strong&gt;吴亡&lt;/strong&gt;。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
</content>
    
    <summary type="html">
    
      &lt;style&gt;
table th:first-of-type {
    width: 100px;
}
&lt;/style&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;公元年份&lt;/th&gt;
&lt;th style=&quot;text-
    
    </summary>
    
      <category term="读书 | Reading" scheme="http://whatbeg.com/categories/%E8%AF%BB%E4%B9%A6-Reading/"/>
    
    
      <category term="三国" scheme="http://whatbeg.com/tags/%E4%B8%89%E5%9B%BD/"/>
    
  </entry>
  
  <entry>
    <title>Linux vim技巧大观</title>
    <link href="http://whatbeg.com/2017/07/08/vim.html"/>
    <id>http://whatbeg.com/2017/07/08/vim.html</id>
    <published>2017-07-08T06:38:15.000Z</published>
    <updated>2018-01-30T05:51:40.649Z</updated>
    
    <content type="html">&lt;h5 id=&quot;批量注释-多行注释&quot;&gt;&lt;a href=&quot;#批量注释-多行注释&quot; class=&quot;headerlink&quot; title=&quot;批量注释 / 多行注释&quot;&gt;&lt;/a&gt;批量注释 / 多行注释&lt;/h5&gt;&lt;p&gt;多行注释：&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;vim&lt;/code&gt;打开文件，按&lt;code&gt;Ctrl + v&lt;/code&gt;进入可视块模式visual block，然后按&lt;code&gt;j&lt;/code&gt;往下选取（或&lt;code&gt;k&lt;/code&gt;往上选取）需要注释的行，做一个标记。（&lt;code&gt;h&lt;/code&gt;,&lt;code&gt;j&lt;/code&gt;,&lt;code&gt;k&lt;/code&gt;,&lt;code&gt;l&lt;/code&gt;在此模式中分别为左，下，上，右的功能，也可用上下左右箭头键代替）&lt;/li&gt;
&lt;li&gt;按 &lt;code&gt;I&lt;/code&gt; 进入编辑模式，插入注释符，如&lt;code&gt;#&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;按&lt;code&gt;esc&lt;/code&gt;键即可全部注释。（有些环境需两次按键）&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;取消多行注释：&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;vim&lt;/code&gt;打开文件，按&lt;code&gt;Ctrl + v&lt;/code&gt;进入可视块模式visual block，然后按&lt;code&gt;L&lt;/code&gt;往右选取注释符所占的列，如&lt;code&gt;//&lt;/code&gt;占两列，则选中两列。&lt;/li&gt;
&lt;li&gt;按&lt;code&gt;j&lt;/code&gt;或&lt;code&gt;k&lt;/code&gt;选中需要取消的行。&lt;/li&gt;
&lt;li&gt;按&lt;code&gt;d&lt;/code&gt;即可全部取消注释。&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h5 id=&quot;查找字符串出现的次数&quot;&gt;&lt;a href=&quot;#查找字符串出现的次数&quot; class=&quot;headerlink&quot; title=&quot;查找字符串出现的次数&quot;&gt;&lt;/a&gt;查找字符串出现的次数&lt;/h5&gt;&lt;p&gt;在所有行中查找 字符串 出现的次数&lt;br&gt;&lt;figure class=&quot;highlight elixir&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;:%s/&lt;/span&gt;字符串/&amp;amp;&lt;span class=&quot;regexp&quot;&gt;/gn&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在m和n行之间查找 字符串 出现的次数&lt;br&gt;&lt;figure class=&quot;highlight coffeescript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;:m,ns&lt;span class=&quot;regexp&quot;&gt;/字符串/&lt;/span&gt;&amp;amp;/gn&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;vim字符串查找与替换&quot;&gt;&lt;a href=&quot;#vim字符串查找与替换&quot; class=&quot;headerlink&quot; title=&quot;vim字符串查找与替换&quot;&gt;&lt;/a&gt;vim字符串查找与替换&lt;/h5&gt;&lt;figure class=&quot;highlight elixir&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/A          &lt;span class=&quot;comment&quot;&gt;# 查找A （从上往下）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;?A          &lt;span class=&quot;comment&quot;&gt;# 查找A （从下往上）  &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;:%s/A/B/g&lt;/span&gt;   &lt;span class=&quot;comment&quot;&gt;# 将所有行的A替换为B&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;:%s/A/B/&lt;/span&gt;    &lt;span class=&quot;comment&quot;&gt;# 将所有行的第一个A替换为B&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;:s/A/B/g&lt;/span&gt;    &lt;span class=&quot;comment&quot;&gt;# 替换当前行所有A为B&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h5 id=&quot;批量注释-多行注释&quot;&gt;&lt;a href=&quot;#批量注释-多行注释&quot; class=&quot;headerlink&quot; title=&quot;批量注释 / 多行注释&quot;&gt;&lt;/a&gt;批量注释 / 多行注释&lt;/h5&gt;&lt;p&gt;多行注释：&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;
    
    </summary>
    
      <category term="计算机相关 | CS.Related" scheme="http://whatbeg.com/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9B%B8%E5%85%B3-CS-Related/"/>
    
    
      <category term="Linux" scheme="http://whatbeg.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>读《科学研究的艺术》</title>
    <link href="http://whatbeg.com/2017/06/07/artofresearch.html"/>
    <id>http://whatbeg.com/2017/06/07/artofresearch.html</id>
    <published>2017-06-07T08:39:44.000Z</published>
    <updated>2017-12-11T13:31:11.701Z</updated>
    
    <content type="html">&lt;p&gt;陈校长的悦读经典计划开出了一个非常不错的书单，包括了各个学科的经典书籍，经史子集，诸咸皆备，感觉可以看上两三年的了。这次抓到一本《科学研究的艺术》，看名字挺6的，于是借来看了看，有一些启发，可以与读者分享。&lt;/p&gt;
&lt;p&gt;本书的作者是剑桥大学的一个动物病理学教授，名叫贝弗里奇，所以说本书几乎所有的具体例子和一些论述都是关于生物学，病理学的，作为非此专业的我们来说，只需要理解其基本思想即可。&lt;/p&gt;
&lt;p&gt;书中论述的几章包括，准备工作，实验，机遇，假说，想象力，直觉，推理，观察，困难，战略战术，以及科学家本身。&lt;/p&gt;
&lt;p&gt;下面将扼要描述下每章的重要思想。&lt;/p&gt;
&lt;h2 id=&quot;准备工作&quot;&gt;&lt;a href=&quot;#准备工作&quot; class=&quot;headerlink&quot; title=&quot;准备工作&quot;&gt;&lt;/a&gt;准备工作&lt;/h2&gt;&lt;p&gt;过多的阅读可能会损害创造力，旧的成见对于新的见解的产生可能有妨碍作用。原因可能如下，当满载丰富知识的头脑思考问题时，会不自觉的偏向于相应的知识，如果这些知识能够解决问题，那么很好，如果无法解决，那么可能会这些知识可能会使得头脑很难想象出一条新颖独创的路。拜伦写道，“要有独到之间必须多思少读，但这是不可能的，因为在学会思考之前势必先已阅读.”。（窃以为，完全不阅读也是不可能的，否则无法产生思考的方向，也不知道问题的进展，缺乏一些必要的基础知识等都会使得问题的解决走一些弯路，甚至无法开展。）&lt;br&gt;解决这个问题的一个办法即为批判式阅读，用阅读来启发思想，而不是填满思想。尽信书不如无书。&lt;br&gt;成功的科学家往往兴趣广泛，因为他们更容易将有关联的观点联系起来。&lt;br&gt;对于普遍规律具有清晰的概念，而不是把它们当成一成不变的法则，对于创造性思维来说，见森林比见树木来得更为重要。&lt;br&gt;略读。文章的索引卡片。&lt;br&gt;阅读一些科学伟人的生平著作，参加科学会议是很有帮助的。&lt;/p&gt;
&lt;p&gt;着手研究问题：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;决定研究的题目。最好在实验室的研究范围内选择题目，就能够得益于老师同学的指导和关注。初学研究工作的人最好选择一个很可能出成果的题目，而又不超出其技术能力。&lt;/li&gt;
&lt;li&gt;明确这方面已经做过哪些研究。表现为对有关文献的充分研究，即所谓的“调研”阶段。（这里有作者在书中反复提到的一句话：“把人们观察到的现象同人们对这些现象的解释分开”。）&lt;br&gt;整理资料，弄清资料之间的相互关系并试图规定课题等做法在这一阶段都是有益的。&lt;/li&gt;
&lt;li&gt;形式化。这一阶段，研究人员可以将课题分割成若干公式化的问题，即所谓的形式化，并开始从实验入手。准备工作阶段，应注意寻找现有知识上的空档，不同作者报告中的差别，一些矛盾和线索等。&lt;/li&gt;
&lt;li&gt;实验。实验的成功与否主要取决于准备工作的细致程度。一流科学家一般实现对课题加以周密思考，并将课题分成若干关键问题，然后精心设计为这些问题提供答案的实验。（我对这点深有同感，以前跑实验经常会过于随意，想着反正有机器，有时间，一旦实验结果不满意，变换一下实验设置又会马上重新跑一下，直到遇到比较好的结果，这种毫无头绪的搞法无形中浪费了许多时间，实际上实验应该是用来验证某些猜想，回答某些问题的，过多盲目的跑实验那是数据竞赛做的事。在一定程度上，设计实验也是一门艺术。）&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;实验&quot;&gt;&lt;a href=&quot;#实验&quot; class=&quot;headerlink&quot; title=&quot;实验&quot;&gt;&lt;/a&gt;实验&lt;/h2&gt;&lt;p&gt;应该尽可能地在研究工作的开头做一项简单的关键性试验，以判断所考虑的主要假说是否成立。&lt;br&gt;一次成功的实验，最基本的条件就是能够重现。&lt;br&gt;做实验时，在技术要点上采取极其审慎的态度是非常值得的。&lt;br&gt;对实验工作的全部细节进行详尽的记录是一条基本而重要的原则。&lt;br&gt;实验有时也会给人以十分错误的印象，最常见的原因是因为技术上的错误，所以实验人员应该对自己的技术规程掌握透彻并极端熟练，才能够真正信赖实验结果。&lt;/p&gt;
&lt;h2 id=&quot;机遇&quot;&gt;&lt;a href=&quot;#机遇&quot; class=&quot;headerlink&quot; title=&quot;机遇&quot;&gt;&lt;/a&gt;机遇&lt;/h2&gt;&lt;p&gt;这一章主要论述机遇在科学发现中的作用，并且举了许多机遇导致重大科学发现的例子（主要是生物学），具体例子不再细说，只是我们可以提取的信息是，在实验出现异常情况的时候，不要让异常结果从我们的眼皮底下溜过去，因为有时候异常情况往往催生了新的发现。由于以重要线索为形式的机会并不多见，所以需要做好准备，保持敏锐的观察力，保持警觉。如何解释线索也很重要。&lt;/p&gt;
&lt;p&gt;光有上面这些还不够，很有可能对于某个发现，我们不能对其做深入研究，比如弗莱明早在1929年就发现了青霉素的粗制剂，但是没有能够制成一种治疗用的药物，知道后来弗洛里才将青霉素发展成药物，从而挽救了众多的生命。&lt;br&gt;缺乏应用，遭到冷淡和反对，这些都是一个新发现可能会遇到的阻碍。&lt;br&gt;总的来说，保持想象力，鉴赏力和对一切未经解释的观察和现象进行思考的习惯裨益甚多。&lt;/p&gt;
&lt;h2 id=&quot;假说&quot;&gt;&lt;a href=&quot;#假说&quot; class=&quot;headerlink&quot; title=&quot;假说&quot;&gt;&lt;/a&gt;假说&lt;/h2&gt;&lt;p&gt;假说是研究工作者最关键的一种思想方法，许许多多的实验与观测都是针对验证假设来的。&lt;br&gt;当第一次实验或观测的结果符合预期的结果时，实验人员还需进一步地确认，从实验中搜寻证明，方能够确信自己的设想。（这可能是因为，实验的步骤中，可能会出现各种各样大的或者小的错误，还有可能假说只在特定的实验条件下才会成立的缘故。）&lt;br&gt;当第一次实验或观测的结果不符合预期结果时，有时可以用一种起澄清作用的补充性假说来适应矛盾，即增加条件。&lt;br&gt;须知：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;不要抱住已证明无用的设想不放。&lt;/li&gt;
&lt;li&gt;在实验或者观察时，需要保持客观态度，保持使自己的意见和愿望服从客观事实，客观证据的习惯。&lt;/li&gt;
&lt;li&gt;对设想进行批判的审查。&lt;/li&gt;
&lt;li&gt;对错误的观念应避之三舍，因为一旦相信了某种错误的设想之后，即使观察到了矛盾的事实，你也不会放弃它，知道提出了更符合新事实的假说才会被丢弃。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;想象力&quot;&gt;&lt;a href=&quot;#想象力&quot; class=&quot;headerlink&quot; title=&quot;想象力&quot;&gt;&lt;/a&gt;想象力&lt;/h2&gt;&lt;p&gt;也许，一个训练有素的思想家的主要特点在于，他不在佐证不足的情况下轻易做出结论。&lt;br&gt;反复思考某一个问题，给予有步骤的和连贯的考虑，这可能比让其任意在脑海中自由运行更有效率，当然，自由地运行也有其作用，也是必不可少的。&lt;br&gt;如果具有有关学科甚至远缘学科的广博学识，那么产生独创见解的可能性就越大，这是因为，独创性常常在于发现两个或以上研究对象或者设想之间的联系或者相似之处，而原来以为这些对象或设想彼此没有联系。（学科的交叉常常能有意想不到的收获，比如统计物理学与优化理论的结合，产生了模拟退火算法，生物学与优化理论的结合，产生了遗传算法等等，相应的，在同一学科中也常常可以实现这种交叉，比如，常常首先出现两种解决方法，双方的优劣都很明显并且互补，这时，将二者统合，取长补短，又能够形成一种新的解决办法，从而使得效果提升或者效率提升，从而领域又得以推进）&lt;br&gt;其实，不管其起源如何，绝大多数的假说都被证明是错误的。但是不能因为怕犯错误就不去发现，谨小慎微的科学家既不犯错误，也不会又发现。&lt;br&gt;科学家的好奇心，通常表现为探索对他所注意到的，但尚无令人满意解释的事物或其相互关系的认识。科学家有一种强烈的愿望，就是寻求其间并无明显联系的大量资料背后的那些原理。&lt;br&gt;认识到困难或难题的存在，能够激励设想的产生。&lt;br&gt;学术讨论在以下三个方面对创造性思维活动有着促进作用：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;别人可能提出有益的建议&lt;/li&gt;
&lt;li&gt;一个新设想可能有两三个人集中他们的知识或设想而产生&lt;/li&gt;
&lt;li&gt;讨论也是揭露谬误的有效方法&lt;/li&gt;
&lt;li&gt;给人激励与鼓舞，是认真做&lt;/li&gt;
&lt;li&gt;帮助人们摆脱已经形成的，事实证明无成效的思想习惯，即摆脱条件限制的思考&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;与实验室同仁们三五成群共进午餐能够获得大量机会进行一些非正式的讨论，也可以交流各自的兴趣与问题，热情是富有感染力的。&lt;/p&gt;
&lt;p&gt;有时对一个问题思考过久，有可能重复同样的思路，或者钻入牛角尖。这时，我们可以采用两种方法：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;把问题暂时搁置 （有时候对一个问题百思不得其解，可以适当地先放一放，等到过一段时间再来接触时，往往有新的进展或发现）&lt;/li&gt;
&lt;li&gt;同别人讨论，或是向领域外的人讲述你的工作&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;直觉&quot;&gt;&lt;a href=&quot;#直觉&quot; class=&quot;headerlink&quot; title=&quot;直觉&quot;&gt;&lt;/a&gt;直觉&lt;/h2&gt;&lt;p&gt;作者列出了一些有利于产生直觉的条件：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;对问题持续自觉思考以作思想上的准备&lt;/li&gt;
&lt;li&gt;防止注意力分散，多数人必须不受中断与干扰&lt;/li&gt;
&lt;li&gt;直觉经常出现在不研究问题的时候&lt;/li&gt;
&lt;li&gt;通过诸如讨论，批判阅读和写作等与他人的思想接触，对直觉有所促进&lt;/li&gt;
&lt;li&gt;直觉来去无踪，最好用笔记记下来&lt;/li&gt;
&lt;li&gt;不利影响还有：脑力和体力的疲劳，对问题工作过度，琐事刺激和噪音&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在科学研究中，我们的思维和行动常常受限于我们的科学鉴赏力，即常常不得不受以鉴赏力为依据的个人判断的指导。&lt;/p&gt;
&lt;h2 id=&quot;推理&quot;&gt;&lt;a href=&quot;#推理&quot; class=&quot;headerlink&quot; title=&quot;推理&quot;&gt;&lt;/a&gt;推理&lt;/h2&gt;&lt;p&gt;作者认为，推理不能产生新发现，但是作者应该指的是纯粹的推理不能产生新的发现，而在事实或者实验，观测基础上做一定的推理则有可能产生新的发现。而且推理在科学研究中也起到了巨大的作用，为此，作者在后面单独叙述了一节。&lt;br&gt;少使用未经证实的假定。&lt;br&gt;人们很容易抗拒那些不符合自己看法的观点。科学家绝不能容许自己的思想固定不变，不仅见解不能固定不变，而且对待当时流行观点的态度也不能一成不变。&lt;br&gt;任何公认的观念或“确立的原则”，一旦不符合观察到的现象，都不能视为毋庸置疑。&lt;br&gt;类比法很多时候作用很大， 但是也常使人误入迷途。&lt;/p&gt;
&lt;h2 id=&quot;观察&quot;&gt;&lt;a href=&quot;#观察&quot; class=&quot;headerlink&quot; title=&quot;观察&quot;&gt;&lt;/a&gt;观察&lt;/h2&gt;&lt;p&gt;“知识来源于对周围事件中相似处和重现情况的注意” – 特罗特&lt;br&gt;观察者往往不自觉地产生谬误。&lt;br&gt;有效的观察是指注意到某个事物，并通过将它和某个注意到的或已知的事物联系起来，赋予其意义。&lt;br&gt;观察到一切是不可能的，所以选定范围很重要，但是不代表我们需要忽略其他现象，尤其是特殊现象。&lt;/p&gt;
&lt;h2 id=&quot;困难&quot;&gt;&lt;a href=&quot;#困难&quot; class=&quot;headerlink&quot; title=&quot;困难&quot;&gt;&lt;/a&gt;困难&lt;/h2&gt;&lt;p&gt;批判的思想方法和怀疑态度之间是泾渭分明的。我们所追求的是正直，客观的判断佐证，尽可能摆脱成见，尤其是没有事实支撑的成见，佐证不足时不宜轻易下结论。&lt;br&gt;研究的愉快比在于研究本身，因为其它方面的利益收获都是靠不住的。&lt;br&gt;人们对新设想有抗拒心理。&lt;/p&gt;
&lt;h2 id=&quot;战略与战术&quot;&gt;&lt;a href=&quot;#战略与战术&quot; class=&quot;headerlink&quot; title=&quot;战略与战术&quot;&gt;&lt;/a&gt;战略与战术&lt;/h2&gt;&lt;p&gt;关于应用研究和纯理论研究各有什么价值，引起了一些争论。&lt;br&gt;战略与战术针对的是研究计划而言，第一种是研究工作的实际处理，比如跑一两个实验，这相当于战争中的战术，第二种是时间较长，规模较大的计划，称之为战略。第三种则是研究方针的计划，主要由一些委员会来管。&lt;br&gt;在决定了研究方向以后，也不应埋头苦干像一匹拉车的马，只见脚下的路而不见路旁的景色。也不应只见树木，而要常常见见森林，在全局上有一些把握。&lt;/p&gt;
&lt;p&gt;关于纯理论研究和应用研究，作者认为这种分类较主观，不太严谨。通常所谓应用研究指的是，对具有实际意义的问题进行有目的的研究，而纯理论研究则完全是为了取得知识而取得知识。&lt;br&gt;在应用研究上，人们支持的是项目，而纯理论研究中，人们支持的是人。&lt;br&gt;许多新发现自应用研究而来。通常应用研究比纯理论研究更难出成果，因为研究人员必须坚持解决既定任务而不能随意追踪可能出现的、有希望的线索。并且，在应用研究方面，大多数的领域已被人探索过，很多简单的，显而易见的问题已被解决。&lt;br&gt;要解决实际问题，仅仅应用现有知识是不够的，我们经常会发现知识中需要填补的空白点。在应用研究中如果只限于解决现有问题而不去努力理解其内部原理，那么这种解决方法可能缺乏普遍意义，只能解决局部问题。&lt;br&gt;总的来说，我们既需要纯理论研究，又需要应用研究，二者是相辅相成的，互相促进的。&lt;br&gt;科学研究又分为探索性研究和发展性研究，相信我不说读者也能理解它们的意思。前者比较自由，富于冒险，有时重大发现，有时一无所得。而后者通常由按部就班，一丝不苟的科学家来做，他们安于巩固已有进展，在已开辟的领域取得小的进展，并通过付诸应用来充分利用已取得的成果，又称为“安全第一”的研究。不过，据我观察，大多数的研究应该算是后者，真正有成本，有人力去发展基础研究的机构相比于广大的发展性研究者来说显得有些小。&lt;/p&gt;
&lt;p&gt;“边缘”研究指的是在两门学科交接领域内进行的研究，科学家如果有广泛的科学基础，能够运用并联系两种学科中的知识，则很容易出成果。甲学科中一项普通的事实，原理或技术应用到乙学科时，可能非常新奇而有效。&lt;/p&gt;
&lt;p&gt;一切科学上的进展都是以先前的知识为基础的。&lt;br&gt;有的时候，决定一项研究的基本思想是来自应用或移植其它领域发现的新原理或新技术，这种取得进展的方法称为“移植法”。其有效，简便，在应用研究中用的最多。利用其他学科中采用的新技术是移植法的一种重要形式，所以说我们不应该对研究领域之外的至少是重大发展的技术毫无了解。&lt;br&gt;对于一个复杂过程，有时把这个过程分解成若干组成部分，分别加以考虑，这种方法常常很有帮助。&lt;br&gt;进行科学研究并无一定规律可循，研究人员应发挥自己的聪明才智，创新精神和判断能力，利用一切有用的方法。&lt;br&gt;经验给我们证明，充分理解了问题，就几乎一定能发现有用的事实。&lt;br&gt;当人们处于绝境时，另一个可以尝试的方法是：从头开始，从不同的角度看问题，找出新的途径。或者是与人讨论。&lt;br&gt;一般说来，研究一经开始，研究人员就应竭尽全力去完成，不宜频繁改变自己的任务，那样往往一事无成。&lt;br&gt;对研究的问题最好能定期回顾。但是，未获重要成果的研究工作则不宜发表，也不宜发表未得明确结论的研究工作，它使得科学期刊质量降低，并影响作者在有识之士心目中的声誉。&lt;br&gt;科学研究的一般战略是，研究时具有明确的目标，但同时保持警觉，注意发现并捕捉意外的时机。&lt;/p&gt;
&lt;h2 id=&quot;科学家&quot;&gt;&lt;a href=&quot;#科学家&quot; class=&quot;headerlink&quot; title=&quot;科学家&quot;&gt;&lt;/a&gt;科学家&lt;/h2&gt;&lt;p&gt;对于科学家来说，两条最基本的品格是对科学的热爱和难以满足的好奇心，但是光有这些还不够，聪明的资质，内在的干劲，勤奋的工作态度和坚韧不拔的精神都是必不可少的要素。&lt;br&gt;普通的考试并不足以判断研究能力的强弱。&lt;br&gt;人大体分为两类，一类人惯于对外界的影响起强烈的反应，不轻易接受现成的思想，习惯对别人教给自己的一切提出疑问；第二类人则习惯接受正规教育所传授的知识，更容易适应生活，他们头脑里充满了公认的观点和固定的看法，凡接收知识首先默认他们是对的，作者认为，这类人或者接近这种被动型的人不适于从事研究工作。&lt;br&gt;并不是所有人都能从事研究工作而有所成就的，在科研上没有成就不代表在其他方面的智力与能力上有所缺陷，科研仅仅是职业的一种而已。&lt;br&gt;米斯认为，实用的科学发现和技术有三种不同的研究方法，（1）理论的综合 （2）观察和实验 （3）发明。&lt;br&gt;根据科学家的思想方法，可以分为两类，一种是推测型，他们利用想象和直觉来得到解决方法，然后凭借实验与观察，对自己的假说加以检验。另一种是条理型的，他们一步步谨慎推理，进展缓慢，收集了大部分资料后才得出解决方法。&lt;br&gt;巴甫洛夫对有志于科学的青年的忠告：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;循序渐进&lt;/li&gt;
&lt;li&gt;谦虚&lt;/li&gt;
&lt;li&gt;热情&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;和年轻人接触有助于保持观点的敏锐新鲜。&lt;/p&gt;
&lt;h2 id=&quot;总结&quot;&gt;&lt;a href=&quot;#总结&quot; class=&quot;headerlink&quot; title=&quot;总结&quot;&gt;&lt;/a&gt;总结&lt;/h2&gt;&lt;p&gt;这本13万字的作品用5000多字简要总结了一下，之所以摘下这么多书中的句子，是因为本书提供了整个科学研究的方法论上的一些启发，相信对研究工作者和整个献身于科学工作或者工程工作的人们有所裨益。但是，书中只是给了一些要点和建议，并非对研究工作者提的要求，所以我们需要根据自己的情况来选择性的吸收，甚至完全撇开本书，仍然不妨碍研究工作者做出出色的成绩。所以，各取所需即可，希望能对迷惑的科研工作者或科研新手甚至广大工程人员有一定的启发，若如此，也不负本文了。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;陈校长的悦读经典计划开出了一个非常不错的书单，包括了各个学科的经典书籍，经史子集，诸咸皆备，感觉可以看上两三年的了。这次抓到一本《科学研究的艺术》，看名字挺6的，于是借来看了看，有一些启发，可以与读者分享。&lt;/p&gt;
&lt;p&gt;本书的作者是剑桥大学的一个动物病理学教授，名叫贝弗里
    
    </summary>
    
      <category term="读书 | Reading" scheme="http://whatbeg.com/categories/%E8%AF%BB%E4%B9%A6-Reading/"/>
    
    
      <category term="读书" scheme="http://whatbeg.com/tags/%E8%AF%BB%E4%B9%A6/"/>
    
  </entry>
  
  <entry>
    <title>Spark一些问题集锦【持续更新】</title>
    <link href="http://whatbeg.com/2017/05/28/sparkerror.html"/>
    <id>http://whatbeg.com/2017/05/28/sparkerror.html</id>
    <published>2017-05-28T02:04:35.000Z</published>
    <updated>2017-10-23T05:19:56.284Z</updated>
    
    <content type="html">&lt;p&gt;最近常跑Spark程序，&lt;br&gt;主要是分布式机器学习&lt;br&gt;和分布式深度学习这块，&lt;br&gt;因为模型经常很大，比如VGG等，&lt;br&gt;集群空余节点又不是很多，&lt;br&gt;跑起来有时候会吃力，&lt;br&gt;以及各种莫名其妙的安装问题，&lt;br&gt;配置问题，&lt;br&gt;运行问题，&lt;br&gt;运行中问题，&lt;br&gt;等等等等，&lt;br&gt;所以特地积累一下以备后查，&lt;br&gt;也方便后来者参考之。&lt;/p&gt;
&lt;h2 id=&quot;错误集锦&quot;&gt;&lt;a href=&quot;#错误集锦&quot; class=&quot;headerlink&quot; title=&quot;错误集锦&quot;&gt;&lt;/a&gt;错误集锦&lt;/h2&gt;&lt;h3 id=&quot;ClosedChannelException&quot;&gt;&lt;a href=&quot;#ClosedChannelException&quot; class=&quot;headerlink&quot; title=&quot;ClosedChannelException&quot;&gt;&lt;/a&gt;ClosedChannelException&lt;/h3&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; ERROR YarnClientSchedulerBackend:&lt;span class=&quot;number&quot;&gt;70&lt;/span&gt; - Yarn application has already exited with state FINISHED!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; ERROR SparkContext:&lt;span class=&quot;number&quot;&gt;91&lt;/span&gt; - Error initializing SparkContext.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;java&lt;span class=&quot;selector-class&quot;&gt;.lang&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.IllegalStateException&lt;/span&gt;: Spark context stopped while waiting &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; backend&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; ERROR TransportClient:&lt;span class=&quot;number&quot;&gt;245&lt;/span&gt; - Failed to send RPC &lt;span class=&quot;number&quot;&gt;7202466410763583466&lt;/span&gt; to /xx&lt;span class=&quot;selector-class&quot;&gt;.xx&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.xx&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.xx&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;54864&lt;/span&gt;: java&lt;span class=&quot;selector-class&quot;&gt;.nio&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.channels&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.ClosedChannelException&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; ERROR YarnSchedulerBackend&lt;span class=&quot;variable&quot;&gt;$YarnSchedulerEndpoint&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;91&lt;/span&gt; - Sending RequestExecutors(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,Map()) to AM was unsuccessful&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上面这几个错误通常一起爆出。&lt;br&gt;【原因分析】&lt;br&gt;可能是分配给node的内存太小，Spark默认启动两个executor，使用每个executor的内存为1G，而数据太大，导致yarn直接Kill掉了executor，IO也一并关闭，所以出现了&lt;code&gt;ClosedChannelException&lt;/code&gt;异常。&lt;br&gt;&lt;a href=&quot;http://stackoverflow.com/questions/27792839/spark-fail-when-running-pi-py-example-with-yarn-client-mode&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这里的错误&lt;/a&gt;分析[错误1]也有可能是由于Java 8的excessive memory allocation strategy&lt;br&gt;【解决方案】&lt;br&gt;根据&lt;a href=&quot;http://demo.aosustudio.com/12FAFEE6E5BE1F55356029F01C3AEEE1.AHtml&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这篇文章&lt;/a&gt;在&lt;code&gt;yarn-site.xml&lt;/code&gt;中添加如下配置：&lt;br&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.nodemanager.pmem-check-enabled&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;false&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.nodemanager.vmem-check-enabled&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;false&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;或者在执行命令时附带参数： &lt;code&gt;--driver-memory 5g --executor-memory 5g&lt;/code&gt;，将Job可用内存显式地增大。&lt;br&gt;或者在&lt;code&gt;spark/conf/spark-defaults.conf&lt;/code&gt;添加如下Poperty：&lt;br&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;spark&lt;span class=&quot;selector-class&quot;&gt;.driver&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.memory&lt;/span&gt;              &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;g&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;spark&lt;span class=&quot;selector-class&quot;&gt;.executor&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.memory&lt;/span&gt;            &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;g&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;甚至可以继续添加如下Property：&lt;br&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;spark&lt;span class=&quot;selector-class&quot;&gt;.yarn&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.executor&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.memoryOverhead&lt;/span&gt;          &lt;span class=&quot;number&quot;&gt;4096&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;spark&lt;span class=&quot;selector-class&quot;&gt;.yarn&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.driver&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.memoryOverhead&lt;/span&gt;            &lt;span class=&quot;number&quot;&gt;8192&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;spark&lt;span class=&quot;selector-class&quot;&gt;.akka&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.frameSize&lt;/span&gt;                        &lt;span class=&quot;number&quot;&gt;700&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;Lost-Executors-et-al&quot;&gt;&lt;a href=&quot;#Lost-Executors-et-al&quot; class=&quot;headerlink&quot; title=&quot;Lost Executors et. al.&quot;&gt;&lt;/a&gt;Lost Executors et. al.&lt;/h3&gt;&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;5.&lt;/span&gt; ERROR &lt;span class=&quot;attribute&quot;&gt;YarnScheduler&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;70&lt;/span&gt; - Lost executor &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;simple23&lt;/span&gt;: Container marked &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;failed&lt;/span&gt;: container_1490797147995_0000004 &lt;span class=&quot;keyword&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;host&lt;/span&gt;: simple23. Exit &lt;span class=&quot;attribute&quot;&gt;status&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;143.&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;Diagnostics&lt;/span&gt;: Container killed &lt;span class=&quot;keyword&quot;&gt;on&lt;/span&gt; request. Exit code is &lt;span class=&quot;number&quot;&gt;143&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Container exited &lt;span class=&quot;keyword&quot;&gt;with&lt;/span&gt; a non-zero exit code &lt;span class=&quot;number&quot;&gt;143&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Killed by external &lt;span class=&quot;keyword&quot;&gt;signal&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[Stage &lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;:===========================================&amp;gt;              (&lt;span class=&quot;number&quot;&gt;6&lt;/span&gt; + &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;) / &lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;6.&lt;/span&gt; ERROR &lt;span class=&quot;attribute&quot;&gt;TaskSetManager&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;70&lt;/span&gt; - Task stage &lt;span class=&quot;number&quot;&gt;17.2&lt;/span&gt; failed &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; times; aborting job&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;7.&lt;/span&gt; ERROR DistriOptimizer$:&lt;span class=&quot;number&quot;&gt;655&lt;/span&gt; - &lt;span class=&quot;attribute&quot;&gt;Error&lt;/span&gt;: &lt;span class=&quot;attribute&quot;&gt;org.apache.spark.SparkException&lt;/span&gt;: Job aborted due to stage &lt;span class=&quot;attribute&quot;&gt;failure&lt;/span&gt;: Task age &lt;span class=&quot;number&quot;&gt;17.2&lt;/span&gt; failed &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; times, most recent &lt;span class=&quot;attribute&quot;&gt;failure&lt;/span&gt;: Lost task &lt;span class=&quot;number&quot;&gt;0.3&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; stage &lt;span class=&quot;number&quot;&gt;17.2&lt;/span&gt; (TID &lt;span class=&quot;number&quot;&gt;90&lt;/span&gt;, simple21, executor &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;): &lt;span class=&quot;attribute&quot;&gt;java.util.concurrent.EnException&lt;/span&gt;: &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[Stage &lt;span class=&quot;number&quot;&gt;23&lt;/span&gt;:&amp;gt;                                                         (&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; + &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;) / &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;8.&lt;/span&gt; ERROR &lt;span class=&quot;attribute&quot;&gt;YarnScheduler&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;70&lt;/span&gt; - Lost executor &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;simple21&lt;/span&gt;: Container marked &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;failed&lt;/span&gt;: container_1490797147995_0004_01_000005 &lt;span class=&quot;keyword&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;host&lt;/span&gt;: simple21. Exit &lt;span class=&quot;attribute&quot;&gt;status&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;143.&lt;/span&gt; Diagn Container killed &lt;span class=&quot;keyword&quot;&gt;on&lt;/span&gt; request. Exit code is &lt;span class=&quot;number&quot;&gt;143&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Container exited &lt;span class=&quot;keyword&quot;&gt;with&lt;/span&gt; a non-zero exit code &lt;span class=&quot;number&quot;&gt;143&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Killed by external &lt;span class=&quot;keyword&quot;&gt;signal&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[Stage &lt;span class=&quot;number&quot;&gt;23&lt;/span&gt;:&amp;gt;                                                         (&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; + &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;) / &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;9.&lt;/span&gt; ERROR TransportResponseHandl- Still have &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; requests outstanding when connection from /&lt;span class=&quot;attribute&quot;&gt;xx.xx.xx.22&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;51442&lt;/span&gt; is closed&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;【原因分析】&lt;br&gt;由报错信息可以看出，yarn丢失了executor，极有可能还是因为executor被关闭了，所以还是要检查一下自己的driver-memory和executor-memory是不是够大。&lt;br&gt;【解决方案】&lt;br&gt;如上一个&lt;/p&gt;
&lt;h3 id=&quot;运行自带例子SparkPi时，NumberException&quot;&gt;&lt;a href=&quot;#运行自带例子SparkPi时，NumberException&quot; class=&quot;headerlink&quot; title=&quot;运行自带例子SparkPi时，NumberException&quot;&gt;&lt;/a&gt;运行自带例子SparkPi时，NumberException&lt;/h3&gt;&lt;p&gt;在Spark下运行自带SparkPi例子时，按如下运行：&lt;br&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;./bin/run-example org&lt;span class=&quot;selector-class&quot;&gt;.apache&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.Spark&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.examples&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.SparkPi&lt;/span&gt; spark:&lt;span class=&quot;comment&quot;&gt;//10.39.2.31:7077&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;出现错误：&lt;br&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Exception &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; thread &lt;span class=&quot;string&quot;&gt;&quot;main&quot;&lt;/span&gt; Java&lt;span class=&quot;selector-class&quot;&gt;.lang&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.NumberFormatException&lt;/span&gt;: For &lt;span class=&quot;selector-tag&quot;&gt;input&lt;/span&gt; string: &lt;span class=&quot;string&quot;&gt;&quot;spark://10.39.2.31:7077&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;【原因分析】&lt;br&gt;原因是SparkPi的参数错误，运行时第一个参数要么为核数，要么不加参数。&lt;br&gt;【解决方案】&lt;br&gt;按如下方式运行：&lt;br&gt;&lt;figure class=&quot;highlight autoit&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;./bin/&lt;span class=&quot;built_in&quot;&gt;run&lt;/span&gt;-example org.apache.Spark.examples.SparkPi &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; spark://&lt;span class=&quot;number&quot;&gt;10.39&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.2&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.31&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;7077&lt;/span&gt;     &lt;span class=&quot;meta&quot;&gt;# Standalone运行&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./bin/&lt;span class=&quot;built_in&quot;&gt;run&lt;/span&gt;-example org.apache.Spark.examples.SparkPi &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;local&lt;/span&gt;                       &lt;span class=&quot;meta&quot;&gt;# 本地运行&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;或&lt;br&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;./bin/run-example org&lt;span class=&quot;selector-class&quot;&gt;.apache&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.Spark&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.examples&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.SparkPi&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;HDFS端口错误&quot;&gt;&lt;a href=&quot;#HDFS端口错误&quot; class=&quot;headerlink&quot; title=&quot;HDFS端口错误&quot;&gt;&lt;/a&gt;HDFS端口错误&lt;/h3&gt;&lt;p&gt;程序中读取HDFS文件，地址设为&lt;code&gt;hdfs://122.3.2.20:2320/data&lt;/code&gt;，2320是hadoop client的端口，报错：&lt;br&gt;&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;java.io.IOException&lt;/span&gt;: Failed &lt;span class=&quot;keyword&quot;&gt;on&lt;/span&gt; local &lt;span class=&quot;attribute&quot;&gt;exception&lt;/span&gt;: &lt;span class=&quot;attribute&quot;&gt;com.google.protobuf.InvalidProtocolBufferException&lt;/span&gt;: Protocol message tag had invalid wire type.; Host &lt;span class=&quot;attribute&quot;&gt;Details&lt;/span&gt; : local host &lt;span class=&quot;attribute&quot;&gt;is&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;Server-020/122.3.2.20&quot;&lt;/span&gt;; destination host &lt;span class=&quot;attribute&quot;&gt;is&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;Server-020&quot;&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;2320&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;【原因分析】&lt;br&gt;hdfs在配置中的&lt;code&gt;defaultFS&lt;/code&gt;地址为&lt;code&gt;hdfs://122.3.2.20:9000&lt;/code&gt;，所以读取数据时端口不应为2320，应为9000。&lt;br&gt;【解决方案】&lt;br&gt;程序中读取数据语句改为；&lt;code&gt;hdfs://122.3.2.20:9000/data&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;java-net-BindException-地址已在使用-Address-already-in-use&quot;&gt;&lt;a href=&quot;#java-net-BindException-地址已在使用-Address-already-in-use&quot; class=&quot;headerlink&quot; title=&quot;java.net.BindException: 地址已在使用 Address already in use&quot;&gt;&lt;/a&gt;java.net.BindException: 地址已在使用 Address already in use&lt;/h3&gt;&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-07&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-08&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;14&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;41&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;668&lt;/span&gt; INFO org.apache.hadoop.service.&lt;span class=&quot;string&quot;&gt;AbstractService:&lt;/span&gt; Service NodeManager failed &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; state STARTED; &lt;span class=&quot;string&quot;&gt;cause:&lt;/span&gt; org.apache.hadoop.yarn.exceptions.&lt;span class=&quot;string&quot;&gt;YarnRuntimeException:&lt;/span&gt; java.net.&lt;span class=&quot;string&quot;&gt;BindException:&lt;/span&gt; Problem binding to [&lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;8040&lt;/span&gt;] java.net.&lt;span class=&quot;string&quot;&gt;BindException:&lt;/span&gt; 地址已在使用; For more details &lt;span class=&quot;string&quot;&gt;see:&lt;/span&gt;  &lt;span class=&quot;string&quot;&gt;http:&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;//wiki.apache.org/hadoop/BindException&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;org.apache.hadoop.yarn.exceptions.&lt;span class=&quot;string&quot;&gt;YarnRuntimeException:&lt;/span&gt; java.net.&lt;span class=&quot;string&quot;&gt;BindException:&lt;/span&gt; Problem binding to [&lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;8040&lt;/span&gt;] java.net.&lt;span class=&quot;string&quot;&gt;BindException:&lt;/span&gt; 地址已在使用; For more details &lt;span class=&quot;string&quot;&gt;see:&lt;/span&gt;  &lt;span class=&quot;string&quot;&gt;http:&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;//wiki.apache.org/hadoop/BindException&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ......&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Caused &lt;span class=&quot;string&quot;&gt;by:&lt;/span&gt; java.net.&lt;span class=&quot;string&quot;&gt;BindException:&lt;/span&gt; Problem binding to [&lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;8040&lt;/span&gt;] java.net.&lt;span class=&quot;string&quot;&gt;BindException:&lt;/span&gt; 地址已在使用; For more details &lt;span class=&quot;string&quot;&gt;see:&lt;/span&gt;  &lt;span class=&quot;string&quot;&gt;http:&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;//wiki.apache.org/hadoop/BindException&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ... &lt;span class=&quot;number&quot;&gt;13&lt;/span&gt; more&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Caused &lt;span class=&quot;string&quot;&gt;by:&lt;/span&gt; java.net.&lt;span class=&quot;string&quot;&gt;BindException:&lt;/span&gt; 地址已在使用&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ... &lt;span class=&quot;number&quot;&gt;21&lt;/span&gt; more&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-07&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-08&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;14&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;41&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;669&lt;/span&gt; INFO org.apache.hadoop.metrics2.impl.&lt;span class=&quot;string&quot;&gt;MetricsSystemImpl:&lt;/span&gt; Stopping NodeManager metrics system...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;【原因分析】&lt;br&gt;通过 &lt;code&gt;netstat -ant | grep &amp;quot;8040&amp;quot;&lt;/code&gt; 查看占用8040端口的进程，发现如下：&lt;br&gt;&lt;figure class=&quot;highlight julia&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tcp6       &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;      &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;::&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;8040&lt;/span&gt;                 &lt;span class=&quot;type&quot;&gt;::&lt;/span&gt;:*                    LISTEN&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;很可能是非常规关闭（如kill -9）Nodemanager,Worker,Datanode等导致。&lt;/p&gt;
&lt;p&gt;【解决方案】&lt;br&gt;由于未知进程号，但是想把它杀掉，采用&lt;br&gt;&lt;figure class=&quot;highlight cos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo fuser -&lt;span class=&quot;keyword&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;8040&lt;/span&gt;/tcp&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;成功杀死。&lt;/p&gt;
&lt;h3 id=&quot;InvalidResourceRequestException，核数过大&quot;&gt;&lt;a href=&quot;#InvalidResourceRequestException，核数过大&quot; class=&quot;headerlink&quot; title=&quot;InvalidResourceRequestException，核数过大&quot;&gt;&lt;/a&gt;InvalidResourceRequestException，核数过大&lt;/h3&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;运行BigDL程序如下：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dist/bin/bigdl&lt;span class=&quot;selector-class&quot;&gt;.sh&lt;/span&gt; -- spark-submit --master yarn --deploy-mode cluster --driver-memory &lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;g --driver-cores &lt;span class=&quot;number&quot;&gt;12&lt;/span&gt; --executor-memory &lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;g --num-executors &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; --executor-cores &lt;span class=&quot;number&quot;&gt;16&lt;/span&gt; --class com&lt;span class=&quot;selector-class&quot;&gt;.intel&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.analytics&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.bigdl&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.models&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.resnet&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.Train&lt;/span&gt; dist/lib/bigdl-&lt;span class=&quot;number&quot;&gt;0.1&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;-jar-with-dependencies&lt;span class=&quot;selector-class&quot;&gt;.jar&lt;/span&gt; -f cifar-&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;/ --batchSize &lt;span class=&quot;number&quot;&gt;2048&lt;/span&gt; --optnet true --depth &lt;span class=&quot;number&quot;&gt;20&lt;/span&gt; --classes &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt; --shortcutType A --nEpochs &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt; --learningRate &lt;span class=&quot;number&quot;&gt;0.1&lt;/span&gt; --momentum &lt;span class=&quot;number&quot;&gt;0.9&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;报错：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Exception &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; thread &lt;span class=&quot;string&quot;&gt;&quot;main&quot;&lt;/span&gt; org&lt;span class=&quot;selector-class&quot;&gt;.apache&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.hadoop&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.yarn&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.exceptions&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.InvalidResourceRequestException&lt;/span&gt;: Invalid resource request, requested virtual cores &amp;lt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, or requested virtual cores &amp;gt; max configured, requestedVirtualCores=&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;, maxVirtualCores=&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Caused by: org&lt;span class=&quot;selector-class&quot;&gt;.apache&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.hadoop&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.ipc&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.RemoteException&lt;/span&gt;(org&lt;span class=&quot;selector-class&quot;&gt;.apache&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.hadoop&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.yarn&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.exceptions&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.InvalidResourceRequestException&lt;/span&gt;): Invalid resource request, requested virtual cores &amp;lt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, or requested virtual cores &amp;gt; max configured, requestedVirtualCores=&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;, maxVirtualCores=&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;【原因分析】&lt;br&gt;使用cluster模式运行，提示最大虚拟核数为8，请求的虚拟核数 &amp;gt; 最大允许虚拟核数，故报错：非法资源请求&lt;br&gt;观察到yarn的参数：【摘自&lt;a href=&quot;http://wiki.jrwang.me/cluster/cluster-yarn-conf.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;《YARN 资源分配的配置参数》&lt;/a&gt;】&lt;br&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;CPU 资源 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yarn&lt;span class=&quot;selector-class&quot;&gt;.nodemanager&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.resource&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.cpu-vcores&lt;/span&gt;，该节点上 YARN 可使用的虚拟 CPU 个数，默认是&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yarn&lt;span class=&quot;selector-class&quot;&gt;.scheduler&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.minimum-allocation-vcores&lt;/span&gt;，单个任务可申请的最小虚拟CPU个数, 默认是&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yarn&lt;span class=&quot;selector-class&quot;&gt;.scheduler&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.maximum-allocation-vcores&lt;/span&gt;，单个任务可申请的最多虚拟CPU个数，默认是&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;发现节点上 YARN 可使用的虚拟 CPU 个数默认是8，我们设置过大的时候就容易出现运行失败。&lt;/p&gt;
&lt;p&gt;【解决方案】&lt;br&gt;在yarn-site.xml中设置yarn.nodemanager.resource.cpu-vcores参数，如机器有24个虚拟核，则可设置为23（留一核给其它程序）或者其它。&lt;/p&gt;
&lt;h3 id=&quot;Incompatible-clusterIDs&quot;&gt;&lt;a href=&quot;#Incompatible-clusterIDs&quot; class=&quot;headerlink&quot; title=&quot;Incompatible clusterIDs&quot;&gt;&lt;/a&gt;Incompatible clusterIDs&lt;/h3&gt;&lt;p&gt;start-dfs.sh 出现&lt;br&gt;&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-07&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;58&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;57&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;796&lt;/span&gt; WARN org.apache.hadoop.hdfs.server.common.&lt;span class=&quot;string&quot;&gt;Storage:&lt;/span&gt; java.io.&lt;span class=&quot;string&quot;&gt;IOException:&lt;/span&gt; Incompatible clusterIDs &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;regexp&quot;&gt;/home/&lt;/span&gt;experiment&lt;span class=&quot;regexp&quot;&gt;/huqiu/&lt;/span&gt;hadoop&lt;span class=&quot;number&quot;&gt;-2.7&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.2&lt;/span&gt;&lt;span class=&quot;regexp&quot;&gt;/hdfs/&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;datanode:&lt;/span&gt; namenode clusterID = CID-ba940db1&lt;span class=&quot;number&quot;&gt;-9873&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-4468&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-822&lt;/span&gt;b&lt;span class=&quot;number&quot;&gt;-34&lt;/span&gt;b591a95fcd; datanode clusterID = CID&lt;span class=&quot;number&quot;&gt;-010385&lt;/span&gt;dd-b520&lt;span class=&quot;number&quot;&gt;-482&lt;/span&gt;c-bd47-e69632479501&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-07&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;58&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;57&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;796&lt;/span&gt; FATAL org.apache.hadoop.hdfs.server.datanode.&lt;span class=&quot;string&quot;&gt;DataNode:&lt;/span&gt; Initialization failed &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; Block pool &amp;lt;registering&amp;gt; (Datanode Uuid unassigned) service to slave025/&lt;span class=&quot;number&quot;&gt;192.168&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.100&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.35&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;9000.&lt;/span&gt; Exiting.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;java.io.&lt;span class=&quot;string&quot;&gt;IOException:&lt;/span&gt; All specified directories are failed to load.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        at org.apache.hadoop.hdfs.server.datanode.DataStorage.recoverTransitionRead(DataStorage.&lt;span class=&quot;string&quot;&gt;java:&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;478&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        at org.apache.hadoop.hdfs.server.datanode.DataNode.initStorage(DataNode.&lt;span class=&quot;string&quot;&gt;java:&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;1358&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        at org.apache.hadoop.hdfs.server.datanode.DataNode.initBlockPool(DataNode.&lt;span class=&quot;string&quot;&gt;java:&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;1323&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        at org.apache.hadoop.hdfs.server.datanode.BPOfferService.verifyAndSetNamespaceInfo(BPOfferService.&lt;span class=&quot;string&quot;&gt;java:&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;317&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.connectToNNAndHandshake(BPServiceActor.&lt;span class=&quot;string&quot;&gt;java:&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;223&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.run(BPServiceActor.&lt;span class=&quot;string&quot;&gt;java:&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;802&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        at java.lang.Thread.run(Thread.&lt;span class=&quot;string&quot;&gt;java:&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;745&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-07&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;58&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;57&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;798&lt;/span&gt; WARN org.apache.hadoop.hdfs.server.datanode.&lt;span class=&quot;string&quot;&gt;DataNode:&lt;/span&gt; Ending block pool service &lt;span class=&quot;string&quot;&gt;for:&lt;/span&gt; Block pool &amp;lt;registering&amp;gt; (Datanode Uuid unassigned) service to slave025/&lt;span class=&quot;number&quot;&gt;192.168&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.100&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.35&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;9000&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-07&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;58&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;57&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;898&lt;/span&gt; INFO org.apache.hadoop.hdfs.server.datanode.&lt;span class=&quot;string&quot;&gt;DataNode:&lt;/span&gt; Removed Block pool &amp;lt;registering&amp;gt; (Datanode Uuid unassigned)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-07&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;58&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;59&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;899&lt;/span&gt; WARN org.apache.hadoop.hdfs.server.datanode.&lt;span class=&quot;string&quot;&gt;DataNode:&lt;/span&gt; Exiting Datanode&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-07&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;58&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;59&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;901&lt;/span&gt; INFO org.apache.hadoop.util.&lt;span class=&quot;string&quot;&gt;ExitUtil:&lt;/span&gt; Exiting with status &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-07&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;58&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;59&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;903&lt;/span&gt; INFO org.apache.hadoop.hdfs.server.datanode.&lt;span class=&quot;string&quot;&gt;DataNode:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;SHUTDOWN_MSG:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;【原因分析】&lt;br&gt;clusterID不匹配，可能是由于开启hdfs后又重新格式化了namenode，而格式化namenode不会影响datanode，所以导致了不匹配。&lt;/p&gt;
&lt;p&gt;【解决方案】&lt;br&gt;1）关掉hdfs，然后删除旧的data和name目录（datanode和namenode数据存放的本地目录），重新格式化。&lt;br&gt;2）更新datanode目录下current目录下VERSION中的clusterID。&lt;/p&gt;
&lt;h3 id=&quot;程序运行中途出现java-nio-channels-ClosedChannelException的一种可能情况&quot;&gt;&lt;a href=&quot;#程序运行中途出现java-nio-channels-ClosedChannelException的一种可能情况&quot; class=&quot;headerlink&quot; title=&quot;程序运行中途出现java.nio.channels.ClosedChannelException的一种可能情况&quot;&gt;&lt;/a&gt;程序运行中途出现java.nio.channels.ClosedChannelException的一种可能情况&lt;/h3&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;07&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;18&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;00&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt; ERROR TransportClient:&lt;span class=&quot;number&quot;&gt;245&lt;/span&gt; - Failed to send RPC &lt;span class=&quot;number&quot;&gt;6773876705814091919&lt;/span&gt; to /&lt;span class=&quot;number&quot;&gt;192.168&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;100.36&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;57255&lt;/span&gt;: java&lt;span class=&quot;selector-class&quot;&gt;.nio&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.channels&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.ClosedChannelException&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;java&lt;span class=&quot;selector-class&quot;&gt;.nio&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.channels&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.ClosedChannelException&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	at io&lt;span class=&quot;selector-class&quot;&gt;.netty&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.channel&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.AbstractChannel&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;$AbstractUnsafe&lt;/span&gt;.write(...)(Unknown Source)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;07&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;18&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;00&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt; ERROR YarnScheduler:&lt;span class=&quot;number&quot;&gt;70&lt;/span&gt; - Lost executor &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; on slave026: Slave lost&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;07&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;18&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;00&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt; ERROR TransportClient:&lt;span class=&quot;number&quot;&gt;245&lt;/span&gt; - Failed to send RPC &lt;span class=&quot;number&quot;&gt;6158813764515683544&lt;/span&gt; to /&lt;span class=&quot;number&quot;&gt;192.168&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;100.36&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;57255&lt;/span&gt;: java&lt;span class=&quot;selector-class&quot;&gt;.nio&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.channels&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.ClosedChannelException&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;java&lt;span class=&quot;selector-class&quot;&gt;.nio&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.channels&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.ClosedChannelException&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	at io&lt;span class=&quot;selector-class&quot;&gt;.netty&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.channel&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.AbstractChannel&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;$AbstractUnsafe&lt;/span&gt;.write(...)(Unknown Source)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;07&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;18&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;00&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt; ERROR YarnScheduler:&lt;span class=&quot;number&quot;&gt;70&lt;/span&gt; - Lost executor &lt;span class=&quot;number&quot;&gt;6&lt;/span&gt; on slave026: Slave lost&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[Stage &lt;span class=&quot;number&quot;&gt;59&lt;/span&gt;:&amp;gt;                                                         (&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; + &lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;) / &lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;]&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;07&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;18&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;00&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt; ERROR TransportClient:&lt;span class=&quot;number&quot;&gt;245&lt;/span&gt; - Failed to send RPC &lt;span class=&quot;number&quot;&gt;8408959789263061264&lt;/span&gt; to /&lt;span class=&quot;number&quot;&gt;192.168&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;100.36&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;57255&lt;/span&gt;: java&lt;span class=&quot;selector-class&quot;&gt;.nio&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.channels&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.ClosedChannelException&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;java&lt;span class=&quot;selector-class&quot;&gt;.nio&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.channels&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.ClosedChannelException&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	at io&lt;span class=&quot;selector-class&quot;&gt;.netty&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.channel&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.AbstractChannel&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;$AbstractUnsafe&lt;/span&gt;.write(...)(Unknown Source)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;07&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;18&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;00&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt; ERROR YarnScheduler:&lt;span class=&quot;number&quot;&gt;70&lt;/span&gt; - Lost executor &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; on slave027: Slave lost&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;07&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;18&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;00&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt; ERROR TransportClient:&lt;span class=&quot;number&quot;&gt;245&lt;/span&gt; - Failed to send RPC &lt;span class=&quot;number&quot;&gt;7607614848097733030&lt;/span&gt; to /&lt;span class=&quot;number&quot;&gt;192.168&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;100.36&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;57255&lt;/span&gt;: java&lt;span class=&quot;selector-class&quot;&gt;.nio&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.channels&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.ClosedChannelException&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;......&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;查看日志：&lt;code&gt;yarn-experiment-nodemanager-slave029.log&lt;/code&gt;文件：&lt;br&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;07&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;19&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;54&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;49&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;434&lt;/span&gt; ERROR org&lt;span class=&quot;selector-class&quot;&gt;.apache&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.hadoop&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.yarn&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.server&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.nodemanager&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.containermanager&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.ContainerManagerImpl&lt;/span&gt;: Unauthorized request to start container.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;This token is expired. current &lt;span class=&quot;selector-tag&quot;&gt;time&lt;/span&gt; is &lt;span class=&quot;number&quot;&gt;1499601289434&lt;/span&gt; found &lt;span class=&quot;number&quot;&gt;1499601228024&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;【原因分析】&lt;br&gt;这是由于master，slaves互相之间系统时间差距过大（超过10分钟），所以会出现token过期的错误，导致任务无法继续进行。&lt;/p&gt;
&lt;p&gt;【解决方案】&lt;br&gt;1）过期时间由&lt;code&gt;yarn.resourcemanager.rm.container-allocation.expiry-interval-ms&lt;/code&gt;参数决定，默认是10分钟。我们可以增大此过期时间。如下&lt;br&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.resourcemanager.rm.container-allocation.expiry-interval-ms&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;1000000&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;2）其实更好的一种方式就是同步集群机器的系统时间，这个需要系统root权限，同步方式可以为设置每台机器的时间。&lt;br&gt;命令为：&lt;code&gt;date -s &amp;quot;2017-09-08 20:00:00&amp;quot;&lt;/code&gt; 相同格式。&lt;/p&gt;
&lt;h3 id=&quot;Yarn资源分配小结&quot;&gt;&lt;a href=&quot;#Yarn资源分配小结&quot; class=&quot;headerlink&quot; title=&quot;Yarn资源分配小结&quot;&gt;&lt;/a&gt;Yarn资源分配小结&lt;/h3&gt;&lt;p&gt;【TODO】&lt;br&gt;见《Apache Spark Jobs 性能调优（二）》调试资源分配，&lt;/p&gt;
&lt;p&gt;我们开始觉得&lt;br&gt;&lt;figure class=&quot;highlight brainfuck&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;driver&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;memory&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;12g&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;driver&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;cores&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;12&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;executor&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;memory&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;12g&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;num&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;executors&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;executor&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;cores&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;16&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;Remote-RPC-client-disassociated&quot;&gt;&lt;a href=&quot;#Remote-RPC-client-disassociated&quot; class=&quot;headerlink&quot; title=&quot;Remote RPC client disassociated&quot;&gt;&lt;/a&gt;Remote RPC client disassociated&lt;/h3&gt;&lt;p&gt;Spark Standalone模式下，报错&lt;br&gt;&lt;figure class=&quot;highlight basic&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;Remote RPC client disassociated. Likely due to containers exceeding thresholds, or network issues. Check driver logs for WARN messages.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;【原因分析】内存不足导致，可能是运行时没有设置&lt;code&gt;--executor-memory&lt;/code&gt;从而Spark使用了默认的内存量(1G)，或者&lt;code&gt;--executor-memory&lt;/code&gt;设得太小了，考虑增大。&lt;/p&gt;
&lt;p&gt;【解决方案】显式增大使用内存量。&lt;/p&gt;
&lt;h3 id=&quot;IDEA运行Spark程序出现NoClassDefFoundError&quot;&gt;&lt;a href=&quot;#IDEA运行Spark程序出现NoClassDefFoundError&quot; class=&quot;headerlink&quot; title=&quot;IDEA运行Spark程序出现NoClassDefFoundError&quot;&gt;&lt;/a&gt;IDEA运行Spark程序出现NoClassDefFoundError&lt;/h3&gt;&lt;p&gt;IDEA运行Spark程序出现：&lt;br&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Exception &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; thread &lt;span class=&quot;string&quot;&gt;&quot;main&quot;&lt;/span&gt; java&lt;span class=&quot;selector-class&quot;&gt;.lang&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.NoClassDefFoundError&lt;/span&gt;: org/apache/spark/SparkConf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at rftest$.main(rftest&lt;span class=&quot;selector-class&quot;&gt;.scala&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at rftest.main(rftest.scala)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at sun&lt;span class=&quot;selector-class&quot;&gt;.reflect&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.NativeMethodAccessorImpl&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.invoke0&lt;/span&gt;(Native Method)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at sun&lt;span class=&quot;selector-class&quot;&gt;.reflect&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.NativeMethodAccessorImpl&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.invoke&lt;/span&gt;(NativeMethodAccessorImpl&lt;span class=&quot;selector-class&quot;&gt;.java&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;62&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at sun&lt;span class=&quot;selector-class&quot;&gt;.reflect&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.DelegatingMethodAccessorImpl&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.invoke&lt;/span&gt;(DelegatingMethodAccessorImpl&lt;span class=&quot;selector-class&quot;&gt;.java&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;43&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at java&lt;span class=&quot;selector-class&quot;&gt;.lang&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.reflect&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.Method&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.invoke&lt;/span&gt;(Method&lt;span class=&quot;selector-class&quot;&gt;.java&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;498&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at com&lt;span class=&quot;selector-class&quot;&gt;.intellij&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.rt&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.execution&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.application&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.AppMain&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.main&lt;/span&gt;(AppMain&lt;span class=&quot;selector-class&quot;&gt;.java&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;147&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Caused by: java&lt;span class=&quot;selector-class&quot;&gt;.lang&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.ClassNotFoundException&lt;/span&gt;: org&lt;span class=&quot;selector-class&quot;&gt;.apache&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.spark&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.SparkConf&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at java&lt;span class=&quot;selector-class&quot;&gt;.net&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.URLClassLoader&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.findClass&lt;/span&gt;(URLClassLoader&lt;span class=&quot;selector-class&quot;&gt;.java&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;381&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at java&lt;span class=&quot;selector-class&quot;&gt;.lang&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.ClassLoader&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.loadClass&lt;/span&gt;(ClassLoader&lt;span class=&quot;selector-class&quot;&gt;.java&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;424&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at sun&lt;span class=&quot;selector-class&quot;&gt;.misc&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.Launcher&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;$AppClassLoader&lt;/span&gt;.loadClass(Launcher&lt;span class=&quot;selector-class&quot;&gt;.java&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;331&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at java&lt;span class=&quot;selector-class&quot;&gt;.lang&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.ClassLoader&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.loadClass&lt;/span&gt;(ClassLoader&lt;span class=&quot;selector-class&quot;&gt;.java&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;357&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ... &lt;span class=&quot;number&quot;&gt;7&lt;/span&gt; more&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;【原因分析】编译时可能使用了&lt;code&gt;spark-core (provided)&lt;/code&gt;，导致缺少&lt;code&gt;spark-core&lt;/code&gt;相关包&lt;br&gt;【解决方案】在&lt;code&gt;pom.xml&lt;/code&gt;中去掉&lt;code&gt;spark-core&lt;/code&gt;的 &lt;code&gt;provided&lt;/code&gt; scope&lt;/p&gt;
&lt;h2 id=&quot;References&quot;&gt;&lt;a href=&quot;#References&quot; class=&quot;headerlink&quot; title=&quot;References&quot;&gt;&lt;/a&gt;References&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.jianshu.com/p/a0c38dc46b89&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;搭建Spark所遇过的坑&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://jeyke.iteye.com/blog/2074345?utm_source=tuicool&amp;amp;utm_medium=referral&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;YARN内存使用优化配置&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://blog.cloudera.com/blog/2015/03/how-to-tune-your-apache-spark-jobs-part-2/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;How-to: Tune Your Apache Spark Jobs (Part 2)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.cloudera.com/documentation/enterprise/5-8-x/topics/cdh_ig_running_spark_on_yarn.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Running Spark Applications on YARN&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://blog.csdn.net/suifeng3051/article/details/45477773&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Yarn内存分配管理机制及相关参数配置&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.zybuluo.com/xiaop1987/note/102894&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Apache Spark Jobs 性能调优（二）&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;最近常跑Spark程序，&lt;br&gt;主要是分布式机器学习&lt;br&gt;和分布式深度学习这块，&lt;br&gt;因为模型经常很大，比如VGG等，&lt;br&gt;集群空余节点又不是很多，&lt;br&gt;跑起来有时候会吃力，&lt;br&gt;以及各种莫名其妙的安装问题，&lt;br&gt;配置问题，&lt;br&gt;运行问题，&lt;br&gt;运行中问题，
    
    </summary>
    
      <category term="错误解决与优化 | Err_n_Opt" scheme="http://whatbeg.com/categories/%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3%E4%B8%8E%E4%BC%98%E5%8C%96-Err-n-Opt/"/>
    
    
      <category term="Spark" scheme="http://whatbeg.com/tags/Spark/"/>
    
      <category term="大数据" scheme="http://whatbeg.com/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="错误解决" scheme="http://whatbeg.com/tags/%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3/"/>
    
  </entry>
  
  <entry>
    <title>在服务器集群上搭建BigDL环境</title>
    <link href="http://whatbeg.com/2017/04/17/bigdlclusterbuild.html"/>
    <id>http://whatbeg.com/2017/04/17/bigdlclusterbuild.html</id>
    <published>2017-04-17T14:42:38.000Z</published>
    <updated>2017-04-17T14:50:07.562Z</updated>
    
    <content type="html">&lt;p&gt;本文简要记述一下搭建BigDL运行环境的过程和一些需要注意的地方。&lt;br&gt;BigDL是Intel推出的一个基于Spark的深度学习框架，目前发布到0.1.0版本。&lt;br&gt;&lt;a href=&quot;https://github.com/intel-analytics/BigDL&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Github BigDL&lt;/a&gt;&lt;br&gt;BigDL提供了丰富的深度学习的支持，并且在Intel CPU（Xeon）上的性能表现优异，在单节点Xeon CPU上的性能能够媲美CPU，这也一定程度上归因于Intel针对BigDL的底层运算做了很多优化工作，我们都知道，一个GPU的价钱可以购买一台多Xeon CPU的服务器了，而且GPU服务器的用途相对单一，而买一台CPU服务器还能够干很多别的事情，其实对于很多中小公司来说，对GPU的需求并不是那么旺盛，所以在CPU上实现高性能的深度学习应用也显得非常重要。并且BigDL是基于Spark的，用户完全可以将其跑在已有的Spark集群上，部署成本很低。&lt;br&gt;更详细的介绍可以参考Github主页。&lt;/p&gt;
&lt;h2 id=&quot;dependencies-安装&quot;&gt;&lt;a href=&quot;#dependencies-安装&quot; class=&quot;headerlink&quot; title=&quot;dependencies 安装&quot;&gt;&lt;/a&gt;dependencies 安装&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Java 1.8.0_121&lt;/li&gt;
&lt;li&gt;Hadoop 2.7.2&lt;/li&gt;
&lt;li&gt;Spark 2.1.0&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://registrationcenter.intel.com/en/forms/?productid=2558&amp;amp;licensetype=2&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;底层运算库MKL 2017.2.174&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;apache-maven 3.3.9&lt;/li&gt;
&lt;li&gt;Scala 2.10.4&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;配置步骤&quot;&gt;&lt;a href=&quot;#配置步骤&quot; class=&quot;headerlink&quot; title=&quot;配置步骤&quot;&gt;&lt;/a&gt;配置步骤&lt;/h2&gt;&lt;h3 id=&quot;MAVEN调用本地库&quot;&gt;&lt;a href=&quot;#MAVEN调用本地库&quot; class=&quot;headerlink&quot; title=&quot;MAVEN调用本地库&quot;&gt;&lt;/a&gt;MAVEN调用本地库&lt;/h3&gt;&lt;p&gt;考虑到服务器一般不能联网的原因，MAVEN无法到远程库获取依赖包，可以将已经下好的包传到Server，然后设置调用本地依赖包。过程如下，将自己Desktop最新的maven库文件（一般位于~/.m2）打包上传到Server，最好也命名为~/.m2，然后编辑&lt;code&gt;$MAVEN_HOME/conf/settings.xml&lt;/code&gt;, 在注释掉的localRepository那里加上下面一行：&lt;br&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;localRepository&lt;/span&gt;&amp;gt;&lt;/span&gt;~/.m2/repository&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;localRepository&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;即可。&lt;/p&gt;
&lt;h3 id=&quot;配置Hadoop&quot;&gt;&lt;a href=&quot;#配置Hadoop&quot; class=&quot;headerlink&quot; title=&quot;配置Hadoop&quot;&gt;&lt;/a&gt;配置Hadoop&lt;/h3&gt;&lt;p&gt;如果已经配置过hadoop或者以前用过hadoop了，也可以不重新设置。&lt;br&gt;如果没有的话，那么按如下方法设置即可。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;编辑core-site.xml，可进行如下配置&lt;/p&gt;
&lt;figure class=&quot;highlight dts&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;params&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;params&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;fs.defaultFS&lt;span class=&quot;params&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;params&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;hdfs:&lt;span class=&quot;comment&quot;&gt;//xx.xx.xx.xx:9100&amp;lt;/value&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;params&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;hadoop.tmp.dir&lt;span class=&quot;params&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;params&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;file:&lt;span class=&quot;meta-keyword&quot;&gt;/path/&lt;/span&gt;to&lt;span class=&quot;meta-keyword&quot;&gt;/hadoop/&lt;/span&gt;hadoop&lt;span class=&quot;number&quot;&gt;-2.7&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.2&lt;/span&gt;/tmp&lt;span class=&quot;params&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;params&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;io.file.buffer.size&lt;span class=&quot;params&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;params&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;131072&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;params&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;hadoop.native.lib&amp;gt;&lt;span class=&quot;params&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;params&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;true&lt;span class=&quot;params&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;params&quot;&gt;&amp;lt;description&amp;gt;&lt;/span&gt;Should native hadoop libraries,if present,be used&lt;span class=&quot;params&quot;&gt;&amp;lt;/description&amp;gt;&lt;/span&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;params&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;编辑hdfs-site.xml&lt;/p&gt;
&lt;figure class=&quot;highlight dts&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;params&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;params&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;dfs.namenode.name.dir&lt;span class=&quot;params&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;params&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;file:hadooppath/hadoop&lt;span class=&quot;number&quot;&gt;-2.7&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.2&lt;/span&gt;&lt;span class=&quot;meta-keyword&quot;&gt;/hdfs/&lt;/span&gt;name&lt;span class=&quot;params&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;params&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;dfs.datanode.data.dir&lt;span class=&quot;params&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;params&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;file:hadooppath/hadoop&lt;span class=&quot;number&quot;&gt;-2.7&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.2&lt;/span&gt;&lt;span class=&quot;meta-keyword&quot;&gt;/hdfs/&lt;/span&gt;data&lt;span class=&quot;params&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;params&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;dfs.replication&lt;span class=&quot;params&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;params&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;params&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;dfs.namenode.secondary.http-address&lt;span class=&quot;params&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;params&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;masterIP:&lt;span class=&quot;number&quot;&gt;9001&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;params&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;dfs.namenode.servicerpc-address&lt;span class=&quot;params&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;params&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;masterIP:&lt;span class=&quot;number&quot;&gt;10001&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;params&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;dfs.webhdfs.enabled&lt;span class=&quot;params&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;params&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;true&lt;span class=&quot;params&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;params&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;dfs.datanode.address&lt;span class=&quot;params&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;params&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;50011&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;params&quot;&gt;&amp;lt;description&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       默认为&lt;span class=&quot;number&quot;&gt;50010&lt;/span&gt;, 是datanode的监听端口&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;params&quot;&gt;&amp;lt;/description&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;params&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;dfs.datanode.http.address&lt;span class=&quot;params&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;params&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;50076&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;params&quot;&gt;&amp;lt;description&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         默认为&lt;span class=&quot;number&quot;&gt;50075&lt;/span&gt;，为datanode的http server端口&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;params&quot;&gt;&amp;lt;/description&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;params&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;params&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;dfs.datanode.ipc.address&lt;span class=&quot;params&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;params&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;50021&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;params&quot;&gt;&amp;lt;description&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        默认为&lt;span class=&quot;number&quot;&gt;50020&lt;/span&gt;, 为datanode的ipc server端口&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;params&quot;&gt;&amp;lt;/description&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;params&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;params&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;编辑mapred-site.xml&lt;/p&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;mapred.job.tracker&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;master:9101&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;description&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        job tracker运行的位置和端口&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;description&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;mapred.task.tracker.http.address&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;0.0.0.0:50061&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;description&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       默认为50061, 是task tracker的http server端口&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;description&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;mapreduce.framework.name&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;mapreduce.jobhistory.address&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;masterIP:10020&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;mapreduce.jobhistory.webapp.address&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;masterIP:19888&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;编辑yarn-site.xml&lt;/p&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.nodemanager.aux-services&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;mapreduce_shuffle&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.nodemanager.auxservices.mapreduce.shuffle.class&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;org.apache.hadoop.mapred.ShuffleHandler&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.resourcemanager.address&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;masterIP:8032&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.resourcemanager.scheduler.address&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;masterIP:8030&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.resourcemanager.resource-tracker.address&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;masterIP:8031&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.resourcemanager.admin.address&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;masterIP:8033&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.resourcemanager.webapp.address&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;masterIP:8088&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.nodemanager.resource.memory-mb&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;22528&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.scheduler.minimum-allocation-mb&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;1500&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.nodemanager.pmem-check-enabled&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;false&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.scheduler.maximum-allocation-mb&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;16384&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;discription&lt;/span&gt;&amp;gt;&lt;/span&gt;单个任务可申请最大内存，默认8192MB&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;discription&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;yarn.nodemanager.vmem-check-enabled&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;false&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;编辑&lt;code&gt;$HADOOP_HOME/etc/hadoop/slaves&lt;/code&gt;，依次添加slaves的IP&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;配置Spark&quot;&gt;&lt;a href=&quot;#配置Spark&quot; class=&quot;headerlink&quot; title=&quot;配置Spark&quot;&gt;&lt;/a&gt;配置Spark&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;编辑 &lt;code&gt;$SPARK_HOME/conf/slaves&lt;/code&gt;，依次添加slaves的IP&lt;/li&gt;
&lt;li&gt;编辑 &lt;code&gt;$SPARK_HOME/conf/spark-env.sh&lt;/code&gt;, 在尾部添加&lt;figure class=&quot;highlight xquery&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;export SPARK_DIST_CLASSPATH=$($HADOOP_HOME/bin/hadoop classpath)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;分发环境&quot;&gt;&lt;a href=&quot;#分发环境&quot; class=&quot;headerlink&quot; title=&quot;分发环境&quot;&gt;&lt;/a&gt;分发环境&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;将上述安装过程在Slaves上都安装一遍，由于手动安装过程繁琐，没有技术含量，可以使用脚本安装。如果有需要可以提供笔者的脚本供参考。其中hadoop和Spark目录可以直接拷贝过去，就无需重新配置了。尽量保持Master和Slaves环境变量的一致，能够更快地部署。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;启动集群&quot;&gt;&lt;a href=&quot;#启动集群&quot; class=&quot;headerlink&quot; title=&quot;启动集群&quot;&gt;&lt;/a&gt;启动集群&lt;/h3&gt;&lt;p&gt;格式化namenode，然后启动所有datanode, namenode, resourcemanager, nodemanager等，即可运行BigDL程序了。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;hadoop namenode –format&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$SPARK_HOME/sbin/start-all.sh, $HADOOP_HOME/sbin/start-all.sh&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;编译打包BigDL的jar包&quot;&gt;&lt;a href=&quot;#编译打包BigDL的jar包&quot; class=&quot;headerlink&quot; title=&quot;编译打包BigDL的jar包&quot;&gt;&lt;/a&gt;编译打包BigDL的jar包&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;code&gt;bash make-dist.sh -P spark_2.0&lt;/code&gt;，具体可参看&lt;a href=&quot;https://github.com/intel-analytics/BigDL/wiki/Build-Page&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Build Page&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;chmod +x dist/bin/bigdl.sh&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;示例程序&quot;&gt;&lt;a href=&quot;#示例程序&quot; class=&quot;headerlink&quot; title=&quot;示例程序&quot;&gt;&lt;/a&gt;示例程序&lt;/h3&gt;&lt;p&gt;在BigDL-0.1.0上，基于CIFAR-10数据集运行RESNET20的示例运行命令如下：&lt;br&gt;&lt;figure class=&quot;highlight brainfuck&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;dist/bin/bigdl&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;sh&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;spark&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;submit&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;\&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;master&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;yarn&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;\&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;driver&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;memory&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;6g&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;executor&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;memory&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;6g&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;\&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;num&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;executors&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;executor&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;cores&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;\&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;com&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;intel&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;analytics&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;bigdl&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;models&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;resnet&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;Train&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;\&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;dist/lib/bigdl&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;jar&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;dependencies&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;jar&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;\&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;cifar&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;10/&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;batchSize&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;480&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;optnet&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;depth&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;20&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;classes&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;\&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;shortcutType&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;A&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;nEpochs&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;156&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;learningRate&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;literal&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;cache&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;model&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后等待训练完成即可。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://ook6epb86.bkt.clouddn.com/bigdl_install.sh&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;本文简要记述一下搭建BigDL运行环境的过程和一些需要注意的地方。&lt;br&gt;BigDL是Intel推出的一个基于Spark的深度学习框架，目前发布到0.1.0版本。&lt;br&gt;&lt;a href=&quot;https://github.com/intel-analytics/BigDL&quot; t
    
    </summary>
    
      <category term="大数据系统与技术 | Big Data" scheme="http://whatbeg.com/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%B3%BB%E7%BB%9F%E4%B8%8E%E6%8A%80%E6%9C%AF-Big-Data/"/>
    
    
      <category term="Deep Learning" scheme="http://whatbeg.com/tags/Deep-Learning/"/>
    
      <category term="深度学习" scheme="http://whatbeg.com/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="大数据" scheme="http://whatbeg.com/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
  </entry>
  
  <entry>
    <title>SVM推导过程中的三个疑问</title>
    <link href="http://whatbeg.com/2017/04/13/svmlearning.html"/>
    <id>http://whatbeg.com/2017/04/13/svmlearning.html</id>
    <published>2017-04-13T13:10:06.000Z</published>
    <updated>2017-04-14T11:48:40.996Z</updated>
    
    <content type="html">&lt;p&gt;在形式化推导硬间隔（不允许分错）SVM分类器的时候，会做一些简化和转换，初看时并不那么好懂。最近又接触到SVM，所以从头到尾又学习了一遍。写下关于几个以前不太懂的疑问以及疑问的回答。&lt;/p&gt;
&lt;h2 id=&quot;为何令间隔为1？&quot;&gt;&lt;a href=&quot;#为何令间隔为1？&quot; class=&quot;headerlink&quot; title=&quot;为何令间隔为1？&quot;&gt;&lt;/a&gt;为何令间隔为1？&lt;/h2&gt;&lt;p&gt;在SVM中是以最大化分类间隔为目标的，间隔又分函数间隔和几何间隔。&lt;br&gt;函数间隔为： $\hat\gamma=y_if(x_i)=y_i(w^Tx_i+b)$&lt;br&gt;几何间隔为： $\gamma=\frac {y_if(x_i)} {||w||}$&lt;br&gt;函数间隔可以表征样本被分到某一类的置信度，比如说$y_i=+1$时，如果$w^Tx_i+b &amp;gt; 0$且很大，说明离分类边界越远，越有理由相信$x_i$真的是正类。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;成倍的增长$w,b$，分类超平面不变，几何间隔也不改变&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;而我们优化通常是优化几何间隔，因为几何间隔在$w,b$成倍增长时，是不变的。&lt;br&gt;即优化问题转化为：$$max_{w,b} \frac {\hat\gamma} {||w||} \&lt;br&gt;s.t. y_i(w^Tx_i+b) = \hat\gamma_i \ge \hat\gamma$$&lt;/p&gt;
&lt;p&gt;设$\hat\gamma$为最小函数间隔,约束条件是任意给一个点，其函数间隔一定大于等于$\hat\gamma$，即最小函数间隔。&lt;br&gt;做一个变量替换$w’=w/{\hat\gamma}, b’=b/{\hat\gamma}$，代入原来的优化问题可得新的优化问题：&lt;br&gt;$$max_{w’,b’} \frac {1} {||w’||} \&lt;br&gt;s.t. y_i({w’}^Tx_i+b’) \ge 1$$&lt;br&gt;此时关于$w,b$的原问题等价成了新的$w’,b’$的新问题。能够这样转化的原因在于函数间隔的取值并不影响最优化问题的解。&lt;/p&gt;
&lt;h2 id=&quot;什么是拉格朗日对偶？&quot;&gt;&lt;a href=&quot;#什么是拉格朗日对偶？&quot; class=&quot;headerlink&quot; title=&quot;什么是拉格朗日对偶？&quot;&gt;&lt;/a&gt;什么是拉格朗日对偶？&lt;/h2&gt;&lt;p&gt;上述优化问题可以写为：&lt;br&gt;$$min \frac {1} {2}||w||^2 \&lt;br&gt;s.t. y_i({w’}^Tx_i+b’) \ge 1,i=1,2,..,m$$&lt;/p&gt;
&lt;p&gt;目标函数是二次的，约束是是线性的，这是一个凸二次规划问题，可以用QP求解。但是还可以通过拉格朗日对偶来解。&lt;br&gt;拉格朗日对偶解法即求解与原问题等价的对偶问题得到原问题的最优解。&lt;br&gt;采用拉格朗日乘子法，写出拉格朗日乘子式：&lt;br&gt;$$\mathcal{L}(w,b,\alpha)=\frac {1} {2}||w||^2 - \sum_{i=1}^n \alpha_i(y_i(w^Tx_i+b)-1)$$&lt;br&gt;令$$\theta(w)=max_{\alpha_i \ge 0}\mathcal{L}(w,b,\alpha)$$&lt;br&gt;可以看出，当$(y_i(w^Tx_i+b)-1)&amp;lt;0$时，即条件不满足时，由于$\alpha_i \ge 0$，所以后面一半（包括负号）是正的，当$\alpha_i$取得很大的时候，$\theta(w)$甚至可以取到无穷大；当条件满足时，后面一项是负的，所以$\theta(w)=max_{\alpha_i \ge 0}\mathcal{L}(w,b,\alpha)$最大就是$\frac {1} {2}||w||^2$。&lt;br&gt;所以做$\theta(w)$的目的就出来了，即&lt;br&gt;$\theta(w)=f(w) $ if w满足条件&lt;br&gt;$\theta(w)=\infty $ 否则&lt;br&gt;所以原问题$$min \frac {1} {2}||w||^2 \&lt;br&gt;s.t. y_i({w’}^Tx_i+b’) \ge 1,i=1,2,..,m$$&lt;br&gt;就可以通过拉格朗日乘子法换成无约束的等价的另一种表示&lt;br&gt;$$min_{w,b}\theta(w)=min_{w,b} max_{\alpha_i \ge 0}\mathcal{L}(w,b,\alpha)$$&lt;br&gt;设$p^\ast$为上述问题的最优解。&lt;br&gt;上述问题直接求解很难，所以交换一下min，max的顺序将其变成对偶问题&lt;br&gt;$$max_{\alpha_i \ge 0} min_{w,b} \mathcal{L}(w,b,\alpha)$$&lt;br&gt;最优解用$d^\ast$来表示。&lt;br&gt;转换为对偶问题后相对容易求解，要注意此时$d^\ast$并不一定等于$p^\ast$，(且&lt;br&gt;其实$d^\ast \le p^\ast$，直观的说就是“胖子里面最瘦的通常比瘦子里面最胖的要胖”，这也是有证明的)。即原问题的解并不一定等于对偶问题的解，如果等于，我们称之为强对偶(strong duality)，在满足一定条件的情况下，是可以达到强对偶的。&lt;br&gt;Slater条件： 存在严格满足约束条件的点。&lt;br&gt;如果原始问题是Convex的并且满足Slater条件的话，我们说它是强对偶的。Slater条件只是使强对偶成立的一种情况，事实上，非凸优化也可以是强对偶的。&lt;br&gt;通过强对偶成立时的一些性质，我们可以推出一些条件，比如&lt;/p&gt;
&lt;center&gt; &lt;img src=&quot;http://7xsl28.com1.z0.glb.clouddn.com/SVM5.png&quot; alt=&quot;&quot;&gt; &lt;/center&gt;

&lt;h2 id=&quot;什么是KKT条件？&quot;&gt;&lt;a href=&quot;#什么是KKT条件？&quot; class=&quot;headerlink&quot; title=&quot;什么是KKT条件？&quot;&gt;&lt;/a&gt;什么是KKT条件？&lt;/h2&gt;&lt;p&gt;上述这些就是所谓的KKT条件。&lt;br&gt;任何强对偶问题都满足KKT条件。&lt;br&gt;当原始问题可微且是凸优化问题时，KKT条件升级成充分必要条件。&lt;br&gt;前两条说明达到最优解时，拉格朗日函数对w,b求偏导为0&lt;br&gt;第三条称为complementary slackness（互补松弛），即我们的&lt;br&gt;$$\alpha_i(y_i(w^Tx_i+b)-1)=0$$&lt;br&gt;那么为什么呢？做下列推导，假设$x^\ast,\alpha^\ast$分别为原问题和对偶问题的极值点：&lt;/p&gt;
&lt;p&gt;$$f_0(x^\ast)=min_{w,b} \mathcal{L}(w,b,\alpha) \&lt;br&gt;=min_x (f_0(x) - \sum_{i=1}^n \alpha_i(y_i(w^Tx_i+b)-1)) \&lt;br&gt;\le f_0(x^\ast)-\sum_{i=1}^n \alpha_i^\ast(y_i(w^Tx^\ast_i+b)-1) \&lt;br&gt;\le f_0(x^\ast)$$&lt;/p&gt;
&lt;p&gt;由于等式两遍相等，所以可以换成等号，由于第三行，且$\sum_{i=1}^n \alpha_i^\ast(y_i(w^Tx^\ast_i+b)-1)$非负，所以推出$ \alpha_i^\ast(y_i(w^Tx^\ast_i+b)-1)=0, i=1,2,…,m$&lt;br&gt;即当$\alpha_i&amp;gt;0$时，$x_i$正在分类间隔上，称为支持向量，而不在分类间隔上的样本有$\alpha_i=0$&lt;br&gt;后两条为原来的约束条件。图中的$g_i(w^\ast)$即我们的$(1-y_i({w^\ast}^Tx_i+b^\ast))$。&lt;/p&gt;
&lt;p&gt;满足了KKT条件，就可以认为对偶问题的最优解就是原问题的最优解，这样我们就可以通过求解对偶问题来求解原来的优化问题。&lt;br&gt;By the way，SVM的对偶问题为：&lt;/p&gt;
&lt;center&gt; &lt;img src=&quot;http://7xsl28.com1.z0.glb.clouddn.com/SVM6.png&quot; alt=&quot;来自July&quot;&gt; &lt;/center&gt;

&lt;h2 id=&quot;总结&quot;&gt;&lt;a href=&quot;#总结&quot; class=&quot;headerlink&quot; title=&quot;总结&quot;&gt;&lt;/a&gt;总结&lt;/h2&gt;&lt;p&gt;所以总结一下，令几何间隔为1是为了保证优化问题等价的情况下，尽可能地简化问题。使用拉格朗日对偶是因为原问题不好解，所以转化成对偶问题，而当问题满足KKT条件的时候，这个对偶问题的解就是原问题的解，从而更好地得到最优解。&lt;br&gt;简单梳理了一下这三个问题，知识浅薄，如果有不对的希读者不吝指出。&lt;/p&gt;
&lt;h2 id=&quot;References&quot;&gt;&lt;a href=&quot;#References&quot; class=&quot;headerlink&quot; title=&quot;References&quot;&gt;&lt;/a&gt;References&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www2.isye.gatech.edu/~nemirovs/Lect_ModConvOpt.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Lectures on Modern Convex Optimization &lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://cs229.stanford.edu/notes/cs229-notes3.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Andrew Ng. CS229. Note3&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.cnblogs.com/90zeng/p/Lagrange_duality.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;简易解说拉格朗日对偶（Lagrange duality）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.cnblogs.com/liqizhou/archive/2012/05/11/2495689.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;SVM(二）拉格朗日对偶问题&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://blog.pluskid.org/?p=702&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;支持向量机：Duality&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://blog.csdn.net/v_july_v/article/details/7624837&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;支持向量机通俗导论（理解SVM的三层境界）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;《机器学习》&lt;/li&gt;
&lt;li&gt;《统计学习方法》&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;在形式化推导硬间隔（不允许分错）SVM分类器的时候，会做一些简化和转换，初看时并不那么好懂。最近又接触到SVM，所以从头到尾又学习了一遍。写下关于几个以前不太懂的疑问以及疑问的回答。&lt;/p&gt;
&lt;h2 id=&quot;为何令间隔为1？&quot;&gt;&lt;a href=&quot;#为何令间隔为1？&quot; cla
    
    </summary>
    
      <category term="机器学习 | Mac.Learning" scheme="http://whatbeg.com/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Mac-Learning/"/>
    
    
      <category term="机器学习" scheme="http://whatbeg.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>Hexo新的一些优化</title>
    <link href="http://whatbeg.com/2017/04/13/hexosomeopt.html"/>
    <id>http://whatbeg.com/2017/04/13/hexosomeopt.html</id>
    <published>2017-04-13T08:10:39.000Z</published>
    <updated>2017-07-14T01:57:40.207Z</updated>
    
    <content type="html">&lt;h2 id=&quot;Hexo-Mathjax下划线-的渲染问题&quot;&gt;&lt;a href=&quot;#Hexo-Mathjax下划线-的渲染问题&quot; class=&quot;headerlink&quot; title=&quot;Hexo Mathjax下划线_的渲染问题&quot;&gt;&lt;/a&gt;Hexo Mathjax下划线&lt;code&gt;_&lt;/code&gt;的渲染问题&lt;/h2&gt;&lt;p&gt;以前Hexo渲染数学公式的时候有时候下划线会渲染成&lt;code&gt;&amp;lt;em&amp;gt;&lt;/code&gt;，导致渲染不出公式的情况。&lt;br&gt;比如下面这种情况：&lt;br&gt;&lt;img src=&quot;http://7xsl28.com1.z0.glb.clouddn.com/hexosomeopt1.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;但是在其他markdown中又能够正确显示，这时候其实是Hexo的锅，它渲染的时候把&lt;code&gt;_&lt;/code&gt;渲染成&lt;code&gt;&amp;lt;em&amp;gt;&lt;/code&gt;    ，可以修改渲染规则来使之渲染正常。&lt;br&gt;打开：&lt;code&gt;hexo\node_modules\marked\lib\marked.js&lt;/code&gt;&lt;br&gt;找到：&lt;br&gt;&lt;img src=&quot;http://7xsl28.com1.z0.glb.clouddn.com/hexosomeopt3.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://7xsl28.com1.z0.glb.clouddn.com/hexosomeopt2.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;删去选中的部分，即删除对&lt;code&gt;_&lt;/code&gt;的渲染转换，重新生成即可。&lt;br&gt;当然还有其它方式，不过这种比较简便有效。&lt;/p&gt;
&lt;h2 id=&quot;References&quot;&gt;&lt;a href=&quot;#References&quot; class=&quot;headerlink&quot; title=&quot;References&quot;&gt;&lt;/a&gt;References&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://kubicode.me/2016/03/16/Hexo/Fix-Hexo-Bug-In-Mathjax/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;修复Hexo写Mathjax公式多个下标失效的问题&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://2wildkids.com/2016/10/06/%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86Hexo%E5%92%8CMathJax%E7%9A%84%E5%85%BC%E5%AE%B9%E9%97%AE%E9%A2%98/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;如何处理Hexo和MathJax的兼容问题&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Hexo-Mathjax下划线-的渲染问题&quot;&gt;&lt;a href=&quot;#Hexo-Mathjax下划线-的渲染问题&quot; class=&quot;headerlink&quot; title=&quot;Hexo Mathjax下划线_的渲染问题&quot;&gt;&lt;/a&gt;Hexo Mathjax下划线&lt;code&gt;_&lt;
    
    </summary>
    
      <category term="错误解决与优化 | Err_n_Opt" scheme="http://whatbeg.com/categories/%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3%E4%B8%8E%E4%BC%98%E5%8C%96-Err-n-Opt/"/>
    
    
      <category term="hexo" scheme="http://whatbeg.com/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu 使用中的问题集锦</title>
    <link href="http://whatbeg.com/2017/04/01/ubuntuproblems.html"/>
    <id>http://whatbeg.com/2017/04/01/ubuntuproblems.html</id>
    <published>2017-04-01T12:38:53.000Z</published>
    <updated>2017-09-18T09:08:29.315Z</updated>
    
    <content type="html">&lt;p&gt;新开一贴，记录一下Ubuntu使用中的一些问题。&lt;/p&gt;
&lt;h5 id=&quot;Ubuntu-搜狗输入法问题&quot;&gt;&lt;a href=&quot;#Ubuntu-搜狗输入法问题&quot; class=&quot;headerlink&quot; title=&quot;Ubuntu 搜狗输入法问题&quot;&gt;&lt;/a&gt;Ubuntu 搜狗输入法问题&lt;/h5&gt;&lt;p&gt;搜狗输入法突然不能用，打字的时候界面也没了，就剩个框框，打着打着就没了。&lt;br&gt;&lt;img src=&quot;http://7xsl28.com1.z0.glb.clouddn.com/error_sogoupinyin.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;重装了fcitx和sogoupinyin也不行，最后在&lt;a href=&quot;http://forum.ubuntu.org.cn/viewtopic.php?f=8&amp;amp;t=483206&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Ubuntu Forum&lt;/a&gt;找到了解决方案。&lt;br&gt;据说是自动升级什么造成的，deepin里提示说&lt;br&gt;&lt;figure class=&quot;highlight arduino&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mv  ~/.&lt;span class=&quot;built_in&quot;&gt;config&lt;/span&gt;/SogouPY*  /tmp&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;发现了一个好地方，Ubuntu出问题可以多去&lt;a href=&quot;http://forum.ubuntu.org.cn/index.php&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Ubuntu 论坛&lt;/a&gt;看看。&lt;/p&gt;
&lt;h5 id=&quot;shell中source命令不存在的问题&quot;&gt;&lt;a href=&quot;#shell中source命令不存在的问题&quot; class=&quot;headerlink&quot; title=&quot;shell中source命令不存在的问题&quot;&gt;&lt;/a&gt;shell中source命令不存在的问题&lt;/h5&gt;&lt;p&gt;shell脚本中使用source命令可能会报&lt;br&gt;&lt;figure class=&quot;highlight applescript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;source &lt;span class=&quot;keyword&quot;&gt;not&lt;/span&gt; found&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;错误，这是因为几种shell的不同导致，许多版本使用&lt;code&gt;/bin/bash&lt;/code&gt;做&lt;code&gt;sh&lt;/code&gt;，但是Ubuntu和另一些系统、版本中已逐渐使用&lt;code&gt;/bin/dash&lt;/code&gt;，后者不支持&lt;code&gt;source&lt;/code&gt;。&lt;br&gt;解决方法：&lt;br&gt;（1）使用 &lt;code&gt;.&lt;/code&gt; 替换 &lt;code&gt;source&lt;/code&gt; 命令&lt;br&gt;（2）使用如下命令变更shell，从&lt;code&gt;dash&lt;/code&gt;变更到&lt;code&gt;bash&lt;/code&gt;&lt;br&gt;&lt;figure class=&quot;highlight stata&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ls&lt;/span&gt; -&lt;span class=&quot;keyword&quot;&gt;l&lt;/span&gt; `&lt;span class=&quot;keyword&quot;&gt;which&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;sh&lt;/span&gt;`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/bin/&lt;span class=&quot;keyword&quot;&gt;sh&lt;/span&gt; -&amp;gt; &lt;span class=&quot;keyword&quot;&gt;sh&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$sudo&lt;/span&gt; dpkg-reconfigure dash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 选择[&lt;span class=&quot;keyword&quot;&gt;no&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$ls&lt;/span&gt; -&lt;span class=&quot;keyword&quot;&gt;l&lt;/span&gt; `&lt;span class=&quot;keyword&quot;&gt;which&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;sh&lt;/span&gt;`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/bin/&lt;span class=&quot;keyword&quot;&gt;sh&lt;/span&gt; -&amp;gt; bash&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;apt-get无法连接&quot;&gt;&lt;a href=&quot;#apt-get无法连接&quot; class=&quot;headerlink&quot; title=&quot;apt-get无法连接&quot;&gt;&lt;/a&gt;apt-get无法连接&lt;/h5&gt;&lt;p&gt;有时我们想用apt-get来安装一些软件，但是可能处在一些特殊的网络中，无法直接连接，这是我们可以通过设置apt-get代理的方式来解决。之前尝试过在&lt;code&gt;.bashrc&lt;/code&gt;中设置代理:&lt;br&gt;&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; http_proxy=&lt;span class=&quot;attribute&quot;&gt;http&lt;/span&gt;:&lt;span class=&quot;comment&quot;&gt;//ip:port&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; https_proxy=&lt;span class=&quot;attribute&quot;&gt;http&lt;/span&gt;:&lt;span class=&quot;comment&quot;&gt;//ip:port&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;但是此时运行apt-get update仍不可行，于是查到设置&lt;code&gt;apt.conf&lt;/code&gt;的方式，具体步骤如下：&lt;br&gt;在&lt;code&gt;/etc/apt&lt;/code&gt;目录下创建&lt;code&gt;apt.conf&lt;/code&gt;文件，写入：&lt;br&gt;&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Acquire::http::proxy &lt;span class=&quot;string&quot;&gt;&quot;http://user:password@host:port/&quot;&lt;/span&gt;;   &lt;span class=&quot;meta&quot;&gt;# 需要用户名密码&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Acquire::https::proxy &lt;span class=&quot;string&quot;&gt;&quot;http://user:password@host:port/&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Acquire::http::proxy &lt;span class=&quot;string&quot;&gt;&quot;http://host:port/&quot;&lt;/span&gt;;   &lt;span class=&quot;meta&quot;&gt;# 无需用户名密码&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Acquire::https::proxy &lt;span class=&quot;string&quot;&gt;&quot;http://host:port/&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后&lt;code&gt;apt-get update&lt;/code&gt;或者&lt;code&gt;apt-get install xx&lt;/code&gt;即可成功啦。&lt;/p&gt;
&lt;h5 id=&quot;MAVEN阿里云镜像设置加速MAVEN依赖下载&quot;&gt;&lt;a href=&quot;#MAVEN阿里云镜像设置加速MAVEN依赖下载&quot; class=&quot;headerlink&quot; title=&quot;MAVEN阿里云镜像设置加速MAVEN依赖下载&quot;&gt;&lt;/a&gt;MAVEN阿里云镜像设置加速MAVEN依赖下载&lt;/h5&gt;&lt;p&gt;国内用Maven仓库有时非常之慢，还有可能很多依赖下不下来。&lt;br&gt;可以加一个阿里云的mirror来加速，速度杠杠的。&lt;br&gt;在 &lt;code&gt;${MAVEN_HOME}/conf/settings.xml&lt;/code&gt; 的mirror区域添加（或改换成）如下代码：&lt;br&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;mirror&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;id&lt;/span&gt;&amp;gt;&lt;/span&gt;nexus-aliyun&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;id&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;mirrorOf&lt;/span&gt;&amp;gt;&lt;/span&gt;central&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;mirrorOf&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;Nexus aliyun&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;url&lt;/span&gt;&amp;gt;&lt;/span&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;url&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;mirror&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;还有一个小诀窍是，我们平时用Intellij时，可以把 &lt;code&gt;Settings/Build,Excution,Deployment/Build Tools/Maven&lt;/code&gt; 中的 &lt;code&gt;Maven home directory&lt;/code&gt; 从 &lt;code&gt;Bunddle&lt;/code&gt; 改成本地 &lt;code&gt;${MAVEN_HOME}&lt;/code&gt; 的地址。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;新开一贴，记录一下Ubuntu使用中的一些问题。&lt;/p&gt;
&lt;h5 id=&quot;Ubuntu-搜狗输入法问题&quot;&gt;&lt;a href=&quot;#Ubuntu-搜狗输入法问题&quot; class=&quot;headerlink&quot; title=&quot;Ubuntu 搜狗输入法问题&quot;&gt;&lt;/a&gt;Ubuntu 搜狗输入法
    
    </summary>
    
      <category term="错误解决与优化 | Err_n_Opt" scheme="http://whatbeg.com/categories/%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3%E4%B8%8E%E4%BC%98%E5%8C%96-Err-n-Opt/"/>
    
    
      <category term="Linux" scheme="http://whatbeg.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>合并多个Commits，请注意！</title>
    <link href="http://whatbeg.com/2017/04/01/combinecommits.html"/>
    <id>http://whatbeg.com/2017/04/01/combinecommits.html</id>
    <published>2017-04-01T11:47:16.000Z</published>
    <updated>2017-04-01T11:48:28.282Z</updated>
    
    <content type="html">&lt;h2 id=&quot;合并多个Commits&quot;&gt;&lt;a href=&quot;#合并多个Commits&quot; class=&quot;headerlink&quot; title=&quot;合并多个Commits&quot;&gt;&lt;/a&gt;合并多个Commits&lt;/h2&gt;&lt;p&gt;我们提交Pull Request的时候有时候并不是一个Commit就完成的，往往会做一些修改，然后再提交Commit，通常会走多轮，到最后就可能会有多个Commit，这时候往往需要合并这些Commits为一个，然后Manager帮你Merge。&lt;br&gt;这时候我们就需要使用git rebase了。&lt;br&gt;这里我并不打算详解rebase，这是Git book做的事，这里只是记录一下自己做的一个过程。&lt;/p&gt;
&lt;p&gt;关于rebase可以参看这几篇文章：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%8F%98%E5%9F%BA&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;3.6 Git 分支 - 变基&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://zerodie.github.io/blog/2012/01/19/git-rebase-i/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;如何合併多個commits&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.jianshu.com/p/964de879904a&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;「Git」合并多个 Commit&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;首先&lt;code&gt;git log&lt;/code&gt;查看需要合并的Commits，比如如下形式：&lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;commit&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;ade56efc466c093d7e8e25c520293cesedc96cc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Author: xxx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;Date&lt;/span&gt;:   Wed Mar &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;31&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt; +&lt;span class=&quot;number&quot;&gt;0800&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;Commit&lt;/span&gt; Message &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;commit&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;546&lt;/span&gt;ffc32692d3f935feb9b04d6ecb66feda9560b&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Author: xxx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;Date&lt;/span&gt;:   Mon Feb &lt;span class=&quot;number&quot;&gt;20&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;28&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;40&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt; +&lt;span class=&quot;number&quot;&gt;0800&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;Commit&lt;/span&gt; Message &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;commit&lt;/span&gt; f48b8644013c23f132c3fe72f8cc38ea288e6f3d&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Author: xxx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;Date&lt;/span&gt;:   Thu Feb &lt;span class=&quot;number&quot;&gt;9&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;13&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;52&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;39&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt; +&lt;span class=&quot;number&quot;&gt;0800&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;Commit&lt;/span&gt; Message &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;commit&lt;/span&gt; fe72f8cc38ea288e6c3fe72f8cc38ea288e6f3de&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Author: xxx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;Date&lt;/span&gt;:   Thu Feb &lt;span class=&quot;number&quot;&gt;9&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;39&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt; +&lt;span class=&quot;number&quot;&gt;0800&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;Commit&lt;/span&gt; Message &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;比如说我们需要合并Commit 2-4这三个提交，我们运行&lt;br&gt;&lt;figure class=&quot;highlight applescript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git rebase -i &amp;lt;SHA&lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;of&lt;/span&gt; Commit &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&amp;gt;  &lt;span class=&quot;comment&quot;&gt;# -i后面的参数为最后一个不需要合并的Commit，这里为Commit 1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后出现交互框，出现三个pick&lt;br&gt;&lt;figure class=&quot;highlight cmake&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pick ... Commit &lt;span class=&quot;keyword&quot;&gt;Message&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pick ... Commit &lt;span class=&quot;keyword&quot;&gt;Message&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pick ... Commit &lt;span class=&quot;keyword&quot;&gt;Message&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;我们将后两个pick改成squash，即：&lt;br&gt;&lt;figure class=&quot;highlight cmake&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pick ... Commit &lt;span class=&quot;keyword&quot;&gt;Message&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;squash ... Commit &lt;span class=&quot;keyword&quot;&gt;Message&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;squash ... Commit &lt;span class=&quot;keyword&quot;&gt;Message&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这里两个操作的区别是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;pick的意思是要会选择合并到这个commit&lt;/li&gt;
&lt;li&gt;squash(挤压)的意思是这个commit会被合并到前一个commit&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;然后输入新的Commit Message，保存，即合并成功，最后看只剩一个Commit了。&lt;br&gt;最后Push到remote，这时会提示版本不合，因为本地这个进行了合并后，已经比remote老了，这时只需强推即可：&lt;br&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git push -f &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;upstream&lt;/span&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;localbranch&lt;/span&gt;&amp;gt;&lt;/span&gt;:&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;remotebranch&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;最后，多个提交就变成了一个提交，可以被merge了。&lt;/p&gt;
&lt;h2 id=&quot;后悔药&quot;&gt;&lt;a href=&quot;#后悔药&quot; class=&quot;headerlink&quot; title=&quot;后悔药&quot;&gt;&lt;/a&gt;后悔药&lt;/h2&gt;&lt;p&gt;注意，如果出现了什么不想看到的结果或者操作错误，可以使用&lt;br&gt;&lt;figure class=&quot;highlight applescript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git rebase &lt;span class=&quot;comment&quot;&gt;--abort&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;进行挽救，即可恢复到rebase之前的状态。&lt;/p&gt;
&lt;h2 id=&quot;简易方法&quot;&gt;&lt;a href=&quot;#简易方法&quot; class=&quot;headerlink&quot; title=&quot;简易方法&quot;&gt;&lt;/a&gt;简易方法&lt;/h2&gt;&lt;p&gt;如果只需合并两个Commit，且又是最近的两个Commit，其实可以更简单地使用：&lt;br&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git &lt;span class=&quot;keyword&quot;&gt;reset&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;--soft HEAD^1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git &lt;span class=&quot;keyword&quot;&gt;commit&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;--amend&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;来解决。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;合并多个Commits&quot;&gt;&lt;a href=&quot;#合并多个Commits&quot; class=&quot;headerlink&quot; title=&quot;合并多个Commits&quot;&gt;&lt;/a&gt;合并多个Commits&lt;/h2&gt;&lt;p&gt;我们提交Pull Request的时候有时候并不是一个Commit就
    
    </summary>
    
      <category term="计算机相关 | CS.Related" scheme="http://whatbeg.com/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9B%B8%E5%85%B3-CS-Related/"/>
    
    
      <category term="Git" scheme="http://whatbeg.com/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Deep Learning读书笔记（1）【开篇】</title>
    <link href="http://whatbeg.com/2017/03/29/deeplearningbook-01.html"/>
    <id>http://whatbeg.com/2017/03/29/deeplearningbook-01.html</id>
    <published>2017-03-29T14:39:32.000Z</published>
    <updated>2017-03-30T12:01:25.924Z</updated>
    
    <content type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;“深度学习”的概念萌芽于2006年，2010年以后逐渐兴起，到2015,2016年达到顶峰，尤其是2016年，感觉各种IT网站，业界公号，微博等等都充斥着”深度学习”这个词语，论文数量急剧增加，盛况空前。到现在，2017年上半年，火热之势不减，诸多meetup，讨论会，交流会，分享会此起彼伏，人头攒动，业界大牛则在展望未来，规划前程或是默默做着前沿探索。&lt;br&gt;初次接触深度学习是在去年做一个NLP比赛的时候，尝试了深度学习的方法，效果确实不错，未加集成，融合的单模型就能表现出很好的效果，于是入坑，，直至遇到Bengio,Goodfellow,Courville合著的这本《Deep Learning》，想把它啃下来，陆陆续续看了一些，前几章还好，越到后面会难一些，借着这个机会，分享下自己的阅读心得，也督促自己继续把它啃完。&lt;/p&gt;
&lt;h2 id=&quot;智能机器&quot;&gt;&lt;a href=&quot;#智能机器&quot; class=&quot;headerlink&quot; title=&quot;智能机器&quot;&gt;&lt;/a&gt;智能机器&lt;/h2&gt;&lt;p&gt;人类一直以来都有一个梦想，就是制造出能够思考的机器。可是一直到近代，计算机的发明，才使得这一梦想有了巨大的推进。再到今天，人工智能(Artificial Intelligence)，起源于1956年夏季”达特茅斯会议”的这门学科，经过1997年IBM DeepBlue战胜国际象棋大师卡斯帕罗夫，再到2016年3月AlphaGo战胜李世石，到最近的Master，已经成为了最蓬勃发展的一个领域之一，此时，我们重新问自己这个问题: “人类能否制造出有智能的机器？”。诚然，”智能”的定义又有许多种，有人说，通过图灵测试的机器就具有智能，有人说，有自我意识，会思考的机器才算具有智能，总的来说没有一致公认的定义。于是观点逐渐分为两派，一个是强AI观点，一个是弱AI观点，强AI观点认为人类有可能制造出能推理和解决问题，并具有自我意识和直觉的机器，弱AI观点则认为不能。&lt;/p&gt;
&lt;p&gt;但是，纠结于智能的标准，以及能不能使机器达到智能对我们并无太大助益，我们现在所希望的是制造出更加”聪明”一点的机器，帮我们做很多事情。这是好的，但是”人工智能威胁论”也随之应运而生，客观来说，人工智能真正能够对人类产生威胁还有很长的路要走，但是不得不承认，很多机械性的工作，机器拿手的问题很可能会逐渐被机器人取代，从而会加高工作的知识壁垒，也会使一些工人失业，这是大势，阻挡不了。&lt;/p&gt;
&lt;h2 id=&quot;深度学习&quot;&gt;&lt;a href=&quot;#深度学习&quot; class=&quot;headerlink&quot; title=&quot;深度学习&quot;&gt;&lt;/a&gt;深度学习&lt;/h2&gt;&lt;p&gt;那么哪些问题是机器拿手的，哪些问题又是人类拿手的呢？&lt;/p&gt;
&lt;p&gt;我们知道，早期计算机在处理问题时，需要人类把问题，规则，策略描述给它，硬编码到系统中，然后交给计算机去做，但是人们逐渐遇到了依赖硬编码的系统带来的许多困难与问题，也让人们意识到，必须要让AI系统具有获得他们自己知识的能力。计算机在复杂计算，规则明确的策略搜索(如棋类)，大规模存储记忆等方面的处理能力远超人类，这些问题对于机器来说，无非是执行规则而已，但是人的直觉是很难被机器学到的，包括物体识别，观察判断和听说读写等等，这些问题很难形式化地描述给计算机，但是这些问题我们仍想去解决，仍然需要被解决。&lt;/p&gt;
&lt;p&gt;本书就集中描述一种解决方案，它让计算机从经验中学习，按照概念的层级(Hierarchy of Concepts)来理解世界，其中每个概念定义在比它更简单的概念之上，从而避免让人类去指定计算机需要的知识。这种方法我们称之为深度学习。深度学习只是机器学习领域的一个很小的课题，从下图可以看出，但是由于它解决了许多以前无法解决的问题，提升了以前解决得不好的问题，从而名声大噪，进入了大众的视野。&lt;/p&gt;
&lt;center&gt; &lt;img src=&quot;http://7xsl28.com1.z0.glb.clouddn.com/dl_001.png&quot; alt=&quot;&quot;&gt; &lt;/center&gt;

&lt;p&gt;给一个较明确的定义如下：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“深度学习是一种表示学习方法,把原始数据通过一些简单的非线性模型转变为更高层次的,更加抽象的表达。通过足够多的转换的组合,非常复杂的函数也可以被学习。”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;深度学习处在什么位置？&quot;&gt;&lt;a href=&quot;#深度学习处在什么位置？&quot; class=&quot;headerlink&quot; title=&quot;深度学习处在什么位置？&quot;&gt;&lt;/a&gt;深度学习处在什么位置？&lt;/h2&gt;&lt;p&gt;从上图我们看出，我们首先聚焦AI领域，AI包括基于知识的AI(类似以前的专家系统)，另外还包括机器学习，机器学习又分为几类，一类如SVM，LR等传统的分类回归方法，另一类即表示学习，传统的机器学习方法意图学习一个表示-&amp;gt;输出的映射$\mathcal F$，其中表示往往需要做特征工程，人工指定数据的表示方法，表示的选择对机器学习的性能有着巨大的影响，而表示学习的精髓在于，它不仅学习表示-&amp;gt;输出的映射，还学习表示本身，即学习更好的对输入数据的表示，表示学习就像一个端到端的过程，直接得出输入到输出的一系列映射关系，表示学习包括浅层的自动编码器(autoencoders)，意在学习出输入到另一个表示的尽可能降低信息损失的映射，意在得到一个具有输入不具有的良好性质的表示。表示学习的另一大类就是深度学习，深度学习，在于一个深字，也称为深度神经网络，因为这种深度通过多层的神经网络来组成，比如多层感知机(MLP)就属于深度学习范畴。说白一点就是，深度学习就是很多层神经网络组合而成，利用深度和非线性单元的一起作用，更多的学习函数或者概念的组合，使得机器能够学习到更加复杂的映射，解决那些更加复杂的问题，一般认为，有某些因素在背后影响着我们具体问题中的观察数据，深度学习的目的就是学习出这种因素及这种因素是如何变化的。至于多深才算深，也没有统一的意见。&lt;br&gt;书上这张图更加清晰地阐明了深度学习的方法。&lt;/p&gt;
&lt;center&gt; &lt;img src=&quot;http://7xsl28.com1.z0.glb.clouddn.com/dl_002.png&quot; alt=&quot;&quot;&gt; &lt;/center&gt;

&lt;h2 id=&quot;历史与趋势&quot;&gt;&lt;a href=&quot;#历史与趋势&quot; class=&quot;headerlink&quot; title=&quot;历史与趋势&quot;&gt;&lt;/a&gt;历史与趋势&lt;/h2&gt;&lt;p&gt;深度学习在历史进程中总的来说有几大趋势：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;深度学习有着很长很丰富的历史，但是许多反映着不同哲学观点的人的名字已经消逝，不被人记起&lt;/li&gt;
&lt;li&gt;随着训练数据的增多，深度学习的效果变得更好了&lt;/li&gt;
&lt;li&gt;软件和硬件的迅速提升给深度学习提供了物质基础&lt;/li&gt;
&lt;li&gt;深度学习有了更高的准确率，逐渐在解决日益复杂的问题。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;可能有很多人认为神经科学是对大脑的模拟，确实，脑神经科学的研究给予了神经网络重大的启示，但是深度学习，或者神经网络，更多的是受到多个其他领域的启发，比如应用数学基础，信息论和数值优化等等，我们甚至可以直接说，神经网络是一个数学问题。&lt;/p&gt;
&lt;p&gt;深度学习的历史要追溯到上个世纪40年代，40年代是神经网络的萌芽期，1943年McCulloch-Pitts Neuron的发明，控制论(Cybernetics)的兴起，和1945年Hebb学习规则的提出，逐渐萌生了神经网络这门学科。到后来，1950年代到60年代末，期间有1958年感知机的提出，1960年ADALINE(Adaptive Linear Element)的提出，促使了这段时间的逐渐繁荣。但是，以上模型终究只是线性模型，无法解决更复杂的问题，甚至无法学习异或(XOR)操作，这让人们很失望，于是知道70年代末期，整个领域陷入了一片沉寂。到80年代，联结主义和并行分布式计算的浪潮掀起，1986年著名的后向传播算法(BP, Back Propagation)的发明，分布式表示(Distributed Representation)的提出，以及序列建模，LSTM都相继提出，构成了另一波的繁荣期。联结主义是统合了认知心理学、人工智能和心理哲学领域的一种理论，认为”大量的简单计算单元相互联结时能够达到智能行为”。繁荣了不久(很可能当时也是如现在一般火热)，许多创业者纷纷涌入，为了获得投资，鼓吹之风逐渐升起，导致最后许诺的效果无法兑现，投资者逐渐丧失信心，加之当时数据少，层数浅，训练慢，很容易造成过拟合或者欠拟合的问题，以及SVM和图模型的巨大成功，使得神经网络再次被压了下去，陷入沉寂，而此事，有一个名为CIFAR(Canadian Institute for Advanced Research)的学术组织，成员包括现在大家耳熟能详的LeCun，Bengio，Hinton等人，没错，就是本书作者Bengio，他们一直在坚持神经网络的研究。到了2006年，Hinton发表著名论文，表明深度信念网络可以采用Greedy Layer-wise Pretraining的策略高效地训练，后来人发现这种方法在其他深度网络上作用也很大，从此以后，深度学习开始在各领域大放异彩，2006年也因此被称为”深度学习元年”。&lt;/p&gt;
&lt;p&gt;目前深度学习作用最为显著的领域当属计算机视觉，语音识别和自然语言处理了。&lt;/p&gt;
&lt;h2 id=&quot;为什么是深度学习？&quot;&gt;&lt;a href=&quot;#为什么是深度学习？&quot; class=&quot;headerlink&quot; title=&quot;为什么是深度学习？&quot;&gt;&lt;/a&gt;为什么是深度学习？&lt;/h2&gt;&lt;p&gt;很简单，从以下几个方面可以一窥究竟&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;数据集规模：如今越来越数字化，数据量成爆炸式增长，使得人们想从巨量的数据中挖掘各种各样的模式和价值&lt;/li&gt;
&lt;li&gt;计算能力和模型大小：计算能力的提升使得我们能够训练越来越大的模型，提高了模型大小，也就增加了能解决的问题的复杂度&lt;/li&gt;
&lt;li&gt;准确率，问题复杂性：深度学习在诸多领域表现出色，在某些识别问题上甚至超过人类，解决着越来越复杂的问题&lt;/li&gt;
&lt;li&gt;实际应用：深度学习的落地，解决了人们很多需求，带来了很多价值，让人们逐渐对他倾心。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;弱点？&quot;&gt;&lt;a href=&quot;#弱点？&quot; class=&quot;headerlink&quot; title=&quot;弱点？&quot;&gt;&lt;/a&gt;弱点？&lt;/h2&gt;&lt;p&gt;可是，深度学习就没有一点缺陷么？不是的，辩证法来说，事物总是具有两面性，深度学习的一些弱点如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;很多时候,初始数据表示就已经很合适了&lt;/li&gt;
&lt;li&gt;需要大量的数据&lt;/li&gt;
&lt;li&gt;巨大的计算开销,小的机构有点虚&lt;/li&gt;
&lt;li&gt;容易陷入局部最优&lt;/li&gt;
&lt;li&gt;难以解释，“玄乎”&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;最后&quot;&gt;&lt;a href=&quot;#最后&quot; class=&quot;headerlink&quot; title=&quot;最后&quot;&gt;&lt;/a&gt;最后&lt;/h2&gt;&lt;p&gt;本文取材自本书第一章导引部分，第一章介绍了深度学习的概念，以及深度学习在整个领域中所处的位置，然后交代了深度学习的历史发展与趋势，以及能够站上如此高的舞台的内在外在原因。再加上自己的一些理解，促成了本文。笔者才疏学浅，如果不妥之处，还望不吝指出，感谢阅读到最后的朋友们。&lt;br&gt;另附上笔者在一次Talk中的演讲PPT，也有很大一部分取材于本书第一章，可以尝试下载观看。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://ogbh7uglm.bkt.clouddn.com/%E6%B5%85%E8%B0%88%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%20.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;浅谈深度学习.PDF&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;References&quot;&gt;&lt;a href=&quot;#References&quot; class=&quot;headerlink&quot; title=&quot;References&quot;&gt;&lt;/a&gt;References&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;《Deep Learning》GoodFellow, Bengio etc.&lt;/li&gt;
&lt;li&gt;《Deep Learning Revew》LeCun, Bengio, Hinton&lt;/li&gt;
&lt;li&gt;《Deep Learning学习笔记整理系列》zouxy&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;“深度学习”的概念萌芽于2006年，2010年以后逐渐兴起，到2015,2016年达到顶峰，尤其是2016年，感觉各种IT网站，业界公号，微
    
    </summary>
    
      <category term="深度学习 | Deep Learning" scheme="http://whatbeg.com/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Deep-Learning/"/>
    
    
      <category term="Deep Learning" scheme="http://whatbeg.com/tags/Deep-Learning/"/>
    
      <category term="深度学习" scheme="http://whatbeg.com/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
</feed>
